<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Softdevice-devel] problems with mgatv
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/softdevice-devel/2005q1/index.html" >
   <LINK REL="made" HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20problems%20with%20mgatv&In-Reply-To=%3C1104954030.2788.38.camel%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000125.html">
   <LINK REL="Next"  HREF="000127.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Softdevice-devel] problems with mgatv</H1>
    <B>Ari Koponen</B> 
    <A HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20problems%20with%20mgatv&In-Reply-To=%3C1104954030.2788.38.camel%40localhost.localdomain%3E"
       TITLE="[Softdevice-devel] problems with mgatv">particle at luukku.com
       </A><BR>
    <I>Wed Jan  5 20:40:31 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000125.html">[Softdevice-devel] [Bug #2972] Picture disappears when OSD goes off
</A></li>
        <LI>Next message: <A HREF="000127.html">[Softdevice-devel] problems with mgatv
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#126">[ date ]</a>
              <a href="thread.html#126">[ thread ]</a>
              <a href="subject.html#126">[ subject ]</a>
              <a href="author.html#126">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi guys,

Previously I had problems getting picture to TV with this but now I
eventually managed to get it. The problem was in my directfbrc. I had a
line

mode=720x576

and I changed it to

mode=768x576

and voila! It worked,but next problem is that both video and audio
streams choke very badly. I get only something like a frame per second
and the video looks like it was in slow motion. Here's my log:

---
[<A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">root at localhost</A> vdr-1.2.6]# ./vdr -P&quot;softdevice -vo dfb:mgatv&quot;
[softdevice] processing args
[softdevice]   argv [0] = softdevice
[softdevice]   argv [1] = -vo
[setup-softdevice] alsa device set to: default
[setup-softdevice] A/V Offset set to (0)
[setup-softdevice] cropping mode set to 0 (none)
[setup-softdevice] deinterlace method set to 1 lavc
[softdevice] picture mirroring set to 0 (off)
[setup-softdevice] pixel format set to (YUV2)
[setup-softdevice] startup aspect set to (4:3 normal)
[softdevice] initializing Plugin
[softdevice] Initializing Video Out
[softdevice] ffmpeg version(0.4.9-pre1) build(4736)
[dfb] init
(*) DirectFB/Config: Parsing config file '/etc/directfbrc'.
 
       ---------------------- DirectFB v0.9.21 ---------------------
             (c) 2000-2002  convergence integrated media GmbH
             (c) 2002-2004  convergence GmbH
        -----------------------------------------------------------
 
(*) DirectFB/Core: Single Application Core. (2005-01-04 12:35)
(*) Direct/Memcpy: Using MMXEXT optimized memcpy()
(*) Direct/Thread: Running 'VT Switcher' (CRITICAL, 5559)...
(*) Direct/Modules: suppress module 'joystick'
(*) Direct/Modules: suppress module 'ps2mouse'
(*) Direct/Thread: Running 'Keyboard Input' (INPUT, 5560)...
 (!!!)  *** UNIMPLEMENTED [fusion_reactor_set_lock] *** [reactor.c:802]
(*) DirectFB/Input: Keyboard 0.9 (convergence integrated media GmbH)
(*) DirectFB/Genefx: MMX detected and enabled
(*) DirectFB/Graphics: Matrox G450 0.7 (convergence integrated media
GmbH)
(*) DirectFB/Core/WM: Default 0.2 (Convergence GmbH)
[dfb] RAM: 8388608 bytes
[dfb] Accellerated Functions: FillRectange DrawRectange DrawLine
FillTriangle Blit StretchBlit All
[dfb] Drawing Flags: Blend
[dfb] Surface Blitting Flags: BlendAlpha BlendColorAlpha Colorize
SrcColorkey Deinterlace
[dfb] Supported video Modes are: <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">640x480 at 16</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">768x576 at 32</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">768x576 at 16</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">640x480 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">640x480 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">640x480 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">640x480 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">640x480 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x768 at 8</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x768 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x768 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x768 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x768 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x768 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x768 at 8</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1152x864 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1152x864 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1152x864 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1152x864 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1152x864 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1152x864 at 8</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x1024 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1280x1024 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1280x1024 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1280x1024 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1280x1024 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1280x1024 at 8</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1600x1200 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1600x1200 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1600x1200 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">720x576 at 16</A>
[dfb] Enumeratig display Layers
Layer 2 FBDev Primary Layer  Type: graphics
  Caps: brightness contrast saturation surface
Layer 1 Matrox Backend Scaler  Type: graphics picture video
  Caps: brightness contrast deinterlacing dst_colorkey screen_location
surface
Layer 0 Matrox CRTC2 Layer  Type: graphics picture video
  Caps: brightness contrast flicker_filtering hue saturation surface
[dfb] width = 720, height = 576
[dfb] got fmt = 0x00200806 bpp = 16
[dfb] Using this layer for OSD: (Matrox CRTC2 Layer - [720x576])
osdSurface::
 - videoonly
 - flipping
videoSurface::
 - videoonly
[dfb] Configuring CooperativeLevel for Overlay
[dfb] Configuring ColorKeying
[dfb] Configuring CooperativeLevel for OSD
[dfb] Using this layer for OSD: Matrox CRTC2 Layer
[dfb] Using this layer for Video out: Matrox CRTC2 Layer
[dfb] (re)configuring Videolayer to 720 x 576 (720x576)
[dfb] creating new surface
[dfb] (re)configured 0x00200806
[softdevice] Video Out seems to be OK
[softdevice] Initializing Audio Out
[softdevice] Audio out seems to be OK
[softdevice] A/V devices initialized, now initializing MPEG2 Decoder
[softdevice] OSD-Position at 54 x 396
[video] Creating WindowLayer at 54 x 396, (624 x 135)
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 24 8
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 0 14
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 0 12
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 0 16
[mpeg2video @ 0xb7d3a128]skiped MB in I frame at 1 18
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 0 19
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 0 21
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 0 22
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 0 25
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 1 26
[mpeg2video @ 0xb7d3a128]invalid mb type in I Frame at 0 27
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 1 28
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 0 29
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 0 30
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 0 31
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 0 32
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 0 33
[mpeg2video @ 0xb7d3a128]skiped MB in I frame at 1 34
[mpeg2video @ 0xb7d3a128]ac-tex damaged at 0 35
[mpeg2video @ 0xb7d3a128]concealing 2147483647 errors
[mpeg2video @ 0xb7d3a128]Warning MVs not available
[mpeg2video @ 0xb7d3a128]00 motion_type at 11 2
[mpeg2video @ 0xb7d3a128]concealing 2147479327 errors
[mpeg2video @ 0xb7d3a128]Warning MVs not available
---

And here's part of /var/log/messages
---
Jan  5 21:20:46 localhost vdr[5546]: ERROR: ring buffer overflow (89
bytes dropp ed)
Jan  5 21:20:46 localhost vdr[5546]: ERROR: ring buffer overflow (188
bytes drop ped)
Jan  5 21:21:05 localhost last message repeated 21541 times
Jan  5 21:21:05 localhost vdr[5546]: ERROR: skipped 99 byte to sync on
TS packet
Jan  5 21:21:05 localhost vdr[5546]: ERROR: ring buffer overflow (89
bytes dropp ed)
Jan  5 21:21:05 localhost vdr[5546]: ERROR: ring buffer overflow (188
bytes drop ped)
Jan  5 21:21:12 localhost last message repeated 8113 times
---

Normal dfb: driver doesn't cause these problems so I believe that this
problem is not caused by ffmpeg as suggested in the VDR mailinglist.

And last some information about my system:

- Graphics card: Matrox G450 Dualhead 16 Mb
- Kernel: 2.6.9 (vanilla)
- Softdevice and ffmpeg are from today's CVS
- Distro: FedoraCore 2


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000125.html">[Softdevice-devel] [Bug #2972] Picture disappears when OSD goes off
</A></li>
	<LI>Next message: <A HREF="000127.html">[Softdevice-devel] problems with mgatv
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#126">[ date ]</a>
              <a href="thread.html#126">[ thread ]</a>
              <a href="subject.html#126">[ subject ]</a>
              <a href="author.html#126">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/softdevice-devel">More information about the Softdevice-devel
mailing list</a><br>
</body></html>
