From stefan at lucke.in-berlin.de  Wed Oct  1 00:18:31 2008
From: stefan at lucke.in-berlin.de (Stefan Lucke)
Date: Wed, 1 Oct 2008 00:18:31 +0200
Subject: [Softdevice-devel] Epia EN1500G + softdevice
In-Reply-To: <200809292145.32660.stefan@lucke.in-berlin.de>
References: <48D5116A.1030607@globall.ru> <48D90D15.4080107@globall.ru>
	<200809292145.32660.stefan@lucke.in-berlin.de>
Message-ID: <200810010018.31606.stefan@lucke.in-berlin.de>

On Monday 29 September 2008, Stefan Lucke wrote:
> On Tuesday 23 September 2008, Vladimir Monchenko wrote:
> > Stefan Lucke wrote:
> > > This description reminds me of pitch size mismatch for OSD.
> > > Can you add some debug message(s) to method GetLockOsdSurface()
> > > around line 1192, after commented out printf.
> > >
> > > softlog->Log(SOFT_LOG_INFO, 0, "[dfb--] osd surface pitch is (%d)\n", pitch),
> > >
> > >   
> > After experiments, I have detected that this effect depends on the 
> > resolution with which it is started vdr.
> > In resolutions 640x480, 800x600 and 1024x768 OSD works not correctly. It 
> > does not depend on customisations of video output (dfb:, dfb:cle266, 
> > dfb:cle266:viatv).
> > In reslution 720x576 OSD works normally.
> 
> With my system I can see now the same messy OSD.
> Pitch sizes are buggy when the first entry of /etc/fb.modes does not
> match the resolution choosen in directfbrc ;-) 

Attached diff for DirectFB fixes this for me.

> 
> > Sep 22 19:09:34 epia-en vdr: [5266] [dfb--] osd surface pitch is (2880)
> > Sep 22 19:09:41 epia-en vdr: [5266] [dfb--] osd surface pitch is (3200)
> > Sep 22 19:09:43 epia-en vdr: [5266] [dfb--] osd surface pitch is (2880)
> 




-- 
Stefan Lucke
-------------- next part --------------
diff --git a/systems/fbdev/fbdev.c b/systems/fbdev/fbdev.c
index d709cb3..e5d4ca6 100644
--- a/systems/fbdev/fbdev.c
+++ b/systems/fbdev/fbdev.c
@@ -1105,9 +1105,10 @@ primaryInitLayer( CoreLayer                  *layer,
      config->flags      = DLCONF_WIDTH       | DLCONF_HEIGHT |
                           DLCONF_PIXELFORMAT | DLCONF_BUFFERMODE;
      config->buffermode = DLBM_FRONTONLY;
-     config->width      = default_mode->xres;
-     config->height     = default_mode->yres;
-
+     config->width      = (dfb_config->mode.width) ? 
+                              dfb_config->mode.width : default_mode->xres;
+     config->height     = (dfb_config->mode.height) ?
+                              dfb_config->mode.height : default_mode->yres;
      if (dfb_config->mode.format)
           config->pixelformat = dfb_config->mode.format;
      else

From bob at globall.ru  Wed Oct  1 20:03:16 2008
From: bob at globall.ru (Vladimir Monchenko)
Date: Wed, 01 Oct 2008 22:03:16 +0400
Subject: [Softdevice-devel] Epia EN1500G + softdevice
In-Reply-To: <200810010018.31606.stefan@lucke.in-berlin.de>
References: <48D5116A.1030607@globall.ru>
	<48D90D15.4080107@globall.ru>	<200809292145.32660.stefan@lucke.in-berlin.de>
	<200810010018.31606.stefan@lucke.in-berlin.de>
Message-ID: <48E3BB64.2070304@globall.ru>

Stefan Lucke wrote:
>
> Attached diff for DirectFB fixes this for me.
>
>   
For me it works too, many thanks!

I have found that adjustment "Field Order" in softdevice nothing changes 
at playing interlaced video.
It seems to me that there is a problem with driver 
Linux-FBDev-kernel-src_2.6.00.03a which cannot work in a mode 720x576 
50Hz interlaced on TV out.

cat /etc/fb.modes:
mode "720x576"
    geometry 720 576 720 576 32
    timings 35714 32 8 46 0 136 3
bcast true # request overscan with (modified) viafb
#laced true
hsync high
vsync high
endmode

On my old ME6000 all good:
 vdr ~ # fbset

mode "720x576-50"
    # D: 28.000 MHz, H: 31.250 kHz, V: 50.000 Hz
    geometry 720 576 720 1152 32
    timings 35714 32 8 46 0 136 3
    hsync high
    vsync high
    bcast true
    rgba 8/16,8/8,8/0,8/24
endmode

On EN15000:
epia-en ~ # fbset

mode "720x576-60"
    # D: 32.668 MHz, H: 35.820 kHz, V: 60.000 Hz
    geometry 720 576 720 576 32
    timings 30611 96 24 17 1 72 3
    hsync high
    vsync high
    bcast true
    accel true
    rgba 8/16,8/8,8/0,0/0
endmode

Stefan, you can try to switch fb in a mode 720x576 50Hz?
How well works TV out for you?

Regards,
Vladimir Monchenko.


From stefan at lucke.in-berlin.de  Wed Oct  1 21:16:15 2008
From: stefan at lucke.in-berlin.de (Stefan Lucke)
Date: Wed, 1 Oct 2008 21:16:15 +0200
Subject: [Softdevice-devel] Epia EN1500G + softdevice
In-Reply-To: <48E3BB64.2070304@globall.ru>
References: <48D5116A.1030607@globall.ru>
	<200810010018.31606.stefan@lucke.in-berlin.de>
	<48E3BB64.2070304@globall.ru>
Message-ID: <200810012116.15315.stefan@lucke.in-berlin.de>

On Wednesday 01 October 2008, Vladimir Monchenko wrote:
> Stefan Lucke wrote:
> >
> > Attached diff for DirectFB fixes this for me.
> >
> >   
> For me it works too, many thanks!
> 
> I have found that adjustment "Field Order" in softdevice nothing changes 
> at playing interlaced video.
> It seems to me that there is a problem with driver 

The field order selection is an ioctl extension of directfb's via
driver. So it is not available from via's own one.
Didn't find the chars "irq" in via's *.[ch] files ;-) .

> Linux-FBDev-kernel-src_2.6.00.03a which cannot work in a mode 720x576 
> 50Hz interlaced on TV out.
> 
> cat /etc/fb.modes:
> mode "720x576"
>     geometry 720 576 720 576 32
>     timings 35714 32 8 46 0 136 3
> bcast true # request overscan with (modified) viafb
> #laced true
> hsync high
> vsync high
> endmode
> 
> On my old ME6000 all good:
>  vdr ~ # fbset
> 
> mode "720x576-50"
>     # D: 28.000 MHz, H: 31.250 kHz, V: 50.000 Hz
>     geometry 720 576 720 1152 32
>     timings 35714 32 8 46 0 136 3
>     hsync high
>     vsync high
>     bcast true
>     rgba 8/16,8/8,8/0,8/24
> endmode
> 

So add these lines to the modes of your EN15000 system.

> On EN15000:
> epia-en ~ # fbset
> 
> mode "720x576-60"
>     # D: 32.668 MHz, H: 35.820 kHz, V: 60.000 Hz
>     geometry 720 576 720 576 32
>     timings 30611 96 24 17 1 72 3
>     hsync high
>     vsync high
>     bcast true
>     accel true
>     rgba 8/16,8/8,8/0,0/0
> endmode

Did you choose tv_system=2 (PAL) as module load parameter ?

But there seems to be only a 60HZ definition:
bodega2 Linux-FBDev-kernel-src_2.6.00.03a # grep RES_720X576_ *.h
share.h:#define RES_720X576_60HZ_PIXCLOCK    30611
bodega2 Linux-FBDev-kernel-src_2.6.00.03a # grep RES_720X576_ *.c
hw.c:  {720, 576, RES_720X576_60HZ_PIXCLOCK,   60},

> 
> Stefan, you can try to switch fb in a mode 720x576 50Hz?
> How well works TV out for you?

With my epia system I only test VGA out as I've no TV in my pc room.

-- 
Stefan Lucke


From bob at globall.ru  Thu Oct  2 06:08:16 2008
From: bob at globall.ru (Vladimir Monchenko)
Date: Thu, 02 Oct 2008 08:08:16 +0400
Subject: [Softdevice-devel] Epia EN1500G + softdevice
In-Reply-To: <200810012116.15315.stefan@lucke.in-berlin.de>
References: <48D5116A.1030607@globall.ru>	<200810010018.31606.stefan@lucke.in-berlin.de>	<48E3BB64.2070304@globall.ru>
	<200810012116.15315.stefan@lucke.in-berlin.de>
Message-ID: <48E44930.3050001@globall.ru>

Stefan Lucke wrote:
> So add these lines to the modes of your EN15000 system.
>   
On these systems fb.modes are completely identical.
>
> Did you choose tv_system=2 (PAL) as module load parameter ?
>
>   
I have viafb driver built in the kernel and have such record in grub.conf:
kernel /boot/bzImage root =/dev/hda3 video=viafb:mode=720x576, bpp=32, 
accel=1, refresh=50, tv_system=2, tv_level=2, active_dev=TV
> bodega2 Linux-FBDev-kernel-src_2.6.00.03a # grep RES_720X576_ *.h
> share.h:#define RES_720X576_60HZ_PIXCLOCK    30611
> bodega2 Linux-FBDev-kernel-src_2.6.00.03a # grep RES_720X576_ *.c
> hw.c:  {720, 576, RES_720X576_60HZ_PIXCLOCK,   60}
>
>   
At usage linux-viafb driver on ME6000 I too can have only 60Hz on CRT, 
but if  use TV out instead of CRT, frame rate switches on 50Hz.
The driver linux-viafb has also improved the support for interlaced 
video through the TV output by Mark Adams.
Unfortunately, this driver does not work on cn700 chipset :(

Regards,
Vladimir Monchenko.




From goga777 at bk.ru  Fri Oct  3 22:19:06 2008
From: goga777 at bk.ru (Goga777)
Date: Sat, 4 Oct 2008 00:19:06 +0400
Subject: [Softdevice-devel] I couldn't compile softdevice from cvs
Message-ID: <20081004001906.167b304c@bk.ru>

Hi

I couldn't compile softdevice from cvs

goga:/usr/src/vdr170/PLUGINS/src/softdevice# ./configure
Testing system and cpu type... found Linux on i386 cpu.
Checking for pkg-config... Found.
Checking for ffmpeg... Ok.
Checking for ffmpeg/libswscale... Not Found.
Checking for pp_postprocess 1st arg ... is: const uint8_t **
Checking ffmpeg for member of AVCodecContext: error_recognition ... ./configure: line 408: 26460 ?????? ???????????????                   $TMPE
 'error_recognition' NOT found
Checking for ALSA sound... Enabled audio-alsa.
Checking for OSS sound... Enabled audio-oss.
Checking for linux frambuffer... Enabled video-fb.
Checking for yaepg patch... Not Found.
Checking for DirectFB and DFB++... Not Found.
Checking for vidix... Not found.
Checking for Xv... Enabled video-xv.
Checking for Xinerama... Enabled Xinerama.
Creating temporary config.h and config.mak
config.h is unchanged
config.mak is unchanged
Configure is finished. Please check config.log in case of problems.



In config.log I can see these errors 


Parameters ''
PKG_CONFIG_PATH '/usr/local/lib/pkgconfig'
Testing system and cpu type.----------------------------
uname -a: Linux goga 2.6.22-2-686 #1 SMP Fri Aug 31 00:24:01 UTC 2007 i686 GNU/Linux
g++ -dumpmache: i486-linux-gnu
Checking for pkg-config.-------------------------------
0.22
Checking for ffmpeg.------------------------------------
try to use pkg-config.
-lpostproc
In file included from /usr/local/include/libavutil/avutil.h:56,
                 from /usr/include/libavcodec/avcodec.h:30,
                 from /usr/include/avformat.h:40,
                 from /tmp/softdevice-conf-21934-26988-14574.c:5:
/usr/local/include/libavutil/common.h: In function ?int av_log2(unsigned int)?:
/usr/local/include/libavutil/common.h:123: error: redefinition of ?int av_log2(unsigned int)?
/usr/local/include/common.h:81: error: ?int av_log2(unsigned int)? previously defined here
/usr/local/include/libavutil/common.h: In function ?int av_log2_16bit(unsigned int)?:
/usr/local/include/libavutil/common.h:139: error: redefinition of ?int av_log2_16bit(unsigned int)?
/usr/local/include/common.h:99: error: ?int av_log2_16bit(unsigned int)? previously defined here
/usr/local/include/libavutil/common.h: In function ?int mid_pred(int, int, int)?:
/usr/local/include/libavutil/common.h:152: error: redefinition of ?int mid_pred(int, int, int)?
/usr/local/include/common.h:114: error: ?int mid_pred(int, int, int)? previously defined here
/usr/local/include/libavutil/common.h: In function ?int av_clip(int, int, int)?:
/usr/local/include/libavutil/common.h:199: error: redefinition of ?int av_clip(int, int, int)?
/usr/local/include/common.h:161: error: ?int av_clip(int, int, int)? previously defined here
/usr/local/include/libavutil/common.h: In function ?uint8_t av_clip_uint8(int)?:
/usr/local/include/libavutil/common.h:211: error: redefinition of ?uint8_t av_clip_uint8(int)?
/usr/local/include/common.h:173: error: ?uint8_t av_clip_uint8(int)? previously defined here
/usr/local/include/libavutil/common.h: In function ?int ff_get_fourcc(const char*)?:
/usr/local/include/libavutil/common.h:248: error: redefinition of ?int ff_get_fourcc(const char*)?
/usr/local/include/common.h:185: error: ?int ff_get_fourcc(const char*)? previously defined here
In file included from /usr/local/include/libavutil/mathematics.h:26,
                 from /usr/local/include/libavutil/avutil.h:57,
                 from /usr/include/libavcodec/avcodec.h:30,
                 from /usr/include/avformat.h:40,
                 from /tmp/softdevice-conf-21934-26988-14574.c:5:
/usr/local/include/libavutil/rational.h: At global scope:
/usr/local/include/libavutil/rational.h:37: error: redefinition of ?struct AVRational?
/usr/local/include/rational.h:36: error: previous definition of ?struct AVRational?
/usr/local/include/libavutil/rational.h:40: error: invalid type in declaration before ?;? token
/usr/local/include/libavutil/rational.h:40: error: conflicting declaration ?typedef int AVRational?
/usr/local/include/rational.h:39: error: ?AVRational? has a previous declaration as ?typedef struct AVRational AVRational?
/usr/local/include/libavutil/rational.h: In function ?int av_cmp_q(AVRational, AVRational)?

{cutted}

any advise ?


Goga


From goga777 at bk.ru  Sun Oct  5 09:56:02 2008
From: goga777 at bk.ru (Goga777)
Date: Sun, 5 Oct 2008 11:56:02 +0400
Subject: [Softdevice-devel] I couldn't compile softdevice from cvs
In-Reply-To: <20081004001906.167b304c@bk.ru>
References: <20081004001906.167b304c@bk.ru>
Message-ID: <20081005115602.0810c1c9@bk.ru>

during this 2 days I corrected something in y debian and now I have follow situation

/src/softdevice# ./configure

Testing system and cpu type... found Linux on i386 cpu.
Checking for pkg-config... Found.
Checking for ffmpeg... Ok.
Checking for ffmpeg/libswscale... Using libswscale.
Checking for pp_postprocess 1st arg ... is: const uint8_t **
Checking ffmpeg for member of AVCodecContext: error_recognition ...  'error_recognition' found
Checking for ALSA sound... Enabled audio-alsa.
Checking for OSS sound... Enabled audio-oss.
Checking for linux frambuffer... Enabled video-fb.
Checking for yaepg patch... Not Found.
Checking for DirectFB and DFB++... Not Found.
Checking for vidix... Not found.
Checking for Xv... Enabled video-xv.
Checking for Xinerama... Enabled Xinerama.
Creating temporary config.h and config.mak
config.h is unchanged
config.mak is unchanged
Configure is finished. Please check config.log in case of problems.



goga:/usr/src/vdr170/PLUGINS/src/softdevice# make

[skip]

-I/usr/local/include -I/usr/include/postproc   softdevice.c
In file included from video.h:25,
                 from mpeg2decoder.h:30,
                 from softdevice.h:17,
                 from softdevice.c:8:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
softdevice.c: In constructor ?cSoftDevice::cSoftDevice(int, int, char*)?:
softdevice.c:188: warning: deprecated conversion from string constant to ?char*?
softdevice.c:194: warning: deprecated conversion from string constant to ?char*?
softdevice.c:209: warning: deprecated conversion from string constant to ?char*?
softdevice.c: In constructor ?cPluginSoftDevice::cPluginSoftDevice()?:
softdevice.c:819: warning: deprecated conversion from string constant


any advice ?


Goga


From stefan at lucke.in-berlin.de  Mon Oct  6 19:35:53 2008
From: stefan at lucke.in-berlin.de (Stefan Lucke)
Date: Mon,  6 Oct 2008 19:35:53 +0200
Subject: [Softdevice-devel] I couldn't compile softdevice from cvs
In-Reply-To: <20081005115602.0810c1c9@bk.ru>
References: <20081004001906.167b304c@bk.ru> <20081005115602.0810c1c9@bk.ru>
Message-ID: <1223314553.48ea4c79ae8bb@webmail.in-berlin.de>

Quoting Goga777:

> during this 2 days I corrected something in y debian and now I have follow situation
>
> /src/softdevice# ./configure
>
> Testing system and cpu type... found Linux on i386 cpu.
> Checking for pkg-config... Found.
> Checking for ffmpeg... Ok.
> Checking for ffmpeg/libswscale... Using libswscale.
> Checking for pp_postprocess 1st arg ... is: const uint8_t **
> Checking ffmpeg for member of AVCodecContext: error_recognition ...  'error_recognition' found
> Checking for ALSA sound... Enabled audio-alsa.
> Checking for OSS sound... Enabled audio-oss.
> Checking for linux frambuffer... Enabled video-fb.
> Checking for yaepg patch... Not Found.
> Checking for DirectFB and DFB++... Not Found.
> Checking for vidix... Not found.
> Checking for Xv... Enabled video-xv.
> Checking for Xinerama... Enabled Xinerama.
> Creating temporary config.h and config.mak
> config.h is unchanged
> config.mak is unchanged
> Configure is finished. Please check config.log in case of problems.

Looks fine.

>
>
>
> goga:/usr/src/vdr170/PLUGINS/src/softdevice# make

Building softdevice has to be done the same way like
other plugins by "make plugins" from vdr's base
directory.


Stefan Lucke


From goga777 at bk.ru  Thu Oct  9 18:26:29 2008
From: goga777 at bk.ru (Goga777)
Date: Thu, 9 Oct 2008 20:26:29 +0400
Subject: [Softdevice-devel] I couldn't compile softdevice from cvs
In-Reply-To: <1223314553.48ea4c79ae8bb@webmail.in-berlin.de>
References: <20081004001906.167b304c@bk.ru> <20081005115602.0810c1c9@bk.ru>
	<1223314553.48ea4c79ae8bb@webmail.in-berlin.de>
Message-ID: <20081009202629.259649ba@bk.ru>

> > goga:/usr/src/vdr170/PLUGINS/src/softdevice# make
> 
> Building softdevice has to be done the same way like
> other plugins by "make plugins" from vdr's base
> directory.

yes, thank you. It helps me 

Goga



From softdevice at jasonline.co.uk  Thu Oct 16 15:06:42 2008
From: softdevice at jasonline.co.uk (Jason Harvey)
Date: Thu, 16 Oct 2008 14:06:42 +0100
Subject: [Softdevice-devel] =?windows-1252?q?Fix_for_error_=22=91offset=5F?=
 =?windows-1252?q?t=92_has_not_been_declared=22_-_cvs_softdevice_and_cvs_f?=
 =?windows-1252?q?fmpeg?=
Message-ID: <48F73C62.20303@jasonline.co.uk>

Hi,

Using cvs softdevice and cvs ffmpeg I got an error "?offset_t? has not 
been declared"

I googled and trawled the softdevice archive and don't think this has 
been encountered/fixed anywhere yet...

A recent change in cvs ffmpeg removed a custom type "offset_t" and 
replaced it with a standard int64_t.
This broke softdevice compilation.
The attached patch makes the necessary replacements in cvs softdevice 
files to match and it all now works.

Apologies if I should email direct or cc someone, and if the patch is 
broken, malformed or wrong please let me know I'll try not to get it 
wrong next time.

Hope this helps someone.

Just like to add a quick thanks to the softdevice developer(s)
Many thanks!

Jason

-------------- next part --------------
A non-text attachment was scrubbed...
Name: softdevice.patch
Type: text/x-patch
Size: 1176 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/softdevice-devel/attachments/20081016/dd17dc85/attachment.bin>

From goga777 at bk.ru  Thu Oct 16 18:46:44 2008
From: goga777 at bk.ru (Goga777)
Date: Thu, 16 Oct 2008 20:46:44 +0400
Subject: [Softdevice-devel] the running X letter in console
Message-ID: <20081016204644.2d80a7d8@bk.ru>

Hi

sometimes I can see in console the running X letter


[h264 @ 0xa134ae0]no frame!
[mpegdecoder] Error while decoding video frame 0
[mpegdecoder] resetting codec
[h264 @ 0xa134ae0]number of reference frames exceeds max (probably corrupt input), discarding one
[h264 @ 0xa134ae0]number of reference frames exceeds max (probably corrupt input), discarding one
[h264 @ 0xa134ae0]number of reference frames exceeds max (probably corrupt input), discarding one
[h264 @ 0xa134ae0]number of reference frames exceeds max (probably corrupt input), discarding one
[h264 @ 0xa134ae0]number of reference frames exceeds max (probably corrupt input), discarding one
[h264 @ 0xa134ae0]number of reference frames exceeds max (probably corrupt input), discarding one
[h264 @ 0xa134ae0]number of reference frames exceeds max (probably corrupt input), discarding one
[h264 @ 0xa134ae0]number of reference frames exceeds max (probably corrupt input), discarding one
ALSA lib pcm.c:2144:(snd_pcm_open_noupdate) Unknown PCM CH2
[XvVideoOut]: max area size 2048 x 2048
[XvVideoOut]: using area size 1312 x 754
#XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX??? 16 20:42:29 [core.pids] 0: tune to same source/transponder
                                                  

or


[h264 @ 0x91a1e00]number of reference frames exceeds max (probably corrupt input), discarding one
[h264 @ 0x91a1e00]number of reference frames exceeds max (probably corrupt input), discarding one
[h264 @ 0x91a1e00]number of reference frames exceeds max (probably corrupt input), discarding one
[h264 @ 0x91a1e00]number of reference frames exceeds max (probably corrupt input), discarding one
[h264 @ 0x91a1e00]number of reference frames exceeds max (probably corrupt input), discarding one
[h264 @ 0x91a1e00]mmco: unref short failure
20:45:54.0062 D [9037] [softdevice-audio]: Xrun (at least 12268,454 ms long)
[h264 @ 0x91a1e00]mmco: unref short failure
[XvVideoOut]: max area size 2048 x 2048
[XvVideoOut]: using area size 1952 x 1122
[h264 @ 0x91a1e00]mmco: unref short failure
#20:45:56.0335 D [9036] [VideoOut] video now synced (11 - 187)
XXXXXXXXXXXXXXXXXXXXXXXXXXXX20:46:03.0313 D [9037] [softdevice-audio]: Xrun (at least 9206,584 ms long)
X20:46:03.0516 D [9037] [softdevice-audio]: Xrun (at least 174,541 ms long)
X20:46:03.0716 D [9037] [softdevice-audio]: Xrun (at least 173,074 ms long)
X20:46:03.0921 D [9037] [softdevice-audio]: Xrun (at least 174,845 ms long)
XX20:46:04.0333 D [9037] [softdevice-audio]: Xrun (at least 372,885 ms long)
X20:46:04.0540 D [9037] [softdevice-audio]: Xrun (at least 166,081 ms long)
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX??? 16 20:46:19 [core.pids] 0: tune to same source/transponder






what's it ?


Goga


From stefan at lucke.in-berlin.de  Fri Oct 17 11:08:00 2008
From: stefan at lucke.in-berlin.de (Stefan Lucke)
Date: Fri, 17 Oct 2008 11:08:00 +0200
Subject: [Softdevice-devel] the running X letter in console
In-Reply-To: <20081016204644.2d80a7d8@bk.ru>
References: <20081016204644.2d80a7d8@bk.ru>
Message-ID: <1224234480.48f855f00bc19@webmail.in-berlin.de>

Quoting Goga777:

> Hi
>
> sometimes I can see in console the running X letter
>
> #20:45:56.0335 D [9036] [VideoOut] video now synced (11 - 187)
> XXXXXXXXXXXXXXXXXXXXXXXXXXXX20:46:03.0313 D [9037] [softdevice-audio]: Xrun (at least 9206,584 ms
> long)
> X20:46:03.0516 D [9037] [softdevice-audio]: Xrun (at least 174,541 ms long)
> X20:46:03.0716 D [9037] [softdevice-audio]: Xrun (at least 173,074 ms long)
> X20:46:03.0921 D [9037] [softdevice-audio]: Xrun (at least 174,845 ms long)

>
> what's it ?
>

The X chars symbolize dropped frames to keep sync (file video.c line 470).

Stefan Lucke


From admin at berlios.de  Sat Oct 18 11:45:10 2008
From: admin at berlios.de (admin at berlios.de)
Date: Sat, 18 Oct 2008 11:45:10 +0200 (CEST)
Subject: [Softdevice-devel] [Patch #2578] fix build with latest libavformat
Message-ID: <200810180945.m9I9jA8M020589@unicorn.berlios.de>

Patch #2578 has been updated. 

Project: softdevice
Category: None
Status: Open
Submitted by: aballier
Assigned to : none
Summary: fix build with latest libavformat

-------------------------------------------------------
For more info, visit:

http://developer.berlios.de/patch/?func=detailpatch&patch_id=2578&group_id=2051


From admin at berlios.de  Sat Oct 18 11:45:39 2008
From: admin at berlios.de (admin at berlios.de)
Date: Sat, 18 Oct 2008 11:45:39 +0200 (CEST)
Subject: [Softdevice-devel] [Patch #2578] fix build with latest libavformat
Message-ID: <200810180945.m9I9jd55020769@unicorn.berlios.de>

Patch #2578 has been updated. 

Project: softdevice
Category: None
Status: Open
Submitted by: aballier
Assigned to : none
Summary: fix build with latest libavformat

Follow-Ups:

Date: 2008-Oct-18 11:45
By: aballier

Comment:
it uses offset_t which was typedef'd to int64_t for years; now its gone, it
should be safe and backward compatible to directly use int64_t

-------------------------------------------------------

-------------------------------------------------------
For more info, visit:

http://developer.berlios.de/patch/?func=detailpatch&patch_id=2578&group_id=2051


From stefan at lucke.in-berlin.de  Sat Oct 25 12:27:17 2008
From: stefan at lucke.in-berlin.de (Stefan Lucke)
Date: Sat, 25 Oct 2008 12:27:17 +0200
Subject: [Softdevice-devel]
	=?utf-8?b?Rml4IGZvciBlcnJvciAiIOKAmG9mZnNldF90?=
	=?utf-8?q?=E2=80=99_has_not_been_declared=22_-_cvs_softdevice_and_?=
	=?utf-8?q?cvs_ffmpeg?=
In-Reply-To: <48F73C62.20303@jasonline.co.uk>
References: <48F73C62.20303@jasonline.co.uk>
Message-ID: <200810251227.17936.stefan@lucke.in-berlin.de>

On Thursday 16 October 2008, Jason Harvey wrote:
> Hi,
> 
> Using cvs softdevice and cvs ffmpeg I got an error "?offset_t? has not 
> been declared"
> 
> I googled and trawled the softdevice archive and don't think this has 
> been encountered/fixed anywhere yet...
> 
> A recent change in cvs ffmpeg removed a custom type "offset_t" and 
> replaced it with a standard int64_t.
> This broke softdevice compilation.
> The attached patch makes the necessary replacements in cvs softdevice 
> files to match and it all now works.
> 
> Apologies if I should email direct or cc someone, and if the patch is 
> broken, malformed or wrong please let me know I'll try not to get it 
> wrong next time.

Thats the right place for publishing patches.

Sometimes it takes a few days until they are picked up.

Thanks for your patch.
Commited to cvs.

-- 
Stefan Lucke


From goga777 at bk.ru  Thu Oct 30 13:59:52 2008
From: goga777 at bk.ru (Goga777)
Date: Thu, 30 Oct 2008 15:59:52 +0300
Subject: [Softdevice-devel] a lot of warnings with cvs softdevice version
	and ffmpeg from svn
Message-ID: <20081030155952.2e66f6b8@bk.ru>

Hi


I have a lot of warnings during of cvs softdevice compilation 
Is it ok ?   


Goga



make[1]: Leaving directory `/usr/src/vdr1_70/PLUGINS/src/sc'
Plugin softdevice:
make[1]: Entering directory `/usr/src/vdr1_70/PLUGINS/src/softdevice'
g++ -MM -MG -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   softdevice.c utils.c i18n.c video.c mpeg2decoder.c audio.c video-dummy.c setup-softdevice.c setup-softdevice-menu.c setup-softlog.c setup-softlog-menu.c sync-timer.c SoftOsd.c PicBuffer.c VideoFilter.c audio-alsa.c audio-ac3pt.c audio-oss.c > .dependencies
make[1]: Leaving directory `/usr/src/vdr1_70/PLUGINS/src/softdevice'
make[1]: Entering directory `/usr/src/vdr1_70/PLUGINS/src/softdevice'
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   softdevice.c
In file included from video.h:25,
                 from mpeg2decoder.h:30,
                 from softdevice.h:17,
                 from softdevice.c:8:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
softdevice.c: In constructor ?cSoftDevice::cSoftDevice(int, int, char*)?:
softdevice.c:188: warning: deprecated conversion from string constant to ?char*?
softdevice.c:194: warning: deprecated conversion from string constant to ?char*?
softdevice.c:209: warning: deprecated conversion from string constant to ?char*?
softdevice.c: In constructor ?cPluginSoftDevice::cPluginSoftDevice()?:
softdevice.c:819: warning: deprecated conversion from string constant to ?char*?
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   utils.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   i18n.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   video.c
In file included from video.h:25,
                 from video.c:16:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
video.c: In member function ?virtual void cVideoOut::EvaluateDelay(uint64_t, uint64_t, int)?:
video.c:558: warning: deprecated conversion from string constant to ?char*?
video.c:586: warning: deprecated conversion from string constant to ?char*?
video.c:595: warning: deprecated conversion from string constant to ?char*?
video.c:602: warning: deprecated conversion from string constant to ?char*?
video.c: In member function ?virtual void cVideoOut::ResetDelay()?:
video.c:619: warning: deprecated conversion from string constant to ?char*?
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   mpeg2decoder.c
In file included from video.h:25,
                 from mpeg2decoder.h:30,
                 from mpeg2decoder.c:14:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
mpeg2decoder.c: In member function ?void cMpeg2Decoder::Freeze(int, bool)?:
mpeg2decoder.c:1472: warning: suggest parentheses around comparison in operand of &
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   audio.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   video-dummy.c
In file included from video.h:25,
                 from video-dummy.h:11,
                 from video-dummy.c:12:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   setup-softdevice.c
setup-softdevice.c: In member function ?char* cSetupStore::getPPdeintValue()?:
setup-softdevice.c:410: warning: deprecated conversion from string constant to ?char*?
setup-softdevice.c:411: warning: deprecated conversion from string constant to ?char*?
setup-softdevice.c:412: warning: deprecated conversion from string constant to ?char*?
setup-softdevice.c:413: warning: deprecated conversion from string constant to ?char*?
setup-softdevice.c:414: warning: deprecated conversion from string constant to ?char*?
setup-softdevice.c: In member function ?char* cSetupStore::getPPValue()?:
setup-softdevice.c:423: warning: deprecated conversion from string constant to ?char*?
setup-softdevice.c:424: warning: deprecated conversion from string constant to ?char*?
setup-softdevice.c:425: warning: deprecated conversion from string constant to ?char*?
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   setup-softdevice-menu.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   setup-softlog.c
setup-softlog.c: In member function ?virtual int cSetupSoftlog::SetLogFile(const char*)?:
setup-softlog.c:162: warning: deprecated conversion from string constant to ?char*?
setup-softlog.c:189: warning: deprecated conversion from string constant to ?char*?
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   setup-softlog-menu.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   sync-timer.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   SoftOsd.c
In file included from video.h:25,
                 from SoftOsd.h:31,
                 from SoftOsd.c:12:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
SoftOsd.c: In member function ?void cSoftOsd::CopyToBitmap(uint8_t*, uint8_t*, uint8_t*, uint8_t*, uint8_t*, int, int, int, int, bool)?:
SoftOsd.c:980: warning: suggest parentheses around comparison in operand of &
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   PicBuffer.c
In file included from PicBuffer.c:14:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
PicBuffer.c: In function ?void CopyScalePicBuf(sPicBuffer*, sPicBuffer*, int, int, int, int, int, int, int, int, int, int, int, int)?:
PicBuffer.c:825: warning: suggest parentheses around + or - in operand of &
PicBuffer.c: In function ?void CopyScalePicBufAlphaBlend(sPicBuffer*, sPicBuffer*, int, int, int, int, int, int, int, int, uint8_t*, uint8_t*, uint8_t*, uint8_t*, uint8_t*, int, int, int, int, int)?:
PicBuffer.c:974: warning: suggest parentheses around + or - in operand of &
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   VideoFilter.c
In file included from video.h:25,
                 from VideoFilter.h:28,
                 from VideoFilter.c:8:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   audio-alsa.c
audio-alsa.c: In member function ?void cAlsaAudioOut::Xrun()?:
audio-alsa.c:269: warning: deprecated conversion from string constant to ?char*?
audio-alsa.c: In member function ?virtual int cAlsaAudioOut::SetParams(SampleContext&)?:
audio-alsa.c:439: warning: ?int snd_pcm_sw_params_get_xfer_align(const snd_pcm_sw_params_t*, snd_pcm_uframes_t*)? is deprecated (declared at /usr/include/alsa/pcm.h:1105)
audio-alsa.c:439: warning: ?int snd_pcm_sw_params_get_xfer_align(const snd_pcm_sw_params_t*, snd_pcm_uframes_t*)? is deprecated (declared at /usr/include/alsa/pcm.h:1105)
audio-alsa.c: In member function ?virtual void cAlsaAudioOut::SetVolume(int)?:
audio-alsa.c:466: warning: deprecated conversion from string constant to ?char*?
audio-alsa.c:467: warning: deprecated conversion from string constant to ?char*?
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   audio-ac3pt.c
audio-ac3pt.c: In member function ?unsigned int cAlsaAC3pt::SpdifInitAC3(snd_pcm_t**, char*, bool)?:
audio-ac3pt.c:670: warning: ?int snd_pcm_sw_params_set_xfer_align(snd_pcm_t*, snd_pcm_sw_params_t*, snd_pcm_uframes_t)? is deprecated (declared at /usr/include/alsa/pcm.h:1104)
audio-ac3pt.c:670: warning: ?int snd_pcm_sw_params_set_xfer_align(snd_pcm_t*, snd_pcm_sw_params_t*, snd_pcm_uframes_t)? is deprecated (declared at /usr/include/alsa/pcm.h:1104)
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   audio-oss.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -shared softdevice.o utils.o i18n.o video.o mpeg2decoder.o audio.o video-dummy.o setup-softdevice.o setup-softdevice-menu.o setup-softlog.o setup-softlog-menu.o sync-timer.o SoftOsd.o PicBuffer.o VideoFilter.o audio-alsa.o audio-ac3pt.o audio-oss.o -L/usr/local/lib -lavformat -lavcodec -lpostproc   -lasound -o libvdr-softdevice.so
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   video-fb.c
In file included from video.h:25,
                 from video-fb.h:11,
                 from video-fb.c:17:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -shared utils.o video.o video-fb.o PicBuffer.o  -o libsoftdevice-fb.so
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   video-xv.c
In file included from video.h:25,
                 from video-xv.h:20,
                 from video-xv.c:27:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
video-xv.c: In member function ?void cXvPortAttributeStore::CheckVideoParmChange()?:
video-xv.c:310: warning: deprecated conversion from string constant to ?char*?
video-xv.c:316: warning: deprecated conversion from string constant to ?char*?
video-xv.c:322: warning: deprecated conversion from string constant to ?char*?
video-xv.c:328: warning: deprecated conversion from string constant to ?char*?
video-xv.c: In member function ?virtual void cXvVideoOut::ProcessEvents()?:
video-xv.c:638: warning: deprecated conversion from string constant to ?char*?
video-xv.c:642: warning: deprecated conversion from string constant to ?char*?
video-xv.c:646: warning: deprecated conversion from string constant to ?char*?
video-xv.c:650: warning: deprecated conversion from string constant to ?char*?
video-xv.c:654: warning: deprecated conversion from string constant to ?char*?
video-xv.c:658: warning: deprecated conversion from string constant to ?char*?
video-xv.c:662: warning: deprecated conversion from string constant to ?char*?
video-xv.c:666: warning: deprecated conversion from string constant to ?char*?
video-xv.c:670: warning: deprecated conversion from string constant to ?char*?
video-xv.c:674: warning: deprecated conversion from string constant to ?char*?
video-xv.c:678: warning: deprecated conversion from string constant to ?char*?
video-xv.c:682: warning: deprecated conversion from string constant to ?char*?
video-xv.c:686: warning: deprecated conversion from string constant to ?char*?
video-xv.c:690: warning: deprecated conversion from string constant to ?char*?
video-xv.c: In constructor ?cXvVideoOut::cXvVideoOut(cSetupStore*, cSetupSoftlog*)?:
video-xv.c:781: warning: deprecated conversion from string constant to ?char*?
video-xv.c:782: warning: deprecated conversion from string constant to ?char*?
video-xv.c: In member function ?virtual bool cXvVideoOut::Reconfigure(int, int, int)?:
video-xv.c:1258: warning: deprecated conversion from string constant to ?char*?
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   xscreensaver.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -shared utils.o video.o video-xv.o xscreensaver.o PicBuffer.o -L/usr/X11R6/lib -lXext -lX11 -lm -lXv -lXinerama -o libsoftdevice-xv.so
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   video-shm.c
In file included from video.h:25,
                 from video-shm.h:15,
                 from video-shm.c:12:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -shared utils.o video.o video-shm.o PicBuffer.o  -o libsoftdevice-shm.so
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -DSTAND_ALONE -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   video.c -o video_shm.o
In file included from video.h:25,
                 from video.c:16:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
video.c: In member function ?virtual void cVideoOut::EvaluateDelay(uint64_t, uint64_t, int)?:
video.c:558: warning: deprecated conversion from string constant to ?char*?
video.c:586: warning: deprecated conversion from string constant to ?char*?
video.c:595: warning: deprecated conversion from string constant to ?char*?
video.c:602: warning: deprecated conversion from string constant to ?char*?
video.c: In member function ?virtual void cVideoOut::ResetDelay()?:
video.c:619: warning: deprecated conversion from string constant to ?char*?
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -DSTAND_ALONE -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   video-xv.c -o video-xv_shm.o
In file included from video.h:25,
                 from video-xv.h:20,
                 from video-xv.c:27:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
video-xv.c: In member function ?void cXvPortAttributeStore::CheckVideoParmChange()?:
video-xv.c:310: warning: deprecated conversion from string constant to ?char*?
video-xv.c:316: warning: deprecated conversion from string constant to ?char*?
video-xv.c:322: warning: deprecated conversion from string constant to ?char*?
video-xv.c:328: warning: deprecated conversion from string constant to ?char*?
video-xv.c: In member function ?virtual void cXvVideoOut::ProcessEvents()?:
video-xv.c:638: warning: deprecated conversion from string constant to ?char*?
video-xv.c:642: warning: deprecated conversion from string constant to ?char*?
video-xv.c:646: warning: deprecated conversion from string constant to ?char*?
video-xv.c:650: warning: deprecated conversion from string constant to ?char*?
video-xv.c:654: warning: deprecated conversion from string constant to ?char*?
video-xv.c:658: warning: deprecated conversion from string constant to ?char*?
video-xv.c:662: warning: deprecated conversion from string constant to ?char*?
video-xv.c:666: warning: deprecated conversion from string constant to ?char*?
video-xv.c:670: warning: deprecated conversion from string constant to ?char*?
video-xv.c:674: warning: deprecated conversion from string constant to ?char*?
video-xv.c:678: warning: deprecated conversion from string constant to ?char*?
video-xv.c:682: warning: deprecated conversion from string constant to ?char*?
video-xv.c:686: warning: deprecated conversion from string constant to ?char*?
video-xv.c:690: warning: deprecated conversion from string constant to ?char*?
video-xv.c: In constructor ?cXvVideoOut::cXvVideoOut(cSetupStore*, cSetupSoftlog*)?:
video-xv.c:781: warning: deprecated conversion from string constant to ?char*?
video-xv.c:782: warning: deprecated conversion from string constant to ?char*?
video-xv.c: In member function ?virtual bool cXvVideoOut::Reconfigure(int, int, int)?:
video-xv.c:1258: warning: deprecated conversion from string constant to ?char*?
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -DSTAND_ALONE -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   setup-softdevice.c -o setup-softdevice_shm.o
setup-softdevice.c: In member function ?char* cSetupStore::getPPdeintValue()?:
setup-softdevice.c:410: warning: deprecated conversion from string constant to ?char*?
setup-softdevice.c:411: warning: deprecated conversion from string constant to ?char*?
setup-softdevice.c:412: warning: deprecated conversion from string constant to ?char*?
setup-softdevice.c:413: warning: deprecated conversion from string constant to ?char*?
setup-softdevice.c:414: warning: deprecated conversion from string constant to ?char*?
setup-softdevice.c: In member function ?char* cSetupStore::getPPValue()?:
setup-softdevice.c:423: warning: deprecated conversion from string constant to ?char*?
setup-softdevice.c:424: warning: deprecated conversion from string constant to ?char*?
setup-softdevice.c:425: warning: deprecated conversion from string constant to ?char*?
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -DSTAND_ALONE -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   setup-softlog.c -o setup-softlog_shm.o
setup-softlog.c: In member function ?virtual int cSetupSoftlog::SetLogFile(const char*)?:
setup-softlog.c:162: warning: deprecated conversion from string constant to ?char*?
setup-softlog.c:189: warning: deprecated conversion from string constant to ?char*?
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -DSTAND_ALONE -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   xscreensaver.c -o xscreensaver_shm.o
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -DSTAND_ALONE -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   utils.c -o utils_shm.o
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -DSTAND_ALONE -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   VdrReplacements.c -o VdrReplacements_shm.o
VdrReplacements.c: In member function ?void cThread::Cancel(int)?:
VdrReplacements.c:80: warning: format ?%d? expects type ?int?, but argument 3 has type ?pthread_t?
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -DSTAND_ALONE -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   ShmClient.c -o ShmClient_shm.o
In file included from video.h:25,
                 from video-xv.h:20,
                 from ShmClient.c:17:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -DSTAND_ALONE -I../../../include -I../../../../DVB/include -I/usr/local/include -I/usr/local/include/postproc   PicBuffer.c -o PicBuffer_shm.o
In file included from PicBuffer.c:14:
PicBuffer.h:60: warning: ?typedef? was ignored in this declaration
PicBuffer.c: In function ?void CopyScalePicBuf(sPicBuffer*, sPicBuffer*, int, int, int, int, int, int, int, int, int, int, int, int)?:
PicBuffer.c:825: warning: suggest parentheses around + or - in operand of &
PicBuffer.c: In function ?void CopyScalePicBufAlphaBlend(sPicBuffer*, sPicBuffer*, int, int, int, int, int, int, int, int, uint8_t*, uint8_t*, uint8_t*, uint8_t*, uint8_t*, int, int, int, int, int)?:
PicBuffer.c:974: warning: suggest parentheses around + or - in operand of &
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -L/usr/X11R6/lib -lXext -lX11 -lm -lXv -lXinerama  video_shm.o video-xv_shm.o setup-softdevice_shm.o setup-softlog_shm.o xscreensaver_shm.o utils_shm.o VdrReplacements_shm.o ShmClient_shm.o PicBuffer_shm.o -lpthread -o ShmClient
xgettext -C -cTRANSLATORS --no-wrap --no-location -k -ktr -ktrNOOP --msgid-bugs-address='<softdevice-devel at lists.berlios.de>' -o po/softdevice.pot audio-ac3pt.c audio-alsa.c audio.c audio-macos.c audio-oss.c i18n.c MacVdrClient.c mpeg2decoder.c PicBuffer.c setup-softdevice.c setup-softdevice-menu.c setup-softlog.c setup-softlog-menu.c ShmClient.c softdevice.c SoftOsd.c sync-timer.c utils.c VdrReplacements.c video.c video-dfb.c video-dummy.c video-fb.c VideoFilter.c video-quartz.c video-shm.c video-vidix.c video-xv.c xscreensaver.c
msgmerge -U --no-wrap --no-location --backup=none -q po/ca_ES.po po/softdevice.pot
msgfmt -c -o po/ca_ES.mo po/ca_ES.po
cp po/ca_ES.mo ../../../locale/ca_ES/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/cs_CZ.po po/softdevice.pot
msgfmt -c -o po/cs_CZ.mo po/cs_CZ.po
cp po/cs_CZ.mo ../../../locale/cs_CZ/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/da_DK.po po/softdevice.pot
msgfmt -c -o po/da_DK.mo po/da_DK.po
cp po/da_DK.mo ../../../locale/da_DK/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/de_DE.po po/softdevice.pot
msgfmt -c -o po/de_DE.mo po/de_DE.po
cp po/de_DE.mo ../../../locale/de_DE/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/el_GR.po po/softdevice.pot
msgfmt -c -o po/el_GR.mo po/el_GR.po
cp po/el_GR.mo ../../../locale/el_GR/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/es_ES.po po/softdevice.pot
msgfmt -c -o po/es_ES.mo po/es_ES.po
cp po/es_ES.mo ../../../locale/es_ES/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/et_EE.po po/softdevice.pot
msgfmt -c -o po/et_EE.mo po/et_EE.po
cp po/et_EE.mo ../../../locale/et_EE/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/fi_FI.po po/softdevice.pot
msgfmt -c -o po/fi_FI.mo po/fi_FI.po
cp po/fi_FI.mo ../../../locale/fi_FI/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/fr_FR.po po/softdevice.pot
msgfmt -c -o po/fr_FR.mo po/fr_FR.po
cp po/fr_FR.mo ../../../locale/fr_FR/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/hr_HR.po po/softdevice.pot
msgfmt -c -o po/hr_HR.mo po/hr_HR.po
cp po/hr_HR.mo ../../../locale/hr_HR/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/hu_HU.po po/softdevice.pot
msgfmt -c -o po/hu_HU.mo po/hu_HU.po
cp po/hu_HU.mo ../../../locale/hu_HU/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/it_IT.po po/softdevice.pot
msgfmt -c -o po/it_IT.mo po/it_IT.po
cp po/it_IT.mo ../../../locale/it_IT/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/nl_NL.po po/softdevice.pot
msgfmt -c -o po/nl_NL.mo po/nl_NL.po
cp po/nl_NL.mo ../../../locale/nl_NL/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/nn_NO.po po/softdevice.pot
msgfmt -c -o po/nn_NO.mo po/nn_NO.po
cp po/nn_NO.mo ../../../locale/nn_NO/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/pl_PL.po po/softdevice.pot
msgfmt -c -o po/pl_PL.mo po/pl_PL.po
cp po/pl_PL.mo ../../../locale/pl_PL/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/pt_PT.po po/softdevice.pot
msgfmt -c -o po/pt_PT.mo po/pt_PT.po
cp po/pt_PT.mo ../../../locale/pt_PT/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/ro_RO.po po/softdevice.pot
msgfmt -c -o po/ro_RO.mo po/ro_RO.po
cp po/ro_RO.mo ../../../locale/ro_RO/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/ru_RU.po po/softdevice.pot
msgfmt -c -o po/ru_RU.mo po/ru_RU.po
cp po/ru_RU.mo ../../../locale/ru_RU/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/sl_SI.po po/softdevice.pot
msgfmt -c -o po/sl_SI.mo po/sl_SI.po
cp po/sl_SI.mo ../../../locale/sl_SI/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/sv_SE.po po/softdevice.pot
msgfmt -c -o po/sv_SE.mo po/sv_SE.po
cp po/sv_SE.mo ../../../locale/sv_SE/LC_MESSAGES/vdr-softdevice.mo
msgmerge -U --no-wrap --no-location --backup=none -q po/tr_TR.po po/softdevice.pot
msgfmt -c -o po/tr_TR.mo po/tr_TR.po
cp po/tr_TR.mo ../../../locale/tr_TR/LC_MESSAGES/vdr-softdevice.mo
make[1]: Leaving directory `/usr/src/vdr1_70/PLUGINS/src/softdevice'


config.log 


Parameters ''
PKG_CONFIG_PATH '/usr/local/lib/pkgconfig'
Testing system and cpu type.----------------------------
uname -a: Linux goga 2.6.27.1-custom-default1 #1 SMP Sun Oct 19 16:02:32 MSD 2008 i686 GNU/Linux
g++ -dumpmache: i486-linux-gnu
Checking for pkg-config.-------------------------------
0.22
Checking for ffmpeg.------------------------------------
try to use pkg-config.
-L/usr/local/lib -lpostproc
Checking for ffmpeg/libswscale.------------------------------------
Package 'libswscale' requires 'libavcodec = 52.0.0' but version of libavcodec is 52.1.0
Package 'libswscale' requires 'libavcodec = 52.0.0' but version of libavcodec is 52.1.0
Checking for pp_postprocess 1st arg. -----
Checking ffmpeg for member of AVCodecContext: error_recognition ----
Checking for ALSA sound.------------------
Checking for OSS sound.------------------
Checking for linux framebuffer.------------------
Checking for yaepg patch.------------------
g++ -O2 -g -Wall  -D_GNU_SOURCE -I../../.. -c -o /tmp/softdevice-conf-3661-3488-6117 /tmp/softdevice-conf-4054-3488-24986.c
/tmp/softdevice-conf-4054-3488-24986.c: In function ?int test_func(cOsd*)?:
/tmp/softdevice-conf-4054-3488-24986.c:3: error: ?class cOsd? has no member named ?vidWin?
make: *** [/tmp/softdevice-conf-3661-3488-6117] ?????? 1
Checking for DirectFB and DFB++.------------------
Package dfb++ was not found in the pkg-config search path.
Perhaps you should add the directory containing `dfb++.pc'
to the PKG_CONFIG_PATH environment variable
No package 'dfb++' found
Checking for vidix.------------------------
/tmp/softdevice-conf-4054-3488-24986.c:2:22: error: vidixlib.h: ??? ?????? ????? ??? ????????
/tmp/softdevice-conf-4054-3488-24986.c: In function ?int main()?:
/tmp/softdevice-conf-4054-3488-24986.c:4: error: ?vidix_capability_t? was not declared in this scope
/tmp/softdevice-conf-4054-3488-24986.c:4: error: expected `;' before ?vidix_cap?
Checking for Xv.-----------------------------
Checking for Xinerama.-----------------------------







From goga777 at bk.ru  Thu Oct 30 15:29:53 2008
From: goga777 at bk.ru (Goga777)
Date: Thu, 30 Oct 2008 17:29:53 +0300
Subject: [Softdevice-devel] a lot of warnings with cvs softdevice
 version and ffmpeg from svn
In-Reply-To: <20081030155952.2e66f6b8@bk.ru>
References: <20081030155952.2e66f6b8@bk.ru>
Message-ID: <20081030172953.7c821121@bk.ru>

and after that I can't start vdr with softdevice 

Oct 30 17:26:12 localhost vdr: [18047] VDR version 1.7.0 started
Oct 30 17:26:12 localhost vdr: [18047] codeset is 'UTF-8' - known
Oct 30 17:26:12 localhost vdr: [18047] found 23 locales in ./locale
Oct 30 17:26:12 localhost vdr: [18047] loading plugin: ./PLUGINS/lib/libvdr-softdevice.so.1.7.0
Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/setup.conf
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: CustomMainMenuTitle = Video Disk Recorder
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: DisableVPS = 0
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: DoubleEpgAction = 0
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: DoubleEpgTimeDelta = 15
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: JumpPlay = 0
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: JumpSeconds = 60
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: JumpSecondsSlow = 10
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: MainMenuTitle = 0
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: MenuCmdPosition = 0
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: MixEpgAction = 0
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: PauseLastMark = 0
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: PlayJump = 0
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: ReloadMarks = 0
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: ShowProgressBar = 0
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: ShowRecDate = 1
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: ShowRecLength = 0
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: ShowRecTime = 1
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: ShowTimerStop = 1
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: UseDolbyInRecordings = 1
Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: WarEagleIcons = 1
Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/sources.conf
Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/diseqc.conf
Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/channels.conf
Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/timers.conf
Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/svdrphosts.conf
Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/remote.conf
Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/keymacros.conf
Oct 30 17:26:12 localhost vdr: [18049] video directory scanner thread started (pid=18047, tid=18049)
Oct 30 17:26:12 localhost vdr: [18048] video directory scanner thread started (pid=18047, tid=18048)
Oct 30 17:26:12 localhost vdr: [18049] video directory scanner thread ended (pid=18047, tid=18049)
Oct 30 17:26:12 localhost vdr: [18047] reading EPG data from /video/epg.data
Oct 30 17:26:12 localhost vdr: [18048] video directory scanner thread ended (pid=18047, tid=18048)
Oct 30 17:26:12 localhost vdr: [18047] probing /dev/dvb/adapter0/frontend0
Oct 30 17:26:12 localhost vdr: [18047] device 1 provides: DVBS DVBS2
Oct 30 17:26:12 localhost vdr: [18047] device 1 forced to frontendType SYS_DVBS2
Oct 30 17:26:12 localhost vdr: [18051] tuner on device 1 thread started (pid=18047, tid=18051)
Oct 30 17:26:12 localhost vdr: [18052] section handler thread started (pid=18047, tid=18052)


ct 30 17:26:12 localhost vdr: [18047] found 1 video device
Oct 30 17:26:12 localhost vdr: [18047] initializing plugin: softdevice (0.5.0): A software emulated MPEG2 device
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: patch version (2007-12-25)
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: Initialize XShmCreateImage Successful (0xb5c458b0)
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: Initialize shmget Successful (2949120 bytes)
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: Initialize shmat Successful
Oct 30 17:26:12 localhost vdr: [18047] [softdevice-xscreensaver]: xscreensaver not running
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: initialized OK
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: ATI Radeon Video Overlay: available ports 73 - 73
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: grabbed port 73
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: max area size 2048 x 2048
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: using area size 736 x 576
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_DEVICE_ID                  XvGettable NOT-XvSettable (       0 [0x
00000000] -       -1 [0xffffffff]) (     567 [0x00000237]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_LOCATION_ID                XvGettable NOT-XvSettable (       0 [0x
00000000] -       -1 [0xffffffff]) (     568 [0x00000238]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_INSTANCE_ID                XvGettable NOT-XvSettable (       0 [0x
00000000] -       -1 [0xffffffff]) (     569 [0x00000239]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_DUMP_STATUS            NOT-XvGettable     XvSettable (       0 [0x
00000000] -        1 [0x00000001]) (       0 [0x00000000]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_SET_DEFAULTS           NOT-XvGettable     XvSettable (       0 [0x
00000000] -        1 [0x00000001]) (       0 [0x00000000]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_AUTOPAINT_COLORKEY         XvGettable     XvSettable (       0 [0x
00000000] -        1 [0x00000001]) (       0 [0x00000000]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_COLORKEY                   XvGettable     XvSettable (       0 [0x
00000000] -       -1 [0xffffffff]) ( 1707776 [0x001a0f00]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_DOUBLE_BUFFER              XvGettable     XvSettable (       0 [0x
00000000] -        1 [0x00000001]) (       1 [0x00000001]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_OVERLAY_ALPHA              XvGettable     XvSettable (       0 [0x
00000000] -      255 [0x000000ff]) (     255 [0x000000ff]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_GRAPHICS_ALPHA             XvGettable     XvSettable (       0 [0x
00000000] -      255 [0x000000ff]) (     255 [0x000000ff]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_ALPHA_MODE                 XvGettable     XvSettable (       0 [0x
00000000] -        1 [0x00000001]) (       0 [0x00000000]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_BRIGHTNESS                 XvGettable     XvSettable (   -1000 [0x
fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_CONTRAST                   XvGettable     XvSettable (   -1000 [0x
fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_SATURATION                 XvGettable     XvSettable (   -1000 [0x
fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_COLOR                      XvGettable     XvSettable (   -1000 [0x
fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_HUE                        XvGettable     XvSettable (   -1000 [0x
fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]

Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_RED_INTENSITY              XvGettable     XvSettable (   -1000 [0x
fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_GREEN_INTENSITY            XvGettable     XvSettable (   -1000 [0x
fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_BLUE_INTENSITY             XvGettable     XvSettable (   -1000 [0x
fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_CRTC                       XvGettable     XvSettable (      -1 [0x
ffffffff] -        1 [0x00000001]) (      -1 [0xffffffff]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_GAMMA                      XvGettable     XvSettable (     100 [0x
00000064] -    10000 [0x00002710]) (    1000 [0x000003e8]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_COLORSPACE                 XvGettable     XvSettable (       0 [0x
00000000] -        1 [0x00000001]) (       0 [0x00000000]
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: using color key 0x1a0f00
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: XvShmCreateImage Successful (0xb5c3acb0)
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: shmget Successful (0 bytes)
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: shmat Successful
Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: XShmAttach    rc = 1 (should be OK)
Oct 30 17:26:12 localhost vdr: [18047] [softdevice] videoOut OK !
Oct 30 17:26:12 localhost vdr: [18047] [softdevice-audio] Opening alsa device default
Oct 30 17:26:12 localhost vdr: [18047] [softdevice-audio] Using alsa AC3 device hw:0,1
Oct 30 17:26:12 localhost vdr: [18047] [softdevice-audio] Device opened! Ready to play
Oct 30 17:26:12 localhost vdr: [18047] setting primary device to 2
Oct 30 17:26:12 localhost vdr: [18047] assuming manual start of VDR
Oct 30 17:26:12 localhost vdr: [18047] SVDRP listening on port 2001
Oct 30 17:26:12 localhost vdr: [18047] setting current skin to "sttng"
Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/themes/sttng-default.theme
Oct 30 17:26:12 localhost vdr: [18047] starting plugin: softdevice
Oct 30 17:26:12 localhost vdr: [18047] plugin 'softdevice' called obsolete function RegisterI18n()
Oct 30 17:26:12 localhost vdr: [18054] KBD remote control thread started (pid=18047, tid=18054)
Oct 30 17:26:12 localhost vdr: [18047] remote control softdevice-xv - keys known
Oct 30 17:26:12 localhost vdr: [18047] remote control KBD - keys known
Oct 30 17:26:12 localhost vdr: [18047] switching to channel 1
Oct 30 17:26:12 localhost vdr: [18057] receiver on device 1 thread started (pid=18047, tid=18057)
Oct 30 17:26:12 localhost vdr: [18058] TS buffer on device 1 thread started (pid=18047, tid=18058)
Oct 30 17:26:12 localhost vdr: [18056] transfer thread started (pid=18047, tid=18056)
Oct 30 17:26:12 localhost vdr: [18053] [VideoOut]: 736x576 [0,0 736x576] -> 768x576 [0,6 768x563]
Oct 30 17:26:13 localhost vdr: [18056] cVideoRepacker: switching to MPEG1/2 mode
Oct 30 17:26:13 localhost vdr: [18056] cVideoRepacker: operating in MPEG1/2 mode
Oct 30 17:26:13 localhost kernel: [19192.761934] vdr[18059]: segfault at 0 ip b7a1a1e2 sp b2a5c130 error 4 in libavformat.so
.52.23.1[b79f9000+ba000]


From goga777 at bk.ru  Thu Oct 30 18:04:44 2008
From: goga777 at bk.ru (Goga777)
Date: Thu, 30 Oct 2008 20:04:44 +0300
Subject: [Softdevice-devel] a lot of warnings with cvs softdevice
 version and ffmpeg from svn
In-Reply-To: <20081030172953.7c821121@bk.ru>
References: <20081030155952.2e66f6b8@bk.ru>
	<20081030172953.7c821121@bk.ru>
Message-ID: <20081030200444.26184f7e@bk.ru>

30 17:26:13 localhost vdr: [18056] cVideoRepacker: switching to MPEG1/2 mode
> Oct 30 17:26:13 localhost vdr: [18056] cVideoRepacker: operating in MPEG1/2 mode
> Oct 30 17:26:13 localhost kernel: [19192.761934] vdr[18059]: segfault at 0 ip b7a1a1e2 sp b2a5c130 error 4 in
> libavformat.so .52.23.1[b79f9000+ba000]


seems to me - need to run vdr with gdb 

could someone give detail instruction how can I do it for that command line
./vdr -c /etc/vdr -P "softdevice -vo xv:"

Goga




From stefan at lucke.in-berlin.de  Thu Oct 30 19:49:15 2008
From: stefan at lucke.in-berlin.de (Stefan Lucke)
Date: Thu, 30 Oct 2008 19:49:15 +0100
Subject: [Softdevice-devel] a lot of warnings with cvs softdevice
	version and ffmpeg from svn
In-Reply-To: <20081030200444.26184f7e@bk.ru>
References: <20081030155952.2e66f6b8@bk.ru> <20081030172953.7c821121@bk.ru>
	<20081030200444.26184f7e@bk.ru>
Message-ID: <1225392555.490a01ab07992@webmail.in-berlin.de>

Quoting Goga777:

> 30 17:26:13 localhost vdr: [18056] cVideoRepacker: switching to MPEG1/2 mode
> > Oct 30 17:26:13 localhost vdr: [18056] cVideoRepacker: operating in MPEG1/2 mode
> > Oct 30 17:26:13 localhost kernel: [19192.761934] vdr[18059]: segfault at 0 ip b7a1a1e2 sp
> b2a5c130 error 4 in
> > libavformat.so .52.23.1[b79f9000+ba000]
>
>
> seems to me - need to run vdr with gdb
>
> could someone give detail instruction how can I do it for that command line
> ./vdr -c /etc/vdr -P "softdevice -vo xv:"

gdb ./vdr

(gdb) set args -P "softdevice -vo xv:" -P extrecmenu ....
(gdb) run

(gdb) bt full

Stefan Lucke


From goga777 at bk.ru  Thu Oct 30 22:08:49 2008
From: goga777 at bk.ru (Goga777)
Date: Fri, 31 Oct 2008 00:08:49 +0300
Subject: [Softdevice-devel] a lot of warnings with cvs softdevice
 version and ffmpeg from svn
In-Reply-To: <1225392555.490a01ab07992@webmail.in-berlin.de>
References: <20081030155952.2e66f6b8@bk.ru> <20081030172953.7c821121@bk.ru>
	<20081030200444.26184f7e@bk.ru>
	<1225392555.490a01ab07992@webmail.in-berlin.de>
Message-ID: <20081031000849.150f1f97@bk.ru>

> > 30 17:26:13 localhost vdr: [18056] cVideoRepacker: switching to MPEG1/2 mode
> > > Oct 30 17:26:13 localhost vdr: [18056] cVideoRepacker: operating in MPEG1/2 mode
> > > Oct 30 17:26:13 localhost kernel: [19192.761934] vdr[18059]: segfault at 0 ip b7a1a1e2 sp
> > b2a5c130 error 4 in
> > > libavformat.so .52.23.1[b79f9000+ba000]
> >
> >
> > seems to me - need to run vdr with gdb
> >
> > could someone give detail instruction how can I do it for that command line
> > ./vdr -c /etc/vdr -P "softdevice -vo xv:"
> 
> gdb ./vdr
> 
> (gdb) set args -P "softdevice -vo xv:" -P extrecmenu ....
> (gdb) run
> 
> (gdb) bt full

goga at goga:/usr/src/vdr1_70$ gdb ./vdr
GNU gdb 6.8-debian
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i486-linux-gnu"...
(gdb)  set args -P "softdevice -vo xv:"
(gdb) run
Starting program: /usr/src/vdr1_70/vdr -P "softdevice -vo xv:"
[Thread debugging using libthread_db enabled]

[4]+  Stopped                 gdb ./vdr
goga at goga:/usr/src/vdr1_70$ 


I don't know why I have [4]+  Stopped                 gdb ./vdr


Goga


From stefan at lucke.in-berlin.de  Thu Oct 30 22:34:20 2008
From: stefan at lucke.in-berlin.de (Stefan Lucke)
Date: Thu, 30 Oct 2008 22:34:20 +0100
Subject: [Softdevice-devel] a lot of warnings with cvs softdevice
	version and ffmpeg from svn
In-Reply-To: <20081031000849.150f1f97@bk.ru>
References: <20081030155952.2e66f6b8@bk.ru> <20081030172953.7c821121@bk.ru>
	<20081030200444.26184f7e@bk.ru>
	<1225392555.490a01ab07992@webmail.in-berlin.de>
	<20081031000849.150f1f97@bk.ru>
Message-ID: <1225402460.490a285c603e3@webmail.in-berlin.de>

Quoting Goga777 <goga777 at bk.ru>:

> > > 30 17:26:13 localhost vdr: [18056] cVideoRepacker: switching to MPEG1/2 mode
> > > > Oct 30 17:26:13 localhost vdr: [18056] cVideoRepacker: operating in MPEG1/2 mode
> > > > Oct 30 17:26:13 localhost kernel: [19192.761934] vdr[18059]: segfault at 0 ip b7a1a1e2 sp
> > > b2a5c130 error 4 in
> > > > libavformat.so .52.23.1[b79f9000+ba000]
> > >
> > >
> > > seems to me - need to run vdr with gdb
> > >
> > > could someone give detail instruction how can I do it for that command line
> > > ./vdr -c /etc/vdr -P "softdevice -vo xv:"
> >
> > gdb ./vdr
> >
> > (gdb) set args -P "softdevice -vo xv:" -P extrecmenu ....
> > (gdb) run
> >
> > (gdb) bt full
>
> goga at goga:/usr/src/vdr1_70$ gdb ./vdr
> GNU gdb 6.8-debian
> Copyright (C) 2008 Free Software Foundation, Inc.
> License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
> This is free software: you are free to change and redistribute it.
> There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
> and "show warranty" for details.
> This GDB was configured as "i486-linux-gnu"...
> (gdb)  set args -P "softdevice -vo xv:"

All arguments should be specified here, symbolized by "....".

From goga777 at bk.ru  Fri Oct 31 09:11:32 2008
From: goga777 at bk.ru (Goga777)
Date: Fri, 31 Oct 2008 11:11:32 +0300
Subject: [Softdevice-devel] a lot of warnings with cvs softdevice
 version and ffmpeg from svn
In-Reply-To: <1225402460.490a285c603e3@webmail.in-berlin.de>
References: <20081030155952.2e66f6b8@bk.ru> <20081030172953.7c821121@bk.ru>
	<20081030200444.26184f7e@bk.ru>
	<1225392555.490a01ab07992@webmail.in-berlin.de>
	<20081031000849.150f1f97@bk.ru>
	<1225402460.490a285c603e3@webmail.in-berlin.de>
Message-ID: <20081031111132.53b92bc3@bk.ru>

> > goga at goga:/usr/src/vdr1_70$ gdb ./vdr
> > GNU gdb 6.8-debian
> > Copyright (C) 2008 Free Software Foundation, Inc.
> > License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
> > This is free software: you are free to change and redistribute it.
> > There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
> > and "show warranty" for details.
> > This GDB was configured as "i486-linux-gnu"...
> > (gdb)  set args -P "softdevice -vo xv:"
> 
> All arguments should be specified here, symbolized by "....".
> From your example above, "-c /etc/vdr" should appear too, I guess.

goga at goga:/usr/src/vdr1_70$ gdb ./vdr
GNU gdb 6.8-debian
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i486-linux-gnu"...
(gdb) set args -c /etc/vdr -P "softdevice -vo xv:"
(gdb) run
Starting program: /usr/src/vdr1_70/vdr -c /etc/vdr -P "softdevice -vo xv:"
[Thread debugging using libthread_db enabled]

[1]+  Stopped                 gdb ./vdr
goga at goga:/usr/src/vdr1_70$ gdb ./vdr

> 
> 
> > (gdb) run
> > Starting program: /usr/src/vdr1_70/vdr -P "softdevice -vo xv:"
> > [Thread debugging using libthread_db enabled]
> >
> > [4]+  Stopped                 gdb ./vdr
> > goga at goga:/usr/src/vdr1_70$
> 
> Stopped messages are usually caused by pressing CONTROL-Z.

yes, but I didn't press any control-z  :(

> > I don't know why I have [4]+  Stopped                 gdb ./vdr
> 
> Command "fg" brings suspended (stopped) processes back to foreground
> of controlling terminal.
> 
> If you want to detach a suspended (stopped) process, command "bg"
> background can be used to append and "&" to previous issued command.

goga at goga:/usr/src/vdr1_70$ gdb ./vdr
GNU gdb 6.8-debian
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i486-linux-gnu"...
(gdb) set args -c /etc/vdr -P "softdevice -vo xv:"
(gdb) run
Starting program: /usr/src/vdr1_70/vdr -c /etc/vdr -P "softdevice -vo xv:"
[Thread debugging using libthread_db enabled]

[1]+  Stopped                 gdb ./vdr
goga at goga:/usr/src/vdr1_70$ fg
gdb ./vdr
[New Thread 0xb7bf16c0 (LWP 4639)]

Program received signal SIGTTOU, Stopped (tty output).
[Switching to Thread 0xb7bf16c0 (LWP 4639)]
0xb7f90430 in __kernel_vsyscall ()
(gdb) fg
Continuing.

Program received signal SIGTTOU, Stopped (tty output).
0xb7f90430 in __kernel_vsyscall ()
(gdb) q
The program is running.  Exit anyway? (y or n) y








From goga777 at bk.ru  Sun Nov 16 16:15:34 2008
From: goga777 at bk.ru (Goga777)
Date: Sun, 16 Nov 2008 18:15:34 +0300
Subject: [Softdevice-devel] a lot of warnings with cvs softdevice
 version and ffmpeg from svn
In-Reply-To: <20081030172953.7c821121@bk.ru>
References: <20081030155952.2e66f6b8@bk.ru>
	<20081030172953.7c821121@bk.ru>
Message-ID: <20081116181534.27300dbf@bk.ru>

Hi Stefan

did you find something wrong in softdevice code ? or is it was ffmpeg problem ?
today with svn ffmpeg and cvs softdevice I could run vdr

goga at goga:/usr/src/vdr$ ./vdr -c /etc/vdr/ -P xineliboutput -P reelchannelscan
./vdr: symbol lookup error: ./PLUGINS/lib/libxineliboutput-sxfe.so.1.0.90-cvs: undefined symbol: x_syslog
goga at goga:/usr/src/vdr$ ./vdr -c /etc/vdr/ -P "softdevice -vo xv:"
softdevice: Created setupStoreId 289144833!
softdevice: Attatched to setupStoreId 289144833 at 0xb808b000.
[softdevice] processing args
[softdevice]   argv [0] = softdevice
[softdevice]   argv [1] = -vo
[softdevice] initializing Plugin
[softdevice] Initializing Video Out
[softdevice] ffmpeg build(3408640)
[XvVideoOut]: Xinerama Screen 0: 0,0  1280x1024
[XvVideoOut]: osd_image shmid = 289177609
[XvVideoOut]: got osd_image: width 1280 height 1024, bytes per line 5120, Bpp 32
[XvVideoOut]: max area size 2048 x 2048
[XvVideoOut]: using area size 736 x 576
[softdevice] Subplugin successfully opend
[softdevice] Video Out seems to be OK
[softdevice] Initializing Audio Out
[XvVideoOut]: Xinerama-Screen changed to 0
[softdevice] Audio out seems to be OK
[softdevice] A/V devices initialized, now initializing MPEG2 Decoder
                                                                    
Goga
 	


> and after that I can't start vdr with softdevice 
> 
> Oct 30 17:26:12 localhost vdr: [18047] VDR version 1.7.0 started
> Oct 30 17:26:12 localhost vdr: [18047] codeset is 'UTF-8' - known
> Oct 30 17:26:12 localhost vdr: [18047] found 23 locales in ./locale
> Oct 30 17:26:12 localhost vdr: [18047] loading plugin: ./PLUGINS/lib/libvdr-softdevice.so.1.7.0
> Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/setup.conf
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: CustomMainMenuTitle = Video Disk Recorder
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: DisableVPS = 0
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: DoubleEpgAction = 0
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: DoubleEpgTimeDelta = 15
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: JumpPlay = 0
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: JumpSeconds = 60
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: JumpSecondsSlow = 10
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: MainMenuTitle = 0
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: MenuCmdPosition = 0
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: MixEpgAction = 0
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: PauseLastMark = 0
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: PlayJump = 0
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: ReloadMarks = 0
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: ShowProgressBar = 0
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: ShowRecDate = 1
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: ShowRecLength = 0
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: ShowRecTime = 1
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: ShowTimerStop = 1
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: UseDolbyInRecordings = 1
> Oct 30 17:26:12 localhost vdr: [18047] ERROR: unknown config parameter: WarEagleIcons = 1
> Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/sources.conf
> Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/diseqc.conf
> Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/channels.conf
> Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/timers.conf
> Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/svdrphosts.conf
> Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/remote.conf
> Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/keymacros.conf
> Oct 30 17:26:12 localhost vdr: [18049] video directory scanner thread started (pid=18047, tid=18049)
> Oct 30 17:26:12 localhost vdr: [18048] video directory scanner thread started (pid=18047, tid=18048)
> Oct 30 17:26:12 localhost vdr: [18049] video directory scanner thread ended (pid=18047, tid=18049)
> Oct 30 17:26:12 localhost vdr: [18047] reading EPG data from /video/epg.data
> Oct 30 17:26:12 localhost vdr: [18048] video directory scanner thread ended (pid=18047, tid=18048)
> Oct 30 17:26:12 localhost vdr: [18047] probing /dev/dvb/adapter0/frontend0
> Oct 30 17:26:12 localhost vdr: [18047] device 1 provides: DVBS DVBS2
> Oct 30 17:26:12 localhost vdr: [18047] device 1 forced to frontendType SYS_DVBS2
> Oct 30 17:26:12 localhost vdr: [18051] tuner on device 1 thread started (pid=18047, tid=18051)
> Oct 30 17:26:12 localhost vdr: [18052] section handler thread started (pid=18047, tid=18052)
> 
> 
> ct 30 17:26:12 localhost vdr: [18047] found 1 video device
> Oct 30 17:26:12 localhost vdr: [18047] initializing plugin: softdevice (0.5.0): A software emulated MPEG2 device
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: patch version (2007-12-25)
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: Initialize XShmCreateImage Successful (0xb5c458b0)
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: Initialize shmget Successful (2949120 bytes)
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: Initialize shmat Successful
> Oct 30 17:26:12 localhost vdr: [18047] [softdevice-xscreensaver]: xscreensaver not running
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: initialized OK
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: ATI Radeon Video Overlay: available ports 73 - 73
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: grabbed port 73
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: max area size 2048 x 2048
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: using area size 736 x 576
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_DEVICE_ID                  XvGettable NOT-XvSettable (       0
> [0x 00000000] -       -1 [0xffffffff]) (     567 [0x00000237]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_LOCATION_ID                XvGettable NOT-XvSettable (       0
> [0x 00000000] -       -1 [0xffffffff]) (     568 [0x00000238]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_INSTANCE_ID                XvGettable NOT-XvSettable (       0
> [0x 00000000] -       -1 [0xffffffff]) (     569 [0x00000239]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_DUMP_STATUS            NOT-XvGettable     XvSettable (       0
> [0x 00000000] -        1 [0x00000001]) (       0 [0x00000000]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_SET_DEFAULTS           NOT-XvGettable     XvSettable (       0
> [0x 00000000] -        1 [0x00000001]) (       0 [0x00000000]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_AUTOPAINT_COLORKEY         XvGettable     XvSettable (       0
> [0x 00000000] -        1 [0x00000001]) (       0 [0x00000000]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_COLORKEY                   XvGettable     XvSettable (       0
> [0x 00000000] -       -1 [0xffffffff]) ( 1707776 [0x001a0f00]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_DOUBLE_BUFFER              XvGettable     XvSettable (       0
> [0x 00000000] -        1 [0x00000001]) (       1 [0x00000001]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_OVERLAY_ALPHA              XvGettable     XvSettable (       0
> [0x 00000000] -      255 [0x000000ff]) (     255 [0x000000ff]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_GRAPHICS_ALPHA             XvGettable     XvSettable (       0
> [0x 00000000] -      255 [0x000000ff]) (     255 [0x000000ff]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_ALPHA_MODE                 XvGettable     XvSettable (       0
> [0x 00000000] -        1 [0x00000001]) (       0 [0x00000000]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_BRIGHTNESS                 XvGettable     XvSettable (   -1000
> [0x fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_CONTRAST                   XvGettable     XvSettable (   -1000
> [0x fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_SATURATION                 XvGettable     XvSettable (   -1000
> [0x fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_COLOR                      XvGettable     XvSettable (   -1000
> [0x fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_HUE                        XvGettable     XvSettable (   -1000
> [0x fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
> 
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_RED_INTENSITY              XvGettable     XvSettable (   -1000
> [0x fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_GREEN_INTENSITY            XvGettable     XvSettable (   -1000
> [0x fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_BLUE_INTENSITY             XvGettable     XvSettable (   -1000
> [0x fffffc18] -     1000 [0x000003e8]) (       0 [0x00000000]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_CRTC                       XvGettable     XvSettable (      -1
> [0x ffffffff] -        1 [0x00000001]) (      -1 [0xffffffff]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_GAMMA                      XvGettable     XvSettable (     100
> [0x 00000064] -    10000 [0x00002710]) (    1000 [0x000003e8]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]:   XV_COLORSPACE                 XvGettable     XvSettable (       0
> [0x 00000000] -        1 [0x00000001]) (       0 [0x00000000]
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: using color key 0x1a0f00
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: XvShmCreateImage Successful (0xb5c3acb0)
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: shmget Successful (0 bytes)
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: shmat Successful
> Oct 30 17:26:12 localhost vdr: [18047] [XvVideoOut]: XShmAttach    rc = 1 (should be OK)
> Oct 30 17:26:12 localhost vdr: [18047] [softdevice] videoOut OK !
> Oct 30 17:26:12 localhost vdr: [18047] [softdevice-audio] Opening alsa device default
> Oct 30 17:26:12 localhost vdr: [18047] [softdevice-audio] Using alsa AC3 device hw:0,1
> Oct 30 17:26:12 localhost vdr: [18047] [softdevice-audio] Device opened! Ready to play
> Oct 30 17:26:12 localhost vdr: [18047] setting primary device to 2
> Oct 30 17:26:12 localhost vdr: [18047] assuming manual start of VDR
> Oct 30 17:26:12 localhost vdr: [18047] SVDRP listening on port 2001
> Oct 30 17:26:12 localhost vdr: [18047] setting current skin to "sttng"
> Oct 30 17:26:12 localhost vdr: [18047] loading /etc/vdr/themes/sttng-default.theme
> Oct 30 17:26:12 localhost vdr: [18047] starting plugin: softdevice
> Oct 30 17:26:12 localhost vdr: [18047] plugin 'softdevice' called obsolete function RegisterI18n()
> Oct 30 17:26:12 localhost vdr: [18054] KBD remote control thread started (pid=18047, tid=18054)
> Oct 30 17:26:12 localhost vdr: [18047] remote control softdevice-xv - keys known
> Oct 30 17:26:12 localhost vdr: [18047] remote control KBD - keys known
> Oct 30 17:26:12 localhost vdr: [18047] switching to channel 1
> Oct 30 17:26:12 localhost vdr: [18057] receiver on device 1 thread started (pid=18047, tid=18057)
> Oct 30 17:26:12 localhost vdr: [18058] TS buffer on device 1 thread started (pid=18047, tid=18058)
> Oct 30 17:26:12 localhost vdr: [18056] transfer thread started (pid=18047, tid=18056)
> Oct 30 17:26:12 localhost vdr: [18053] [VideoOut]: 736x576 [0,0 736x576] -> 768x576 [0,6 768x563]
> Oct 30 17:26:13 localhost vdr: [18056] cVideoRepacker: switching to MPEG1/2 mode
> Oct 30 17:26:13 localhost vdr: [18056] cVideoRepacker: operating in MPEG1/2 mode
> Oct 30 17:26:13 localhost kernel: [19192.761934] vdr[18059]: segfault at 0 ip b7a1a1e2 sp b2a5c130 error 4 in
> libavformat.so .52.23.1[b79f9000+ba000]
> _______________________________________________
> Softdevice-devel mailing list
> Softdevice-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/softdevice-devel
> 


-- 
?????,
?????


From goga777 at bk.ru  Sun Nov 16 19:49:42 2008
From: goga777 at bk.ru (Goga777)
Date: Sun, 16 Nov 2008 21:49:42 +0300
Subject: [Softdevice-devel] a lot of warnings with cvs softdevice
 version and ffmpeg from svn
In-Reply-To: <20081116181534.27300dbf@bk.ru>
References: <20081030155952.2e66f6b8@bk.ru> <20081030172953.7c821121@bk.ru>
	<20081116181534.27300dbf@bk.ru>
Message-ID: <20081116214942.3f885749@bk.ru>

Hi Stefan

ah - it was the good test with disconnected antenna
when I connected the dish, I had vdr crash  :(
seems to me it's ffmpeg problem yes ?

goga at goga:/usr/src/vdr$ ./vdr -c /etc/vdr/ -P "softdevice -vo xv:"
softdevice: Created setupStoreId 22872064!
softdevice: Attatched to setupStoreId 22872064 at 0xb7fb9000.
[softdevice] processing args
[softdevice]   argv [0] = softdevice
[softdevice]   argv [1] = -vo
[softdevice] initializing Plugin
[softdevice] Initializing Video Out
[softdevice] ffmpeg build(3408640)
[XvVideoOut]: Xinerama Screen 0: 0,0  1280x1024
[XvVideoOut]: osd_image shmid = 22904833
[XvVideoOut]: got osd_image: width 1280 height 1024, bytes per line 5120, Bpp 32
[XvVideoOut]: max area size 2048 x 2048
[XvVideoOut]: using area size 736 x 576
[softdevice] Subplugin successfully opend
[softdevice] Video Out seems to be OK
[softdevice] Initializing Audio Out
[softdevice] Audio out seems to be OK
[softdevice] A/V devices initialized, now initializing MPEG2 Decoder
[XvVideoOut]: Xinerama-Screen changed to 0
?????? ???????????????
goga at goga:/usr/src/vdr$   


goga:/etc/init.d# gdb sv 5529
GNU gdb 6.8-debian
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i486-linux-gnu"...
sv: No such file or directory.
Attaching to process 5529
Reading symbols from /usr/src/vdr1_70/vdr...done.
Error while mapping shared library sections:
./PLUGINS/lib/libvdr-softdevice.so.1.7.0: No such file or directory.
Error while mapping shared library sections:
./PLUGINS/lib//libsoftdevice-xv.so.1.7.0: No such file or directory.
Reading symbols from /usr/lib/libjpeg.so.62...done.
Loaded symbols for /usr/lib/libjpeg.so.62
Reading symbols from /lib/i686/cmov/libpthread.so.0...done.
[Thread debugging using libthread_db enabled]
[New Thread 0xb7c1c6c0 (LWP 5529)]
[New Thread 0xb2c05b90 (LWP 5541)]
[New Thread 0xb3406b90 (LWP 5540)]
[New Thread 0xb3e08b90 (LWP 5539)]
[New Thread 0xb4609b90 (LWP 5538)]
[New Thread 0xb504cb90 (LWP 5536)]
[New Thread 0xb5897b90 (LWP 5535)]
[New Thread 0xb715bb90 (LWP 5534)]
[New Thread 0xb695ab90 (LWP 5533)]
Loaded symbols for /lib/i686/cmov/libpthread.so.0
Reading symbols from /lib/i686/cmov/libdl.so.2...done.
Loaded symbols for /lib/i686/cmov/libdl.so.2
Reading symbols from /lib/libcap.so.1...done.
Loaded symbols for /lib/libcap.so.1
Reading symbols from /lib/i686/cmov/librt.so.1...done.
Loaded symbols for /lib/i686/cmov/librt.so.1
Reading symbols from /usr/lib/libfreetype.so.6...done.
Loaded symbols for /usr/lib/libfreetype.so.6
Reading symbols from /usr/lib/libfontconfig.so.1...done.
Loaded symbols for /usr/lib/libfontconfig.so.1
Reading symbols from /usr/lib/libstdc++.so.6...done.
Loaded symbols for /usr/lib/libstdc++.so.6
Reading symbols from /lib/i686/cmov/libm.so.6...done.
Loaded symbols for /lib/i686/cmov/libm.so.6
Reading symbols from /lib/libgcc_s.so.1...done.
Loaded symbols for /lib/libgcc_s.so.1
Reading symbols from /lib/i686/cmov/libc.so.6...done.
Loaded symbols for /lib/i686/cmov/libc.so.6
Reading symbols from /lib/ld-linux.so.2...done.
Loaded symbols for /lib/ld-linux.so.2
Reading symbols from /usr/lib/libz.so.1...done.
Loaded symbols for /usr/lib/libz.so.1
Reading symbols from /usr/lib/libexpat.so.1...done.
Loaded symbols for /usr/lib/libexpat.so.1
Reading symbols from /usr/lib/gconv/ISO8859-1.so...done.
Loaded symbols for /usr/lib/gconv/ISO8859-1.so
Reading symbols from /usr/lib/gconv/ISO8859-2.so...done.
Loaded symbols for /usr/lib/gconv/ISO8859-2.so
Reading symbols from /usr/lib/gconv/ISO8859-15.so...done.
Loaded symbols for /usr/lib/gconv/ISO8859-15.so
Reading symbols from /usr/lib/gconv/ISO8859-7.so...done.
Loaded symbols for /usr/lib/gconv/ISO8859-7.so
Reading symbols from /usr/lib/gconv/ISO8859-13.so...done.
Loaded symbols for /usr/lib/gconv/ISO8859-13.so
Reading symbols from /usr/lib/gconv/ISO8859-5.so...done.
Loaded symbols for /usr/lib/gconv/ISO8859-5.so
Reading symbols from /usr/lib/gconv/ISO8859-9.so...done.
Loaded symbols for /usr/lib/gconv/ISO8859-9.so
Symbol file not found for ./PLUGINS/lib/libvdr-softdevice.so.1.7.0
Reading symbols from /usr/local/lib/libavformat.so.52...done.
Loaded symbols for /usr/local/lib/libavformat.so.52
Reading symbols from /usr/local/lib/libavcodec.so.52...done.
Loaded symbols for /usr/local/lib/libavcodec.so.52
Reading symbols from /usr/local/lib/libpostproc.so.51...done.
Loaded symbols for /usr/local/lib/libpostproc.so.51
Reading symbols from /usr/lib/libasound.so.2...done.
Loaded symbols for /usr/lib/libasound.so.2
Reading symbols from /usr/local/lib/libavutil.so.49...done.
Loaded symbols for /usr/local/lib/libavutil.so.49
Reading symbols from /lib/libbz2.so.1.0...done.
Loaded symbols for /lib/libbz2.so.1.0
Symbol file not found for ./PLUGINS/lib//libsoftdevice-xv.so.1.7.0
Reading symbols from /usr/lib/libXext.so.6...done.
Loaded symbols for /usr/lib/libXext.so.6
Reading symbols from /usr/lib/libX11.so.6...done.
Loaded symbols for /usr/lib/libX11.so.6
Reading symbols from /usr/lib/libXv.so.1...done.
Loaded symbols for /usr/lib/libXv.so.1
Reading symbols from /usr/lib/libXinerama.so.1...done.
Loaded symbols for /usr/lib/libXinerama.so.1
Reading symbols from /usr/lib/libXau.so.6...done.
Loaded symbols for /usr/lib/libXau.so.6
Reading symbols from /usr/lib/libxcb-xlib.so.0...done.
Loaded symbols for /usr/lib/libxcb-xlib.so.0
Reading symbols from /usr/lib/libxcb.so.1...done.
Loaded symbols for /usr/lib/libxcb.so.1
Reading symbols from /usr/lib/libXdmcp.so.6...done.
Loaded symbols for /usr/lib/libXdmcp.so.6
Reading symbols from /usr/lib/libXcursor.so.1...done.
Loaded symbols for /usr/lib/libXcursor.so.1
Reading symbols from /usr/lib/libXrender.so.1...done.
Loaded symbols for /usr/lib/libXrender.so.1
Reading symbols from /usr/lib/libXfixes.so.3...done.
Loaded symbols for /usr/lib/libXfixes.so.3
Reading symbols from /lib/i686/cmov/libnss_compat.so.2...done.
Loaded symbols for /lib/i686/cmov/libnss_compat.so.2
Reading symbols from /lib/i686/cmov/libnsl.so.1...done.
Loaded symbols for /lib/i686/cmov/libnsl.so.1
Reading symbols from /lib/i686/cmov/libnss_nis.so.2...done.
Loaded symbols for /lib/i686/cmov/libnss_nis.so.2
Reading symbols from /lib/i686/cmov/libnss_files.so.2...done.
Loaded symbols for /lib/i686/cmov/libnss_files.so.2
0xb7fd4430 in __kernel_vsyscall ()
(gdb) c
Continuing.
[New Thread 0xb21ceb90 (LWP 5578)]
[Thread 0xb21ceb90 (LWP 5578) exited]
[New Thread 0xb21ceb90 (LWP 5579)]
[Thread 0xb4609b90 (LWP 5538) exited]
[Thread 0xb2c05b90 (LWP 5541) exited]
[New Thread 0xb2c05b90 (LWP 5589)]
[Thread 0xb3406b90 (LWP 5540) exited]
[Thread 0xb3e08b90 (LWP 5539) exited]
[New Thread 0xb3e08b90 (LWP 5590)]
[New Thread 0xb3406b90 (LWP 5591)]
[Thread 0xb21ceb90 (LWP 5579) exited]
[New Thread 0xb21ceb90 (LWP 5592)]
[New Thread 0xb4609b90 (LWP 5593)]
[Thread 0xb4609b90 (LWP 5593) exited]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0xb21ceb90 (LWP 5592)]
0xb7947cc2 in get_byte (s=0x98aa1e0) at libavformat/aviobuf.c:351
351                 return *s->buf_ptr++;
(gdb) bt
#0  0xb7947cc2 in get_byte (s=0x98aa1e0) at libavformat/aviobuf.c:351
#1  0xb7988405 in find_next_start_code (pb=0x98aa1e0, size_ptr=0xb21ce134, header_state=0x98411a0)
    at libavformat/mpeg.c:142
#2  0xb79885b8 in mpegps_read_pes_header (s=0x990f660, ppos=0xb21ce1c8, pstart_code=0xb21ce1e0, ppts=0xb21ce1d8,
    pdts=0xb21ce1d0) at libavformat/mpeg.c:246
#3  0xb7988c79 in mpegps_read_packet (s=0x990f660, pkt=0x9910528) at libavformat/mpeg.c:418
#4  0xb793df22 in av_read_packet (s=0x990f660, pkt=0x9910528) at libavformat/utils.c:625
#5  0xb793f578 in av_read_frame_internal (s=0x990f660, pkt=0xb21ce340) at libavformat/utils.c:1004
#6  0xb793fbdf in av_read_frame (s=0x990f660, pkt=0xb21ce340) at libavformat/utils.c:1123
#7  0xb7a43567 in ?? ()
#8  0x0990f660 in ?? ()
#9  0xb21ce340 in ?? ()
#10 0xb21ce330 in ?? ()
#11 0x00000000 in ?? ()
(gdb) disass $pc-32 $pc+32
Dump of assembler code from 0xb7947ca2 to 0xb7947ce2:
0xb7947ca2 <get_byte+49>:       inc    %ebp
0xb7947ca3 <get_byte+50>:       or     %cl,-0x5e17dbfc(%ecx)
0xb7947ca9 <get_byte+56>:       std
0xb7947caa <get_byte+57>:       (bad)
0xb7947cab <get_byte+58>:       decl   0x508b0845(%ebx)
0xb7947cb1 <get_byte+64>:       or     %cl,0x408b0845(%ebx)
0xb7947cb7 <get_byte+70>:       or     $0x39,%al
0xb7947cb9 <get_byte+72>:       ret    $0x1a73
0xb7947cbc <get_byte+75>:       mov    0x8(%ebp),%eax
0xb7947cbf <get_byte+78>:       mov    0x8(%eax),%edx
0xb7947cc2 <get_byte+81>:       movzbl (%edx),%eax
0xb7947cc5 <get_byte+84>:       movzbl %al,%eax
0xb7947cc8 <get_byte+87>:       mov    %eax,-0x4(%ebp)
0xb7947ccb <get_byte+90>:       add    $0x1,%edx
0xb7947cce <get_byte+93>:       mov    0x8(%ebp),%eax
0xb7947cd1 <get_byte+96>:       mov    %edx,0x8(%eax)
0xb7947cd4 <get_byte+99>:       jmp    0xb7947cdd <get_byte+108>
0xb7947cd6 <get_byte+101>:      movl   $0x0,-0x4(%ebp)
0xb7947cdd <get_byte+108>:      mov    -0x4(%ebp),%eax
0xb7947ce0 <get_byte+111>:      leave
0xb7947ce1 <get_byte+112>:      ret
End of assembler dump.
(gdb) info all-registers
eax            0x98aa1e0        160080352
ecx            0x98aa1e0        160080352
edx            0x0      0
ebx            0xb7a630b4       -1213845324
esp            0xb21ce0c0       0xb21ce0c0
ebp            0xb21ce0c8       0xb21ce0c8
esi            0x9859448        159749192
edi            0xb21ce340       -1306729664
eip            0xb7947cc2       0xb7947cc2 <get_byte+81>
eflags         0x210293 [ CF AF SF IF RF ID ]
cs             0x73     115
ss             0x7b     123
ds             0x7b     123
es             0x7b     123
fs             0x0      0
gs             0x33     51
st0            -nan(0x7f7f7f7f7f7f7f7f) (raw 0xffff7f7f7f7f7f7f7f7f)
st1            -nan(0xfe00fe00fe00fe)   (raw 0xffff00fe00fe00fe00fe)
st2            -nan(0xfe00fe00fe00fe)   (raw 0xffff00fe00fe00fe00fe)
st3            -nan(0x7f7f7f7f7f7f7f7f) (raw 0xffff7f7f7f7f7f7f7f7f)
st4            -nan(0x80008000800080)   (raw 0xffff0080008000800080)
st5            65280    (raw 0x400eff00000000000000)
st6            1        (raw 0x3fff8000000000000000)
st7            1        (raw 0x3fff8000000000000000)
fctrl          0x37f    895
fstat          0x4020   16416
ftag           0xffff   65535
fiseg          0x73     115
fioff          0xb72bda89       -1221862775
foseg          0x7b     123
fooff          0xbf8ed3f0       -1081158672
fop            0x1c9    457
xmm0           {v4_float = {0x0, 0x0, 0x0, 0x0}, v2_double = {0x0, 0x0}, v16_int8 = {0x0 <repeats 16 times>}, v8_int16 = {
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, v4_int32 = {0x0, 0x0, 0x0, 0x0}, v2_int64 = {0x0, 0x0},
  uint128 = 0x00000000000000000000000000000000}
xmm1           {v4_float = {0x0, 0x0, 0x0, 0x0}, v2_double = {0x0, 0x0}, v16_int8 = {0x0 <repeats 16 times>}, v8_int16 = {
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, v4_int32 = {0x0, 0x0, 0x0, 0x0}, v2_int64 = {0x0, 0x0},
  uint128 = 0x00000000000000000000000000000000}
xmm2           {v4_float = {0x0, 0x0, 0x0, 0x0}, v2_double = {0x0, 0x0}, v16_int8 = {0x0 <repeats 16 times>}, v8_int16 = {
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, v4_int32 = {0x0, 0x0, 0x0, 0x0}, v2_int64 = {0x0, 0x0},
  uint128 = 0x00000000000000000000000000000000}
xmm3           {v4_float = {0x0, 0x0, 0x0, 0x0}, v2_double = {0x0, 0x0}, v16_int8 = {0x0 <repeats 16 times>}, v8_int16 = {
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, v4_int32 = {0x0, 0x0, 0x0, 0x0}, v2_int64 = {0x0, 0x0},
  uint128 = 0x00000000000000000000000000000000}
xmm4           {v4_float = {0x0, 0x0, 0x0, 0x0}, v2_double = {0x0, 0x0}, v16_int8 = {0x0 <repeats 16 times>}, v8_int16 = {
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, v4_int32 = {0x0, 0x0, 0x0, 0x0}, v2_int64 = {0x0, 0x0},
---Type <return> to continue, or q <return> to quit---
  uint128 = 0x00000000000000000000000000000000}
xmm5           {v4_float = {0x0, 0x0, 0x0, 0x0}, v2_double = {0x0, 0x0}, v16_int8 = {0x0 <repeats 16 times>}, v8_int16 = {
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, v4_int32 = {0x0, 0x0, 0x0, 0x0}, v2_int64 = {0x0, 0x0},
  uint128 = 0x00000000000000000000000000000000}
xmm6           {v4_float = {0x0, 0x0, 0x0, 0x0}, v2_double = {0x0, 0x0}, v16_int8 = {0x0 <repeats 16 times>}, v8_int16 = {
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, v4_int32 = {0x0, 0x0, 0x0, 0x0}, v2_int64 = {0x0, 0x0},
  uint128 = 0x00000000000000000000000000000000}
xmm7           {v4_float = {0x0, 0x0, 0x0, 0x0}, v2_double = {0x0, 0x0}, v16_int8 = {0x0 <repeats 16 times>}, v8_int16 = {
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, v4_int32 = {0x0, 0x0, 0x0, 0x0}, v2_int64 = {0x0, 0x0},
  uint128 = 0x00000000000000000000000000000000}
mxcsr          0x1f80   [ IM DM ZM OM UM PM ]
mm0            {uint64 = 0x7f7f7f7f7f7f7f7f, v2_int32 = {0x7f7f7f7f, 0x7f7f7f7f}, v4_int16 = {0x7f7f, 0x7f7f, 0x7f7f,
    0x7f7f}, v8_int8 = {0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f}}
mm1            {uint64 = 0xfe00fe00fe00fe, v2_int32 = {0xfe00fe, 0xfe00fe}, v4_int16 = {0xfe, 0xfe, 0xfe, 0xfe},
  v8_int8 = {0xfe, 0x0, 0xfe, 0x0, 0xfe, 0x0, 0xfe, 0x0}}
mm2            {uint64 = 0xfe00fe00fe00fe, v2_int32 = {0xfe00fe, 0xfe00fe}, v4_int16 = {0xfe, 0xfe, 0xfe, 0xfe},
  v8_int8 = {0xfe, 0x0, 0xfe, 0x0, 0xfe, 0x0, 0xfe, 0x0}}
mm3            {uint64 = 0x7f7f7f7f7f7f7f7f, v2_int32 = {0x7f7f7f7f, 0x7f7f7f7f}, v4_int16 = {0x7f7f, 0x7f7f, 0x7f7f,
    0x7f7f}, v8_int8 = {0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f}}
mm4            {uint64 = 0x80008000800080, v2_int32 = {0x800080, 0x800080}, v4_int16 = {0x80, 0x80, 0x80, 0x80},
  v8_int8 = {0x80, 0x0, 0x80, 0x0, 0x80, 0x0, 0x80, 0x0}}
mm5            {uint64 = 0xff00000000000000, v2_int32 = {0x0, 0xff000000}, v4_int16 = {0x0, 0x0, 0x0, 0xff00}, v8_int8 = {
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xff}}
mm6            {uint64 = 0x8000000000000000, v2_int32 = {0x0, 0x80000000}, v4_int16 = {0x0, 0x0, 0x0, 0x8000}, v8_int8 = {
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x80}}
mm7            {uint64 = 0x8000000000000000, v2_int32 = {0x0, 0x80000000}, v4_int16 = {0x0, 0x0, 0x0, 0x8000}, v8_int8 = {
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x80}}
(gdb)
(gdb)
(gdb) c
Continuing.

Program terminated with signal SIGSEGV, Segmentation fault.
The program no longer exists.
(gdb)
          



> 
> did you find something wrong in softdevice code ? or is it was ffmpeg problem ?
> today with svn ffmpeg and cvs softdevice I could run vdr
> 
> goga at goga:/usr/src/vdr$ ./vdr -c /etc/vdr/ -P xineliboutput -P reelchannelscan
> ./vdr: symbol lookup error: ./PLUGINS/lib/libxineliboutput-sxfe.so.1.0.90-cvs: undefined symbol: x_syslog
> goga at goga:/usr/src/vdr$ ./vdr -c /etc/vdr/ -P "softdevice -vo xv:"
> softdevice: Created setupStoreId 289144833!
> softdevice: Attatched to setupStoreId 289144833 at 0xb808b000.
> [softdevice] processing args
> [softdevice]   argv [0] = softdevice
> [softdevice]   argv [1] = -vo
> [softdevice] initializing Plugin
> [softdevice] Initializing Video Out
> [softdevice] ffmpeg build(3408640)
> [XvVideoOut]: Xinerama Screen 0: 0,0  1280x1024
> [XvVideoOut]: osd_image shmid = 289177609
> [XvVideoOut]: got osd_image: width 1280 height 1024, bytes per line 5120, Bpp 32
> [XvVideoOut]: max area size 2048 x 2048
> [XvVideoOut]: using area size 736 x 576
> [softdevice] Subplugin successfully opend
> [softdevice] Video Out seems to be OK
> [softdevice] Initializing Audio Out
> [XvVideoOut]: Xinerama-Screen changed to 0
> [softdevice] Audio out seems to be OK
> [softdevice] A/V devices initialized, now initializing MPEG2 Decoder


From stefan at lucke.in-berlin.de  Wed Dec  3 19:32:30 2008
From: stefan at lucke.in-berlin.de (Stefan Lucke)
Date: Wed, 3 Dec 2008 19:32:30 +0100
Subject: [Softdevice-devel] a lot of warnings with cvs softdevice
	version and ffmpeg from svn
In-Reply-To: <20081116214942.3f885749@bk.ru>
References: <20081030155952.2e66f6b8@bk.ru> <20081116181534.27300dbf@bk.ru>
	<20081116214942.3f885749@bk.ru>
Message-ID: <200812031932.31192.stefan@lucke.in-berlin.de>

On Sunday 16 November 2008, Goga777 wrote:
> Hi Stefan
> 
> ah - it was the good test with disconnected antenna
> when I connected the dish, I had vdr crash  :(
> seems to me it's ffmpeg problem yes ?

I guess yes, but unfortunately ffplay does not crash.

> 
> goga at goga:/usr/src/vdr$ ./vdr -c /etc/vdr/ -P "softdevice -vo xv:"
> softdevice: Created setupStoreId 22872064!
> softdevice: Attatched to setupStoreId 22872064 at 0xb7fb9000.
> [softdevice] processing args
> [softdevice]   argv [0] = softdevice
> [softdevice]   argv [1] = -vo
> [softdevice] initializing Plugin
> [softdevice] Initializing Video Out
> [softdevice] ffmpeg build(3408640)
> [XvVideoOut]: Xinerama Screen 0: 0,0  1280x1024
> [XvVideoOut]: osd_image shmid = 22904833
> [XvVideoOut]: got osd_image: width 1280 height 1024, bytes per line 5120, Bpp 32
> [XvVideoOut]: max area size 2048 x 2048
> [XvVideoOut]: using area size 736 x 576
> [softdevice] Subplugin successfully opend
> [softdevice] Video Out seems to be OK
> [softdevice] Initializing Audio Out
> [softdevice] Audio out seems to be OK
> [softdevice] A/V devices initialized, now initializing MPEG2 Decoder
> [XvVideoOut]: Xinerama-Screen changed to 0
> ?????? ???????????????
> goga at goga:/usr/src/vdr$   
> 
> 
> goga:/etc/init.d# gdb sv 5529
> GNU gdb 6.8-debian
> Copyright (C) 2008 Free Software Foundation, Inc.
> License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
> This is free software: you are free to change and redistribute it.
> There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
> and "show warranty" for details.
> This GDB was configured as "i486-linux-gnu"...
> sv: No such file or directory.
> Attaching to process 5529
> Reading symbols from /usr/src/vdr1_70/vdr...done.
> Error while mapping shared library sections:
> ./PLUGINS/lib/libvdr-softdevice.so.1.7.0: No such file or directory.
> Error while mapping shared library sections:
> ./PLUGINS/lib//libsoftdevice-xv.so.1.7.0: No such file or directory.

[snip]

> (gdb) c
> Continuing.
> [New Thread 0xb21ceb90 (LWP 5578)]
> [Thread 0xb21ceb90 (LWP 5578) exited]
> [New Thread 0xb21ceb90 (LWP 5579)]
> [Thread 0xb4609b90 (LWP 5538) exited]
> [Thread 0xb2c05b90 (LWP 5541) exited]
> [New Thread 0xb2c05b90 (LWP 5589)]
> [Thread 0xb3406b90 (LWP 5540) exited]
> [Thread 0xb3e08b90 (LWP 5539) exited]
> [New Thread 0xb3e08b90 (LWP 5590)]
> [New Thread 0xb3406b90 (LWP 5591)]
> [Thread 0xb21ceb90 (LWP 5579) exited]
> [New Thread 0xb21ceb90 (LWP 5592)]
> [New Thread 0xb4609b90 (LWP 5593)]
> [Thread 0xb4609b90 (LWP 5593) exited]
> 
> Program received signal SIGSEGV, Segmentation fault.
> [Switching to Thread 0xb21ceb90 (LWP 5592)]
> 0xb7947cc2 in get_byte (s=0x98aa1e0) at libavformat/aviobuf.c:351
> 351                 return *s->buf_ptr++;

Now my current ffmpeg version crashes too.
backing out 2 most recent changes:
http://svn.ffmpeg.org/ffmpeg/trunk/libavformat/aviobuf.c?view=log&pathrev=15799

http://svn.ffmpeg.org/ffmpeg/trunk/libavformat/aviobuf.c?r1=15634&r2=15799&pathrev=15799
http://svn.ffmpeg.org/ffmpeg/trunk/libavformat/aviobuf.c?r1=15555&r2=15634&pathrev=15799

prevents segfaults.

-- 
Stefan Lucke


From admin at berlios.de  Sun Dec 14 17:57:44 2008
From: admin at berlios.de (admin at berlios.de)
Date: Sun, 14 Dec 2008 17:57:44 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14931] compilation fails with last ffmpeg
Message-ID: <200812141657.mBEGvi7N014836@unicorn.berlios.de>

Bug #14931, was updated on 2008-Dec-14 17:57
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: general
Status: Open
Resolution: None
Bug Group: None
Priority: 5
Submitted by: davide125
Assigned to : none
Summary: compilation fails with last ffmpeg

Details: Softdevice needs to be updated for libavcodec v52 API

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14931&group_id=2051


From admin at berlios.de  Mon Dec 15 20:50:33 2008
From: admin at berlios.de (admin at berlios.de)
Date: Mon, 15 Dec 2008 20:50:33 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14931] compilation fails with last ffmpeg
Message-ID: <200812151950.mBFJoXjR007294@unicorn.berlios.de>

Bug #14931, was updated on 2008-Dec-14 17:57
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: general
Status: Open
Resolution: None
Bug Group: None
Priority: 5
Submitted by: davide125
Assigned to : lucke
Summary: compilation fails with last ffmpeg

Details: Softdevice needs to be updated for libavcodec v52 API

Follow-Ups:

Date: 2008-Dec-15 20:50
By: lucke

Comment:
Which version of softdevice do you use ? In case of current cvs, please post exact ffmpeg version which fails and the error message of compilation.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14931&group_id=2051


From admin at berlios.de  Thu Dec 18 15:28:33 2008
From: admin at berlios.de (admin at berlios.de)
Date: Thu, 18 Dec 2008 15:28:33 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14940] undefined symbol: avcodec_build
Message-ID: <200812181428.mBIESXm0008329@unicorn.berlios.de>

Bug #14940, was updated on 2008-Dec-18 15:28
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: None
Status: Open
Resolution: None
Bug Group: None
Priority: 5
Submitted by: erbse
Assigned to : none
Summary: undefined symbol: avcodec_build

Details: Hallo,

beim Start von vdr mit -psoftdevice -vo shm bekomme ich diese Fehlermeldung:

vdr starten: vdr: /usr/local/vdr/lib/libvdr-softdevice.so.1.6.0: undefined symbol: avcodec_build

FFmpeg und das Softdevice-Plugin habe ich jeweils aus der cvs gezogen (heute), bei ffmpeg bin ich nach der Anleitung aus dem VDR-Wiki (von der Softdevice-Seite) vorgegangen. Einziges Problem bei dieser Anleitung: bei ffmpeg geht "make install-lib" nicht, weil es anscheinend keine Regel daf?r im Makefile gibt. softdevice hat aber ohne Fehlermeldung kompiliert.

Gru? 
Erbse



For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14940&group_id=2051


From admin at berlios.de  Thu Dec 18 18:23:21 2008
From: admin at berlios.de (admin at berlios.de)
Date: Thu, 18 Dec 2008 18:23:21 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14940] undefined symbol: avcodec_build
Message-ID: <200812181723.mBIHNLuk022632@unicorn.berlios.de>

Bug #14940, was updated on 2008-Dec-18 15:28
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: None
Status: Open
Resolution: None
Bug Group: None
Priority: 5
Submitted by: erbse
Assigned to : lucke
Summary: undefined symbol: avcodec_build

Details: Hallo,

beim Start von vdr mit -psoftdevice -vo shm bekomme ich diese Fehlermeldung:

vdr starten: vdr: /usr/local/vdr/lib/libvdr-softdevice.so.1.6.0: undefined symbol: avcodec_build

FFmpeg und das Softdevice-Plugin habe ich jeweils aus der cvs gezogen (heute), bei ffmpeg bin ich nach der Anleitung aus dem VDR-Wiki (von der Softdevice-Seite) vorgegangen. Einziges Problem bei dieser Anleitung: bei ffmpeg geht "make install-lib" nicht, weil es anscheinend keine Regel daf?r im Makefile gibt. softdevice hat aber ohne Fehlermeldung kompiliert.

Gru? 
Erbse



Follow-Ups:

Date: 2008-Dec-18 18:23
By: lucke

Comment:
Sollte nicht passieren. Da gibt es bei Dir eine alte Version von avcodec.h in der LIBAVCODEC_VERSION_INT < ((52<<16)+(0<<8)+0) definiert ist. Entferne die alten Header-Files von FFmpeg und rekonfiguriere und ?bersetzte softdevice neu.
Should not happen. There is an old version of avcodec.h on your system which defines LIBAVCODEC_VERSION_INT less than ((52<<16)+(0<<8)+0). Remove old FFmpeg headers and reconfigure and recompile softdevice.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14940&group_id=2051


From admin at berlios.de  Thu Dec 18 22:39:26 2008
From: admin at berlios.de (admin at berlios.de)
Date: Thu, 18 Dec 2008 22:39:26 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14940] undefined symbol: avcodec_build
Message-ID: <200812182139.mBILdQGZ003158@unicorn.berlios.de>

Bug #14940, was updated on 2008-Dec-18 15:28
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: None
Status: Open
Resolution: None
Bug Group: None
Priority: 5
Submitted by: erbse
Assigned to : lucke
Summary: undefined symbol: avcodec_build

Details: Hallo,

beim Start von vdr mit -psoftdevice -vo shm bekomme ich diese Fehlermeldung:

vdr starten: vdr: /usr/local/vdr/lib/libvdr-softdevice.so.1.6.0: undefined symbol: avcodec_build

FFmpeg und das Softdevice-Plugin habe ich jeweils aus der cvs gezogen (heute), bei ffmpeg bin ich nach der Anleitung aus dem VDR-Wiki (von der Softdevice-Seite) vorgegangen. Einziges Problem bei dieser Anleitung: bei ffmpeg geht "make install-lib" nicht, weil es anscheinend keine Regel daf?r im Makefile gibt. softdevice hat aber ohne Fehlermeldung kompiliert.

Gru? 
Erbse



Follow-Ups:

Date: 2008-Dec-18 22:39
By: erbse

Comment:
Hi, thank you so much for replying so quickly. I eliminated all occurrencies of avcodec.h (I had thought I had deleted any former ffmpeg but indeed found one instance where I had not supected it) and eliminated an reincompiled ffmepg just to be sure.

I also recompiled softdevice but nos on starting "make" I get the following error:

-----------------

make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   utils.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   i18n.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   video.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   mpeg2decoder.c
mpeg2decoder.c: In constructor &#65533;cStreamDecoder::cStreamDecoder(AVCodecContext*, bool)&#65533;:
mpeg2decoder.c:146: Fehler: &#65533;struct AVCodecContext&#65533; hat kein Element namens &#65533;error_resilience&#65533;
make[1]: *** [mpeg2decoder.o] Fehler 1
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
Plugin status:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/status'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/status'
Plugin streamdev:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
Plugin svdrpdemo:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
Plugin vdrrip:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'

*** failed plugins: softdevice
--------

Hoping for further advice - good night
Erbse
-------------------------------------------------------

Date: 2008-Dec-18 18:23
By: lucke

Comment:
Sollte nicht passieren. Da gibt es bei Dir eine alte Version von avcodec.h in der LIBAVCODEC_VERSION_INT < ((52<<16)+(0<<8)+0) definiert ist. Entferne die alten Header-Files von FFmpeg und rekonfiguriere und ?bersetzte softdevice neu.
Should not happen. There is an old version of avcodec.h on your system which defines LIBAVCODEC_VERSION_INT less than ((52<<16)+(0<<8)+0). Remove old FFmpeg headers and reconfigure and recompile softdevice.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14940&group_id=2051


From admin at berlios.de  Fri Dec 19 00:42:13 2008
From: admin at berlios.de (admin at berlios.de)
Date: Fri, 19 Dec 2008 00:42:13 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14940] undefined symbol: avcodec_build
Message-ID: <200812182342.mBINgDmW015593@unicorn.berlios.de>

Bug #14940, was updated on 2008-Dec-18 15:28
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: None
Status: Open
Resolution: None
Bug Group: None
Priority: 5
Submitted by: erbse
Assigned to : lucke
Summary: undefined symbol: avcodec_build

Details: Hallo,

beim Start von vdr mit -psoftdevice -vo shm bekomme ich diese Fehlermeldung:

vdr starten: vdr: /usr/local/vdr/lib/libvdr-softdevice.so.1.6.0: undefined symbol: avcodec_build

FFmpeg und das Softdevice-Plugin habe ich jeweils aus der cvs gezogen (heute), bei ffmpeg bin ich nach der Anleitung aus dem VDR-Wiki (von der Softdevice-Seite) vorgegangen. Einziges Problem bei dieser Anleitung: bei ffmpeg geht "make install-lib" nicht, weil es anscheinend keine Regel daf?r im Makefile gibt. softdevice hat aber ohne Fehlermeldung kompiliert.

Gru? 
Erbse



Follow-Ups:

Date: 2008-Dec-19 00:42
By: lucke

Comment:
Did you rerun configure ?
error_recognition vs. error_resilience should be detected by configure since the last change on sept. 21 2008.
-------------------------------------------------------

Date: 2008-Dec-18 22:39
By: erbse

Comment:
Hi, thank you so much for replying so quickly. I eliminated all occurrencies of avcodec.h (I had thought I had deleted any former ffmpeg but indeed found one instance where I had not supected it) and eliminated an reincompiled ffmepg just to be sure.

I also recompiled softdevice but nos on starting "make" I get the following error:

-----------------

make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   utils.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   i18n.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   video.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   mpeg2decoder.c
mpeg2decoder.c: In constructor &#65533;cStreamDecoder::cStreamDecoder(AVCodecContext*, bool)&#65533;:
mpeg2decoder.c:146: Fehler: &#65533;struct AVCodecContext&#65533; hat kein Element namens &#65533;error_resilience&#65533;
make[1]: *** [mpeg2decoder.o] Fehler 1
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
Plugin status:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/status'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/status'
Plugin streamdev:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
Plugin svdrpdemo:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
Plugin vdrrip:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'

*** failed plugins: softdevice
--------

Hoping for further advice - good night
Erbse
-------------------------------------------------------

Date: 2008-Dec-18 18:23
By: lucke

Comment:
Sollte nicht passieren. Da gibt es bei Dir eine alte Version von avcodec.h in der LIBAVCODEC_VERSION_INT < ((52<<16)+(0<<8)+0) definiert ist. Entferne die alten Header-Files von FFmpeg und rekonfiguriere und ?bersetzte softdevice neu.
Should not happen. There is an old version of avcodec.h on your system which defines LIBAVCODEC_VERSION_INT less than ((52<<16)+(0<<8)+0). Remove old FFmpeg headers and reconfigure and recompile softdevice.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14940&group_id=2051


From admin at berlios.de  Fri Dec 19 08:51:37 2008
From: admin at berlios.de (admin at berlios.de)
Date: Fri, 19 Dec 2008 08:51:37 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14940] undefined symbol: avcodec_build
Message-ID: <200812190751.mBJ7pblM015776@unicorn.berlios.de>

Bug #14940, was updated on 2008-Dec-18 15:28
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: None
Status: Open
Resolution: None
Bug Group: None
Priority: 5
Submitted by: erbse
Assigned to : lucke
Summary: undefined symbol: avcodec_build

Details: Hallo,

beim Start von vdr mit -psoftdevice -vo shm bekomme ich diese Fehlermeldung:

vdr starten: vdr: /usr/local/vdr/lib/libvdr-softdevice.so.1.6.0: undefined symbol: avcodec_build

FFmpeg und das Softdevice-Plugin habe ich jeweils aus der cvs gezogen (heute), bei ffmpeg bin ich nach der Anleitung aus dem VDR-Wiki (von der Softdevice-Seite) vorgegangen. Einziges Problem bei dieser Anleitung: bei ffmpeg geht "make install-lib" nicht, weil es anscheinend keine Regel daf?r im Makefile gibt. softdevice hat aber ohne Fehlermeldung kompiliert.

Gru? 
Erbse



Follow-Ups:

Date: 2008-Dec-19 08:51
By: erbse

Comment:
Yes I reran configure. 

I was not quite precise, the error occurs on starting "make all plugins" or "make install" in $SOURCEDIR (not when I start "make" in $SOURCEDIR/PLUGINS/src/softdevice)
-------------------------------------------------------

Date: 2008-Dec-19 00:42
By: lucke

Comment:
Did you rerun configure ?
error_recognition vs. error_resilience should be detected by configure since the last change on sept. 21 2008.
-------------------------------------------------------

Date: 2008-Dec-18 22:39
By: erbse

Comment:
Hi, thank you so much for replying so quickly. I eliminated all occurrencies of avcodec.h (I had thought I had deleted any former ffmpeg but indeed found one instance where I had not supected it) and eliminated an reincompiled ffmepg just to be sure.

I also recompiled softdevice but nos on starting "make" I get the following error:

-----------------

make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   utils.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   i18n.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   video.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   mpeg2decoder.c
mpeg2decoder.c: In constructor &#65533;cStreamDecoder::cStreamDecoder(AVCodecContext*, bool)&#65533;:
mpeg2decoder.c:146: Fehler: &#65533;struct AVCodecContext&#65533; hat kein Element namens &#65533;error_resilience&#65533;
make[1]: *** [mpeg2decoder.o] Fehler 1
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
Plugin status:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/status'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/status'
Plugin streamdev:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
Plugin svdrpdemo:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
Plugin vdrrip:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'

*** failed plugins: softdevice
--------

Hoping for further advice - good night
Erbse
-------------------------------------------------------

Date: 2008-Dec-18 18:23
By: lucke

Comment:
Sollte nicht passieren. Da gibt es bei Dir eine alte Version von avcodec.h in der LIBAVCODEC_VERSION_INT < ((52<<16)+(0<<8)+0) definiert ist. Entferne die alten Header-Files von FFmpeg und rekonfiguriere und ?bersetzte softdevice neu.
Should not happen. There is an old version of avcodec.h on your system which defines LIBAVCODEC_VERSION_INT less than ((52<<16)+(0<<8)+0). Remove old FFmpeg headers and reconfigure and recompile softdevice.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14940&group_id=2051


From admin at berlios.de  Fri Dec 19 11:14:04 2008
From: admin at berlios.de (admin at berlios.de)
Date: Fri, 19 Dec 2008 11:14:04 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14940] undefined symbol: avcodec_build
Message-ID: <200812191014.mBJAE4iI009811@unicorn.berlios.de>

Bug #14940, was updated on 2008-Dec-18 15:28
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: None
Status: Open
Resolution: None
Bug Group: None
Priority: 5
Submitted by: erbse
Assigned to : lucke
Summary: undefined symbol: avcodec_build

Details: Hallo,

beim Start von vdr mit -psoftdevice -vo shm bekomme ich diese Fehlermeldung:

vdr starten: vdr: /usr/local/vdr/lib/libvdr-softdevice.so.1.6.0: undefined symbol: avcodec_build

FFmpeg und das Softdevice-Plugin habe ich jeweils aus der cvs gezogen (heute), bei ffmpeg bin ich nach der Anleitung aus dem VDR-Wiki (von der Softdevice-Seite) vorgegangen. Einziges Problem bei dieser Anleitung: bei ffmpeg geht "make install-lib" nicht, weil es anscheinend keine Regel daf?r im Makefile gibt. softdevice hat aber ohne Fehlermeldung kompiliert.

Gru? 
Erbse



Follow-Ups:

Date: 2008-Dec-19 11:14
By: lucke

Comment:
I was not concerned about the directory of running your 'make plugins'. Our configure script checks for precence of member 'error_recognition' in struct 'AVCodecContext' which is declared in file (guess which): 'avcodec.h' .
Concluding backward: If this member is not detected, there is an old version of avcodec.h on your system which doesn't provide it (or and unexpected error happens) and 'error_resilience' will be used instead. Checking for this is logged via stdout and in config.log. Please attach/show both information.
-------------------------------------------------------

Date: 2008-Dec-19 08:51
By: erbse

Comment:
Yes I reran configure. 

I was not quite precise, the error occurs on starting "make all plugins" or "make install" in $SOURCEDIR (not when I start "make" in $SOURCEDIR/PLUGINS/src/softdevice)
-------------------------------------------------------

Date: 2008-Dec-19 00:42
By: lucke

Comment:
Did you rerun configure ?
error_recognition vs. error_resilience should be detected by configure since the last change on sept. 21 2008.
-------------------------------------------------------

Date: 2008-Dec-18 22:39
By: erbse

Comment:
Hi, thank you so much for replying so quickly. I eliminated all occurrencies of avcodec.h (I had thought I had deleted any former ffmpeg but indeed found one instance where I had not supected it) and eliminated an reincompiled ffmepg just to be sure.

I also recompiled softdevice but nos on starting "make" I get the following error:

-----------------

make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   utils.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   i18n.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   video.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   mpeg2decoder.c
mpeg2decoder.c: In constructor &#65533;cStreamDecoder::cStreamDecoder(AVCodecContext*, bool)&#65533;:
mpeg2decoder.c:146: Fehler: &#65533;struct AVCodecContext&#65533; hat kein Element namens &#65533;error_resilience&#65533;
make[1]: *** [mpeg2decoder.o] Fehler 1
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
Plugin status:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/status'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/status'
Plugin streamdev:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
Plugin svdrpdemo:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
Plugin vdrrip:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'

*** failed plugins: softdevice
--------

Hoping for further advice - good night
Erbse
-------------------------------------------------------

Date: 2008-Dec-18 18:23
By: lucke

Comment:
Sollte nicht passieren. Da gibt es bei Dir eine alte Version von avcodec.h in der LIBAVCODEC_VERSION_INT < ((52<<16)+(0<<8)+0) definiert ist. Entferne die alten Header-Files von FFmpeg und rekonfiguriere und ?bersetzte softdevice neu.
Should not happen. There is an old version of avcodec.h on your system which defines LIBAVCODEC_VERSION_INT less than ((52<<16)+(0<<8)+0). Remove old FFmpeg headers and reconfigure and recompile softdevice.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14940&group_id=2051


From admin at berlios.de  Fri Dec 19 14:43:00 2008
From: admin at berlios.de (admin at berlios.de)
Date: Fri, 19 Dec 2008 14:43:00 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14940] undefined symbol: avcodec_build
Message-ID: <200812191343.mBJDh0ts019646@unicorn.berlios.de>

Bug #14940, was updated on 2008-Dec-18 15:28
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: None
Status: Open
Resolution: None
Bug Group: None
Priority: 5
Submitted by: erbse
Assigned to : lucke
Summary: undefined symbol: avcodec_build

Details: Hallo,

beim Start von vdr mit -psoftdevice -vo shm bekomme ich diese Fehlermeldung:

vdr starten: vdr: /usr/local/vdr/lib/libvdr-softdevice.so.1.6.0: undefined symbol: avcodec_build

FFmpeg und das Softdevice-Plugin habe ich jeweils aus der cvs gezogen (heute), bei ffmpeg bin ich nach der Anleitung aus dem VDR-Wiki (von der Softdevice-Seite) vorgegangen. Einziges Problem bei dieser Anleitung: bei ffmpeg geht "make install-lib" nicht, weil es anscheinend keine Regel daf?r im Makefile gibt. softdevice hat aber ohne Fehlermeldung kompiliert.

Gru? 
Erbse



Follow-Ups:

Date: 2008-Dec-19 14:43
By: erbse

Comment:
Hi,

I installed some missing packages (e.g. alsa-devel) and the error disappeared. Unfortunately, on starting vdr I now get this:

vdr starten: softdevice: Got ctl_shmid 32769 shm ctl!
softdevice: Error attatching existing setupStore shm!
setupStoreShmId -1 setupStore (nil)
softdevice: Created setupStoreId 1146884!
softdevice: Attatched to setupStoreId 1146884 at 0xb7cc0000.
[softdevice] processing args
[softdevice]   argv [0] = softdevice
[softdevice]   argv [1] = -vo
[setup-softdevice] alsa ac3Mode set to: 0
[setup-softdevice] alsa AC3 device set to: 
[setup-softdevice] alsa device set to: 
[setup-softdevice] autodetectAspect 0
[setup-softdevice] A/V Offset set to (0)
[setup-softdevice] Cropping 0 lines from bottom
[setup-softdevice] Cropping 0 columns from left
[setup-softdevice] cropping mode set to 0 (none)
[setup-softdevice] cropping mode toggle key set to 0 (none)
[setup-softdevice] Cropping 0 columns from right
[setup-softdevice] Cropping 0 lines from top
[setup-softdevice] deinterlace method set to 0 none
[setup-softdevice] Expanding 0 columns at left and right
[setup-softdevice] Expanding 0 columns at top and bottom
[setup-softdevice] mainMenu: 1
[setup-softdevice] setting alpha blend mode to software
[softdevice] picture mirroring set to 0 (off)
[setup-softdevice] pixel format set to (I420)
[setup-softdevice] shouldSuspend to: 0
[setup-softdevice] syncTimerMode: sig
[softdevice] UseSetSourceRectangle to off
[softdevice] UseStretchBlitset to off
[setup-softdevice] vidBrightness: -1
[setup-softdevice] vidContrast: -1
[setup-softdevice] vidHue: -1
[setup-softdevice] vidSaturation: -1
[setup-softdevice] startup aspect set to (4:3 normal)
[softdevice] initializing Plugin
[softdevice] Initializing Video Out
[softdevice] ffmpeg build(3409664)
cShmVideoOut: Got ctl_shmid 32769 shm ctl!
[softdevice] Subplugin successfully opend
[softdevice] Video Out seems to be OK
[softdevice] Initializing Audio Out
E: client-conf-x11.c: XOpenDisplay() failed
*** PULSEAUDIO: Unable to connect: Connection refused

-------
Running ./configure produces this output:
---------
Testing system and cpu type... found Linux on i386 cpu.
Checking for pkg-config... Found.
Checking for ffmpeg... Ok.
Checking for ffmpeg/libswscale... Using libswscale.
Checking for pp_postprocess 1st arg ... is: const uint8_t **
Checking ffmpeg for member of AVCodecContext: error_recognition ...  'error_recognition' found
Checking for ALSA sound... Enabled audio-alsa.
Checking for OSS sound... Enabled audio-oss.
Checking for linux frambuffer... Enabled video-fb.
Checking for yaepg patch... Not Found.
Checking for DirectFB and DFB++... Not Found.
Checking for vidix... Enabled video-out vidix.
Checking for Xv... Enabled video-xv.
Checking for Xinerama... Enabled Xinerama.
Creating temporary config.h and config.mak
config.h is unchanged
config.mak is unchanged
Configure is finished. Please check config.log in case of problems.
-----------
latest config.log:
-----------
Parameters ''
PKG_CONFIG_PATH 'lib-dir/pkgconfig:datadir/pkgconfig:/home/local/lib/pkgconfig:/usr/local/lib/pkgconfig'
Testing system and cpu type.----------------------------
uname -a: Linux gondor.npg.net 2.6.25.9-40.fc8 #1 SMP Fri Jun 27 16:25:53 EDT 2008 i686 i686 i386 GNU/Linux
g++ -dumpmache: i386-redhat-linux
Checking for pkg-config.-------------------------------
0.22
Checking for ffmpeg.------------------------------------
try to use pkg-config.
-L/usr/local/lib -lpostproc  
/tmp/softdevice-conf-16396-3314-21938.c:4:21: Fehler: avcodec.h: Datei oder Verzeichnis nicht gefunden
/usr/local/include/avio.h:114: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:115: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:125: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/avio.h:134: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:135: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:140: Fehler: ?uint64_t? wurde nicht deklariert
/usr/local/include/avio.h:141: Fehler: ?uint64_t? wurde nicht deklariert
/usr/local/include/avio.h:184: Fehler: ?uint64_t? bezeichnet keinen Typ
/usr/local/include/avio.h:191: Fehler: ?uint64_t? bezeichnet keinen Typ
/usr/local/include/avio.h:219: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:250: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:253: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/avformat.h:41: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h: In function ?void av_init_packet(AVPacket*)?:
/usr/local/include/avformat.h:62: Fehler: ?AV_NOPTS_VALUE? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/avformat.h: At global scope:
/usr/local/include/avformat.h:117: Fehler: expected initializer before ?attribute_deprecated?
/usr/local/include/avformat.h:137: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:142: Fehler: Verwendung des enum ?PixelFormat? ohne vorherige Deklaration
/usr/local/include/avformat.h:155: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:156: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:177: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:178: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:274: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:283: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:299: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:303: Fehler: Verwendung des enum ?AVDiscard? ohne vorherige Deklaration
/usr/local/include/avformat.h:341: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:385: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:416: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:428: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:428: Fehler: invalid type in declaration before ?;? token
/usr/local/include/rtp.h:28: Fehler: ?AVCodecContext? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:28: Fehler: ?codec? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:28: Fehler: expected primary-expression before ?int?
/usr/local/include/rtp.h:28: Fehler: initializer Ausdrucksliste als zusammengesetzten Ausdruck behandelt
/usr/local/include/rtp.h:31: Fehler: ?AVCodecContext? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:31: Fehler: ?codec? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:37: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/rtp.h:95: Fehler: Verwendung des enum ?CodecType? ohne vorherige Deklaration
/usr/local/include/rtp.h:96: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/rtsp.h:46: Fehler: ?uint32_t? bezeichnet keinen Typ
/usr/local/include/rtsp.h:70: Fehler: ?uint32_t? bezeichnet keinen Typ
/usr/local/include/avformat.h:448: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:449: Fehler: Verwendung des enum ?CodecType? ohne vorherige Deklaration
/usr/local/include/avformat.h:449: Fehler: invalid type in declaration before ?;? token
/usr/local/include/avformat.h:460: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avformat.h:474: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avformat.h:500: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:500: Fehler: invalid type in declaration before ?;? token
/usr/local/include/avformat.h:501: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/tmp/softdevice-conf-16396-3314-21938.c: In function ?int main()?:
/tmp/softdevice-conf-16396-3314-21938.c:8: Fehler: ?avcodec_init? wurde in diesem G?ltigkeitsbereich nicht definiert
/tmp/softdevice-conf-16396-3314-21938.c:9: Fehler: ?avcodec_register_all? wurde in diesem G?ltigkeitsbereich nicht definiert
Checking for ffmpeg/libswscale.------------------------------------
Checking for pp_postprocess 1st arg. -----
Checking ffmpeg for member of AVCodecContext: error_recognition ----
Checking for ALSA sound.------------------
Checking for OSS sound.------------------
Checking for linux framebuffer.------------------
Checking for yaepg patch.------------------
g++ -O2 -g -Wall  -D_GNU_SOURCE -I../../.. -c -o /tmp/softdevice-conf-18340-3314-12704 /tmp/softdevice-conf-16396-3314-21938.c >> config.log 2>&1
/tmp/softdevice-conf-16396-3314-21938.c: In function ?int test_func(cOsd*)?:
/tmp/softdevice-conf-16396-3314-21938.c:3: Fehler: ?class cOsd? hat kein Element namens ?vidWin?
make: *** [/tmp/softdevice-conf-18340-3314-12704] Fehler 1
Checking for DirectFB and DFB++.------------------
Package dfb++ was not found in the pkg-config search path.
Perhaps you should add the directory containing `dfb++.pc'
to the PKG_CONFIG_PATH environment variable
No package 'dfb++' found
Checking for vidix.------------------------
Checking for Xv.-----------------------------
Checking for Xinerama.-----------------------------
-------------

Obviously avcodec.h is not found, but it exists in /usr/local/include/libavcodec
(but then why does it compile at all?)

I eliminated all existing avcodec.h on my system and reinstalled ffmpeg yesterday (from cvs)

???

Thanks!



-------------------------------------------------------

Date: 2008-Dec-19 11:14
By: lucke

Comment:
I was not concerned about the directory of running your 'make plugins'. Our configure script checks for precence of member 'error_recognition' in struct 'AVCodecContext' which is declared in file (guess which): 'avcodec.h' .
Concluding backward: If this member is not detected, there is an old version of avcodec.h on your system which doesn't provide it (or and unexpected error happens) and 'error_resilience' will be used instead. Checking for this is logged via stdout and in config.log. Please attach/show both information.
-------------------------------------------------------

Date: 2008-Dec-19 08:51
By: erbse

Comment:
Yes I reran configure. 

I was not quite precise, the error occurs on starting "make all plugins" or "make install" in $SOURCEDIR (not when I start "make" in $SOURCEDIR/PLUGINS/src/softdevice)
-------------------------------------------------------

Date: 2008-Dec-19 00:42
By: lucke

Comment:
Did you rerun configure ?
error_recognition vs. error_resilience should be detected by configure since the last change on sept. 21 2008.
-------------------------------------------------------

Date: 2008-Dec-18 22:39
By: erbse

Comment:
Hi, thank you so much for replying so quickly. I eliminated all occurrencies of avcodec.h (I had thought I had deleted any former ffmpeg but indeed found one instance where I had not supected it) and eliminated an reincompiled ffmepg just to be sure.

I also recompiled softdevice but nos on starting "make" I get the following error:

-----------------

make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   utils.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   i18n.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   video.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   mpeg2decoder.c
mpeg2decoder.c: In constructor &#65533;cStreamDecoder::cStreamDecoder(AVCodecContext*, bool)&#65533;:
mpeg2decoder.c:146: Fehler: &#65533;struct AVCodecContext&#65533; hat kein Element namens &#65533;error_resilience&#65533;
make[1]: *** [mpeg2decoder.o] Fehler 1
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
Plugin status:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/status'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/status'
Plugin streamdev:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
Plugin svdrpdemo:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
Plugin vdrrip:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'

*** failed plugins: softdevice
--------

Hoping for further advice - good night
Erbse
-------------------------------------------------------

Date: 2008-Dec-18 18:23
By: lucke

Comment:
Sollte nicht passieren. Da gibt es bei Dir eine alte Version von avcodec.h in der LIBAVCODEC_VERSION_INT < ((52<<16)+(0<<8)+0) definiert ist. Entferne die alten Header-Files von FFmpeg und rekonfiguriere und ?bersetzte softdevice neu.
Should not happen. There is an old version of avcodec.h on your system which defines LIBAVCODEC_VERSION_INT less than ((52<<16)+(0<<8)+0). Remove old FFmpeg headers and reconfigure and recompile softdevice.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14940&group_id=2051


From admin at berlios.de  Fri Dec 19 15:10:10 2008
From: admin at berlios.de (admin at berlios.de)
Date: Fri, 19 Dec 2008 15:10:10 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14940] undefined symbol: avcodec_build
Message-ID: <200812191410.mBJEAAjd006155@unicorn.berlios.de>

Bug #14940, was updated on 2008-Dec-18 15:28
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: None
Status: Open
Resolution: None
Bug Group: None
Priority: 5
Submitted by: erbse
Assigned to : lucke
Summary: undefined symbol: avcodec_build

Details: Hallo,

beim Start von vdr mit -psoftdevice -vo shm bekomme ich diese Fehlermeldung:

vdr starten: vdr: /usr/local/vdr/lib/libvdr-softdevice.so.1.6.0: undefined symbol: avcodec_build

FFmpeg und das Softdevice-Plugin habe ich jeweils aus der cvs gezogen (heute), bei ffmpeg bin ich nach der Anleitung aus dem VDR-Wiki (von der Softdevice-Seite) vorgegangen. Einziges Problem bei dieser Anleitung: bei ffmpeg geht "make install-lib" nicht, weil es anscheinend keine Regel daf?r im Makefile gibt. softdevice hat aber ohne Fehlermeldung kompiliert.

Gru? 
Erbse



Follow-Ups:

Date: 2008-Dec-19 15:10
By: erbse

Comment:
Update:
I copied the files  from /usr/local/include/libavutil/, .../libavformat, .../libavcodec and .../postproc to /usr/local/include/

Config.log looks better now, at least the headers are being found:

-------
Parameters ''
PKG_CONFIG_PATH 'lib-dir/pkgconfig:datadir/pkgconfig:/home/local/lib/pkgconfig:/usr/local/lib/pkgconfig'
Testing system and cpu type.----------------------------
uname -a: Linux gondor.npg.net 2.6.25.9-40.fc8 #1 SMP Fri Jun 27 16:25:53 EDT 2008 i686 i686 i386 GNU/Linux
g++ -dumpmache: i386-redhat-linux
Checking for pkg-config.-------------------------------
0.22
Checking for ffmpeg.------------------------------------
try to use pkg-config.
-L/usr/local/lib -lpostproc  
Checking for ffmpeg/libswscale.------------------------------------
Checking for pp_postprocess 1st arg. -----
Checking ffmpeg for member of AVCodecContext: error_recognition ----
Checking for ALSA sound.------------------
Checking for OSS sound.------------------
Checking for linux framebuffer.------------------
Checking for yaepg patch.------------------
g++ -O2 -g -Wall  -D_GNU_SOURCE -I../../.. -c -o /tmp/softdevice-conf-24189-3967-19141 /tmp/softdevice-conf-12946-3967-4906.c >> config.log 2>&1
/tmp/softdevice-conf-12946-3967-4906.c: In function ?int test_func(cOsd*)?:
/tmp/softdevice-conf-12946-3967-4906.c:3: Fehler: ?class cOsd? hat kein Element namens ?vidWin?
make: *** [/tmp/softdevice-conf-24189-3967-19141] Fehler 1
Checking for DirectFB and DFB++.------------------
Package dfb++ was not found in the pkg-config search path.
Perhaps you should add the directory containing `dfb++.pc'
to the PKG_CONFIG_PATH environment variable
No package 'dfb++' found
Checking for vidix.------------------------
Checking for Xv.-----------------------------
Checking for Xinerama.-----------------------------
--------------------
output of ./configure :

Testing system and cpu type... found Linux on i386 cpu.
Checking for pkg-config... Found.
Checking for ffmpeg... Ok.
Checking for ffmpeg/libswscale... Using libswscale.
Checking for pp_postprocess 1st arg ... is: const uint8_t **
Checking ffmpeg for member of AVCodecContext: error_recognition ...  'error_recognition' found
Checking for ALSA sound... Enabled audio-alsa.
Checking for OSS sound... Enabled audio-oss.
Checking for linux frambuffer... Enabled video-fb.
Checking for yaepg patch... Not Found.
Checking for DirectFB and DFB++... Not Found.
Checking for vidix... Enabled video-out vidix.
Checking for Xv... Enabled video-xv.
Checking for Xinerama... Enabled Xinerama.
Creating temporary config.h and config.mak
config.h is unchanged
config.mak is unchanged
Configure is finished. Please check config.log in case of problems.
--------------
vdr startup output:
vdr starten: softdevice: Got ctl_shmid 32769 shm ctl!
softdevice: Error attatching existing setupStore shm!
setupStoreShmId -1 setupStore (nil)
softdevice: Created setupStoreId 1212420!
softdevice: Attatched to setupStoreId 1212420 at 0xb7d64000.
[softdevice] processing args
[softdevice]   argv [0] = softdevice
[softdevice]   argv [1] = -vo
[setup-softdevice] alsa ac3Mode set to: 0
[setup-softdevice] alsa AC3 device set to: 
[setup-softdevice] alsa device set to: 
[setup-softdevice] autodetectAspect 0
[setup-softdevice] A/V Offset set to (0)
[setup-softdevice] Cropping 0 lines from bottom
[setup-softdevice] Cropping 0 columns from left
[setup-softdevice] cropping mode set to 0 (none)
[setup-softdevice] cropping mode toggle key set to 0 (none)
[setup-softdevice] Cropping 0 columns from right
[setup-softdevice] Cropping 0 lines from top
[setup-softdevice] deinterlace method set to 0 none
[setup-softdevice] Expanding 0 columns at left and right
[setup-softdevice] Expanding 0 columns at top and bottom
[setup-softdevice] mainMenu: 1
[setup-softdevice] setting alpha blend mode to software
[softdevice] picture mirroring set to 0 (off)
[setup-softdevice] pixel format set to (I420)
[setup-softdevice] shouldSuspend to: 0
[setup-softdevice] syncTimerMode: sig
[softdevice] UseSetSourceRectangle to off
[softdevice] UseStretchBlitset to off
[setup-softdevice] vidBrightness: -1
[setup-softdevice] vidContrast: -1
[setup-softdevice] vidHue: -1
[setup-softdevice] vidSaturation: -1
[setup-softdevice] startup aspect set to (4:3 normal)
[softdevice] initializing Plugin
[softdevice] Initializing Video Out
[softdevice] ffmpeg build(3409664)
cShmVideoOut: Got ctl_shmid 32769 shm ctl!
[softdevice] Subplugin successfully opend
[softdevice] Video Out seems to be OK
[softdevice] Initializing Audio Out
E: client-conf-x11.c: XOpenDisplay() failed
*** PULSEAUDIO: Unable to connect: Connection refused
                                                           [FEHLGESCHLAGEN]




-------------------------------------------------------

Date: 2008-Dec-19 14:43
By: erbse

Comment:
Hi,

I installed some missing packages (e.g. alsa-devel) and the error disappeared. Unfortunately, on starting vdr I now get this:

vdr starten: softdevice: Got ctl_shmid 32769 shm ctl!
softdevice: Error attatching existing setupStore shm!
setupStoreShmId -1 setupStore (nil)
softdevice: Created setupStoreId 1146884!
softdevice: Attatched to setupStoreId 1146884 at 0xb7cc0000.
[softdevice] processing args
[softdevice]   argv [0] = softdevice
[softdevice]   argv [1] = -vo
[setup-softdevice] alsa ac3Mode set to: 0
[setup-softdevice] alsa AC3 device set to: 
[setup-softdevice] alsa device set to: 
[setup-softdevice] autodetectAspect 0
[setup-softdevice] A/V Offset set to (0)
[setup-softdevice] Cropping 0 lines from bottom
[setup-softdevice] Cropping 0 columns from left
[setup-softdevice] cropping mode set to 0 (none)
[setup-softdevice] cropping mode toggle key set to 0 (none)
[setup-softdevice] Cropping 0 columns from right
[setup-softdevice] Cropping 0 lines from top
[setup-softdevice] deinterlace method set to 0 none
[setup-softdevice] Expanding 0 columns at left and right
[setup-softdevice] Expanding 0 columns at top and bottom
[setup-softdevice] mainMenu: 1
[setup-softdevice] setting alpha blend mode to software
[softdevice] picture mirroring set to 0 (off)
[setup-softdevice] pixel format set to (I420)
[setup-softdevice] shouldSuspend to: 0
[setup-softdevice] syncTimerMode: sig
[softdevice] UseSetSourceRectangle to off
[softdevice] UseStretchBlitset to off
[setup-softdevice] vidBrightness: -1
[setup-softdevice] vidContrast: -1
[setup-softdevice] vidHue: -1
[setup-softdevice] vidSaturation: -1
[setup-softdevice] startup aspect set to (4:3 normal)
[softdevice] initializing Plugin
[softdevice] Initializing Video Out
[softdevice] ffmpeg build(3409664)
cShmVideoOut: Got ctl_shmid 32769 shm ctl!
[softdevice] Subplugin successfully opend
[softdevice] Video Out seems to be OK
[softdevice] Initializing Audio Out
E: client-conf-x11.c: XOpenDisplay() failed
*** PULSEAUDIO: Unable to connect: Connection refused

-------
Running ./configure produces this output:
---------
Testing system and cpu type... found Linux on i386 cpu.
Checking for pkg-config... Found.
Checking for ffmpeg... Ok.
Checking for ffmpeg/libswscale... Using libswscale.
Checking for pp_postprocess 1st arg ... is: const uint8_t **
Checking ffmpeg for member of AVCodecContext: error_recognition ...  'error_recognition' found
Checking for ALSA sound... Enabled audio-alsa.
Checking for OSS sound... Enabled audio-oss.
Checking for linux frambuffer... Enabled video-fb.
Checking for yaepg patch... Not Found.
Checking for DirectFB and DFB++... Not Found.
Checking for vidix... Enabled video-out vidix.
Checking for Xv... Enabled video-xv.
Checking for Xinerama... Enabled Xinerama.
Creating temporary config.h and config.mak
config.h is unchanged
config.mak is unchanged
Configure is finished. Please check config.log in case of problems.
-----------
latest config.log:
-----------
Parameters ''
PKG_CONFIG_PATH 'lib-dir/pkgconfig:datadir/pkgconfig:/home/local/lib/pkgconfig:/usr/local/lib/pkgconfig'
Testing system and cpu type.----------------------------
uname -a: Linux gondor.npg.net 2.6.25.9-40.fc8 #1 SMP Fri Jun 27 16:25:53 EDT 2008 i686 i686 i386 GNU/Linux
g++ -dumpmache: i386-redhat-linux
Checking for pkg-config.-------------------------------
0.22
Checking for ffmpeg.------------------------------------
try to use pkg-config.
-L/usr/local/lib -lpostproc  
/tmp/softdevice-conf-16396-3314-21938.c:4:21: Fehler: avcodec.h: Datei oder Verzeichnis nicht gefunden
/usr/local/include/avio.h:114: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:115: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:125: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/avio.h:134: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:135: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:140: Fehler: ?uint64_t? wurde nicht deklariert
/usr/local/include/avio.h:141: Fehler: ?uint64_t? wurde nicht deklariert
/usr/local/include/avio.h:184: Fehler: ?uint64_t? bezeichnet keinen Typ
/usr/local/include/avio.h:191: Fehler: ?uint64_t? bezeichnet keinen Typ
/usr/local/include/avio.h:219: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:250: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:253: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/avformat.h:41: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h: In function ?void av_init_packet(AVPacket*)?:
/usr/local/include/avformat.h:62: Fehler: ?AV_NOPTS_VALUE? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/avformat.h: At global scope:
/usr/local/include/avformat.h:117: Fehler: expected initializer before ?attribute_deprecated?
/usr/local/include/avformat.h:137: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:142: Fehler: Verwendung des enum ?PixelFormat? ohne vorherige Deklaration
/usr/local/include/avformat.h:155: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:156: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:177: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:178: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:274: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:283: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:299: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:303: Fehler: Verwendung des enum ?AVDiscard? ohne vorherige Deklaration
/usr/local/include/avformat.h:341: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:385: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:416: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:428: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:428: Fehler: invalid type in declaration before ?;? token
/usr/local/include/rtp.h:28: Fehler: ?AVCodecContext? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:28: Fehler: ?codec? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:28: Fehler: expected primary-expression before ?int?
/usr/local/include/rtp.h:28: Fehler: initializer Ausdrucksliste als zusammengesetzten Ausdruck behandelt
/usr/local/include/rtp.h:31: Fehler: ?AVCodecContext? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:31: Fehler: ?codec? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:37: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/rtp.h:95: Fehler: Verwendung des enum ?CodecType? ohne vorherige Deklaration
/usr/local/include/rtp.h:96: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/rtsp.h:46: Fehler: ?uint32_t? bezeichnet keinen Typ
/usr/local/include/rtsp.h:70: Fehler: ?uint32_t? bezeichnet keinen Typ
/usr/local/include/avformat.h:448: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:449: Fehler: Verwendung des enum ?CodecType? ohne vorherige Deklaration
/usr/local/include/avformat.h:449: Fehler: invalid type in declaration before ?;? token
/usr/local/include/avformat.h:460: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avformat.h:474: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avformat.h:500: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:500: Fehler: invalid type in declaration before ?;? token
/usr/local/include/avformat.h:501: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/tmp/softdevice-conf-16396-3314-21938.c: In function ?int main()?:
/tmp/softdevice-conf-16396-3314-21938.c:8: Fehler: ?avcodec_init? wurde in diesem G?ltigkeitsbereich nicht definiert
/tmp/softdevice-conf-16396-3314-21938.c:9: Fehler: ?avcodec_register_all? wurde in diesem G?ltigkeitsbereich nicht definiert
Checking for ffmpeg/libswscale.------------------------------------
Checking for pp_postprocess 1st arg. -----
Checking ffmpeg for member of AVCodecContext: error_recognition ----
Checking for ALSA sound.------------------
Checking for OSS sound.------------------
Checking for linux framebuffer.------------------
Checking for yaepg patch.------------------
g++ -O2 -g -Wall  -D_GNU_SOURCE -I../../.. -c -o /tmp/softdevice-conf-18340-3314-12704 /tmp/softdevice-conf-16396-3314-21938.c >> config.log 2>&1
/tmp/softdevice-conf-16396-3314-21938.c: In function ?int test_func(cOsd*)?:
/tmp/softdevice-conf-16396-3314-21938.c:3: Fehler: ?class cOsd? hat kein Element namens ?vidWin?
make: *** [/tmp/softdevice-conf-18340-3314-12704] Fehler 1
Checking for DirectFB and DFB++.------------------
Package dfb++ was not found in the pkg-config search path.
Perhaps you should add the directory containing `dfb++.pc'
to the PKG_CONFIG_PATH environment variable
No package 'dfb++' found
Checking for vidix.------------------------
Checking for Xv.-----------------------------
Checking for Xinerama.-----------------------------
-------------

Obviously avcodec.h is not found, but it exists in /usr/local/include/libavcodec
(but then why does it compile at all?)

I eliminated all existing avcodec.h on my system and reinstalled ffmpeg yesterday (from cvs)

???

Thanks!



-------------------------------------------------------

Date: 2008-Dec-19 11:14
By: lucke

Comment:
I was not concerned about the directory of running your 'make plugins'. Our configure script checks for precence of member 'error_recognition' in struct 'AVCodecContext' which is declared in file (guess which): 'avcodec.h' .
Concluding backward: If this member is not detected, there is an old version of avcodec.h on your system which doesn't provide it (or and unexpected error happens) and 'error_resilience' will be used instead. Checking for this is logged via stdout and in config.log. Please attach/show both information.
-------------------------------------------------------

Date: 2008-Dec-19 08:51
By: erbse

Comment:
Yes I reran configure. 

I was not quite precise, the error occurs on starting "make all plugins" or "make install" in $SOURCEDIR (not when I start "make" in $SOURCEDIR/PLUGINS/src/softdevice)
-------------------------------------------------------

Date: 2008-Dec-19 00:42
By: lucke

Comment:
Did you rerun configure ?
error_recognition vs. error_resilience should be detected by configure since the last change on sept. 21 2008.
-------------------------------------------------------

Date: 2008-Dec-18 22:39
By: erbse

Comment:
Hi, thank you so much for replying so quickly. I eliminated all occurrencies of avcodec.h (I had thought I had deleted any former ffmpeg but indeed found one instance where I had not supected it) and eliminated an reincompiled ffmepg just to be sure.

I also recompiled softdevice but nos on starting "make" I get the following error:

-----------------

make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   utils.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   i18n.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   video.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   mpeg2decoder.c
mpeg2decoder.c: In constructor &#65533;cStreamDecoder::cStreamDecoder(AVCodecContext*, bool)&#65533;:
mpeg2decoder.c:146: Fehler: &#65533;struct AVCodecContext&#65533; hat kein Element namens &#65533;error_resilience&#65533;
make[1]: *** [mpeg2decoder.o] Fehler 1
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
Plugin status:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/status'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/status'
Plugin streamdev:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
Plugin svdrpdemo:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
Plugin vdrrip:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'

*** failed plugins: softdevice
--------

Hoping for further advice - good night
Erbse
-------------------------------------------------------

Date: 2008-Dec-18 18:23
By: lucke

Comment:
Sollte nicht passieren. Da gibt es bei Dir eine alte Version von avcodec.h in der LIBAVCODEC_VERSION_INT < ((52<<16)+(0<<8)+0) definiert ist. Entferne die alten Header-Files von FFmpeg und rekonfiguriere und ?bersetzte softdevice neu.
Should not happen. There is an old version of avcodec.h on your system which defines LIBAVCODEC_VERSION_INT less than ((52<<16)+(0<<8)+0). Remove old FFmpeg headers and reconfigure and recompile softdevice.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14940&group_id=2051


From admin at berlios.de  Sat Dec 20 10:57:45 2008
From: admin at berlios.de (admin at berlios.de)
Date: Sat, 20 Dec 2008 10:57:45 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14940] undefined symbol: avcodec_build
Message-ID: <200812200957.mBK9vj0O001774@unicorn.berlios.de>

Bug #14940, was updated on 2008-Dec-18 15:28
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: None
Status: Open
Resolution: None
Bug Group: None
Priority: 5
Submitted by: erbse
Assigned to : lucke
Summary: undefined symbol: avcodec_build

Details: Hallo,

beim Start von vdr mit -psoftdevice -vo shm bekomme ich diese Fehlermeldung:

vdr starten: vdr: /usr/local/vdr/lib/libvdr-softdevice.so.1.6.0: undefined symbol: avcodec_build

FFmpeg und das Softdevice-Plugin habe ich jeweils aus der cvs gezogen (heute), bei ffmpeg bin ich nach der Anleitung aus dem VDR-Wiki (von der Softdevice-Seite) vorgegangen. Einziges Problem bei dieser Anleitung: bei ffmpeg geht "make install-lib" nicht, weil es anscheinend keine Regel daf?r im Makefile gibt. softdevice hat aber ohne Fehlermeldung kompiliert.

Gru? 
Erbse



Follow-Ups:

Date: 2008-Dec-20 10:57
By: erbse

Comment:
I should have added that vdr runs on a headless server without X.
But that was never a Problem before and softdevice ran fine with vdr -Psoftdevice -vo shm. Problems began only when I updated ffmpeg (via yum) 
-------------------------------------------------------

Date: 2008-Dec-19 15:10
By: erbse

Comment:
Update:
I copied the files  from /usr/local/include/libavutil/, .../libavformat, .../libavcodec and .../postproc to /usr/local/include/

Config.log looks better now, at least the headers are being found:

-------
Parameters ''
PKG_CONFIG_PATH 'lib-dir/pkgconfig:datadir/pkgconfig:/home/local/lib/pkgconfig:/usr/local/lib/pkgconfig'
Testing system and cpu type.----------------------------
uname -a: Linux gondor.npg.net 2.6.25.9-40.fc8 #1 SMP Fri Jun 27 16:25:53 EDT 2008 i686 i686 i386 GNU/Linux
g++ -dumpmache: i386-redhat-linux
Checking for pkg-config.-------------------------------
0.22
Checking for ffmpeg.------------------------------------
try to use pkg-config.
-L/usr/local/lib -lpostproc  
Checking for ffmpeg/libswscale.------------------------------------
Checking for pp_postprocess 1st arg. -----
Checking ffmpeg for member of AVCodecContext: error_recognition ----
Checking for ALSA sound.------------------
Checking for OSS sound.------------------
Checking for linux framebuffer.------------------
Checking for yaepg patch.------------------
g++ -O2 -g -Wall  -D_GNU_SOURCE -I../../.. -c -o /tmp/softdevice-conf-24189-3967-19141 /tmp/softdevice-conf-12946-3967-4906.c >> config.log 2>&1
/tmp/softdevice-conf-12946-3967-4906.c: In function ?int test_func(cOsd*)?:
/tmp/softdevice-conf-12946-3967-4906.c:3: Fehler: ?class cOsd? hat kein Element namens ?vidWin?
make: *** [/tmp/softdevice-conf-24189-3967-19141] Fehler 1
Checking for DirectFB and DFB++.------------------
Package dfb++ was not found in the pkg-config search path.
Perhaps you should add the directory containing `dfb++.pc'
to the PKG_CONFIG_PATH environment variable
No package 'dfb++' found
Checking for vidix.------------------------
Checking for Xv.-----------------------------
Checking for Xinerama.-----------------------------
--------------------
output of ./configure :

Testing system and cpu type... found Linux on i386 cpu.
Checking for pkg-config... Found.
Checking for ffmpeg... Ok.
Checking for ffmpeg/libswscale... Using libswscale.
Checking for pp_postprocess 1st arg ... is: const uint8_t **
Checking ffmpeg for member of AVCodecContext: error_recognition ...  'error_recognition' found
Checking for ALSA sound... Enabled audio-alsa.
Checking for OSS sound... Enabled audio-oss.
Checking for linux frambuffer... Enabled video-fb.
Checking for yaepg patch... Not Found.
Checking for DirectFB and DFB++... Not Found.
Checking for vidix... Enabled video-out vidix.
Checking for Xv... Enabled video-xv.
Checking for Xinerama... Enabled Xinerama.
Creating temporary config.h and config.mak
config.h is unchanged
config.mak is unchanged
Configure is finished. Please check config.log in case of problems.
--------------
vdr startup output:
vdr starten: softdevice: Got ctl_shmid 32769 shm ctl!
softdevice: Error attatching existing setupStore shm!
setupStoreShmId -1 setupStore (nil)
softdevice: Created setupStoreId 1212420!
softdevice: Attatched to setupStoreId 1212420 at 0xb7d64000.
[softdevice] processing args
[softdevice]   argv [0] = softdevice
[softdevice]   argv [1] = -vo
[setup-softdevice] alsa ac3Mode set to: 0
[setup-softdevice] alsa AC3 device set to: 
[setup-softdevice] alsa device set to: 
[setup-softdevice] autodetectAspect 0
[setup-softdevice] A/V Offset set to (0)
[setup-softdevice] Cropping 0 lines from bottom
[setup-softdevice] Cropping 0 columns from left
[setup-softdevice] cropping mode set to 0 (none)
[setup-softdevice] cropping mode toggle key set to 0 (none)
[setup-softdevice] Cropping 0 columns from right
[setup-softdevice] Cropping 0 lines from top
[setup-softdevice] deinterlace method set to 0 none
[setup-softdevice] Expanding 0 columns at left and right
[setup-softdevice] Expanding 0 columns at top and bottom
[setup-softdevice] mainMenu: 1
[setup-softdevice] setting alpha blend mode to software
[softdevice] picture mirroring set to 0 (off)
[setup-softdevice] pixel format set to (I420)
[setup-softdevice] shouldSuspend to: 0
[setup-softdevice] syncTimerMode: sig
[softdevice] UseSetSourceRectangle to off
[softdevice] UseStretchBlitset to off
[setup-softdevice] vidBrightness: -1
[setup-softdevice] vidContrast: -1
[setup-softdevice] vidHue: -1
[setup-softdevice] vidSaturation: -1
[setup-softdevice] startup aspect set to (4:3 normal)
[softdevice] initializing Plugin
[softdevice] Initializing Video Out
[softdevice] ffmpeg build(3409664)
cShmVideoOut: Got ctl_shmid 32769 shm ctl!
[softdevice] Subplugin successfully opend
[softdevice] Video Out seems to be OK
[softdevice] Initializing Audio Out
E: client-conf-x11.c: XOpenDisplay() failed
*** PULSEAUDIO: Unable to connect: Connection refused
                                                           [FEHLGESCHLAGEN]




-------------------------------------------------------

Date: 2008-Dec-19 14:43
By: erbse

Comment:
Hi,

I installed some missing packages (e.g. alsa-devel) and the error disappeared. Unfortunately, on starting vdr I now get this:

vdr starten: softdevice: Got ctl_shmid 32769 shm ctl!
softdevice: Error attatching existing setupStore shm!
setupStoreShmId -1 setupStore (nil)
softdevice: Created setupStoreId 1146884!
softdevice: Attatched to setupStoreId 1146884 at 0xb7cc0000.
[softdevice] processing args
[softdevice]   argv [0] = softdevice
[softdevice]   argv [1] = -vo
[setup-softdevice] alsa ac3Mode set to: 0
[setup-softdevice] alsa AC3 device set to: 
[setup-softdevice] alsa device set to: 
[setup-softdevice] autodetectAspect 0
[setup-softdevice] A/V Offset set to (0)
[setup-softdevice] Cropping 0 lines from bottom
[setup-softdevice] Cropping 0 columns from left
[setup-softdevice] cropping mode set to 0 (none)
[setup-softdevice] cropping mode toggle key set to 0 (none)
[setup-softdevice] Cropping 0 columns from right
[setup-softdevice] Cropping 0 lines from top
[setup-softdevice] deinterlace method set to 0 none
[setup-softdevice] Expanding 0 columns at left and right
[setup-softdevice] Expanding 0 columns at top and bottom
[setup-softdevice] mainMenu: 1
[setup-softdevice] setting alpha blend mode to software
[softdevice] picture mirroring set to 0 (off)
[setup-softdevice] pixel format set to (I420)
[setup-softdevice] shouldSuspend to: 0
[setup-softdevice] syncTimerMode: sig
[softdevice] UseSetSourceRectangle to off
[softdevice] UseStretchBlitset to off
[setup-softdevice] vidBrightness: -1
[setup-softdevice] vidContrast: -1
[setup-softdevice] vidHue: -1
[setup-softdevice] vidSaturation: -1
[setup-softdevice] startup aspect set to (4:3 normal)
[softdevice] initializing Plugin
[softdevice] Initializing Video Out
[softdevice] ffmpeg build(3409664)
cShmVideoOut: Got ctl_shmid 32769 shm ctl!
[softdevice] Subplugin successfully opend
[softdevice] Video Out seems to be OK
[softdevice] Initializing Audio Out
E: client-conf-x11.c: XOpenDisplay() failed
*** PULSEAUDIO: Unable to connect: Connection refused

-------
Running ./configure produces this output:
---------
Testing system and cpu type... found Linux on i386 cpu.
Checking for pkg-config... Found.
Checking for ffmpeg... Ok.
Checking for ffmpeg/libswscale... Using libswscale.
Checking for pp_postprocess 1st arg ... is: const uint8_t **
Checking ffmpeg for member of AVCodecContext: error_recognition ...  'error_recognition' found
Checking for ALSA sound... Enabled audio-alsa.
Checking for OSS sound... Enabled audio-oss.
Checking for linux frambuffer... Enabled video-fb.
Checking for yaepg patch... Not Found.
Checking for DirectFB and DFB++... Not Found.
Checking for vidix... Enabled video-out vidix.
Checking for Xv... Enabled video-xv.
Checking for Xinerama... Enabled Xinerama.
Creating temporary config.h and config.mak
config.h is unchanged
config.mak is unchanged
Configure is finished. Please check config.log in case of problems.
-----------
latest config.log:
-----------
Parameters ''
PKG_CONFIG_PATH 'lib-dir/pkgconfig:datadir/pkgconfig:/home/local/lib/pkgconfig:/usr/local/lib/pkgconfig'
Testing system and cpu type.----------------------------
uname -a: Linux gondor.npg.net 2.6.25.9-40.fc8 #1 SMP Fri Jun 27 16:25:53 EDT 2008 i686 i686 i386 GNU/Linux
g++ -dumpmache: i386-redhat-linux
Checking for pkg-config.-------------------------------
0.22
Checking for ffmpeg.------------------------------------
try to use pkg-config.
-L/usr/local/lib -lpostproc  
/tmp/softdevice-conf-16396-3314-21938.c:4:21: Fehler: avcodec.h: Datei oder Verzeichnis nicht gefunden
/usr/local/include/avio.h:114: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:115: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:125: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/avio.h:134: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:135: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:140: Fehler: ?uint64_t? wurde nicht deklariert
/usr/local/include/avio.h:141: Fehler: ?uint64_t? wurde nicht deklariert
/usr/local/include/avio.h:184: Fehler: ?uint64_t? bezeichnet keinen Typ
/usr/local/include/avio.h:191: Fehler: ?uint64_t? bezeichnet keinen Typ
/usr/local/include/avio.h:219: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:250: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:253: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/avformat.h:41: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h: In function ?void av_init_packet(AVPacket*)?:
/usr/local/include/avformat.h:62: Fehler: ?AV_NOPTS_VALUE? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/avformat.h: At global scope:
/usr/local/include/avformat.h:117: Fehler: expected initializer before ?attribute_deprecated?
/usr/local/include/avformat.h:137: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:142: Fehler: Verwendung des enum ?PixelFormat? ohne vorherige Deklaration
/usr/local/include/avformat.h:155: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:156: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:177: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:178: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:274: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:283: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:299: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:303: Fehler: Verwendung des enum ?AVDiscard? ohne vorherige Deklaration
/usr/local/include/avformat.h:341: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:385: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:416: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:428: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:428: Fehler: invalid type in declaration before ?;? token
/usr/local/include/rtp.h:28: Fehler: ?AVCodecContext? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:28: Fehler: ?codec? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:28: Fehler: expected primary-expression before ?int?
/usr/local/include/rtp.h:28: Fehler: initializer Ausdrucksliste als zusammengesetzten Ausdruck behandelt
/usr/local/include/rtp.h:31: Fehler: ?AVCodecContext? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:31: Fehler: ?codec? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:37: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/rtp.h:95: Fehler: Verwendung des enum ?CodecType? ohne vorherige Deklaration
/usr/local/include/rtp.h:96: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/rtsp.h:46: Fehler: ?uint32_t? bezeichnet keinen Typ
/usr/local/include/rtsp.h:70: Fehler: ?uint32_t? bezeichnet keinen Typ
/usr/local/include/avformat.h:448: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:449: Fehler: Verwendung des enum ?CodecType? ohne vorherige Deklaration
/usr/local/include/avformat.h:449: Fehler: invalid type in declaration before ?;? token
/usr/local/include/avformat.h:460: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avformat.h:474: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avformat.h:500: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:500: Fehler: invalid type in declaration before ?;? token
/usr/local/include/avformat.h:501: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/tmp/softdevice-conf-16396-3314-21938.c: In function ?int main()?:
/tmp/softdevice-conf-16396-3314-21938.c:8: Fehler: ?avcodec_init? wurde in diesem G?ltigkeitsbereich nicht definiert
/tmp/softdevice-conf-16396-3314-21938.c:9: Fehler: ?avcodec_register_all? wurde in diesem G?ltigkeitsbereich nicht definiert
Checking for ffmpeg/libswscale.------------------------------------
Checking for pp_postprocess 1st arg. -----
Checking ffmpeg for member of AVCodecContext: error_recognition ----
Checking for ALSA sound.------------------
Checking for OSS sound.------------------
Checking for linux framebuffer.------------------
Checking for yaepg patch.------------------
g++ -O2 -g -Wall  -D_GNU_SOURCE -I../../.. -c -o /tmp/softdevice-conf-18340-3314-12704 /tmp/softdevice-conf-16396-3314-21938.c >> config.log 2>&1
/tmp/softdevice-conf-16396-3314-21938.c: In function ?int test_func(cOsd*)?:
/tmp/softdevice-conf-16396-3314-21938.c:3: Fehler: ?class cOsd? hat kein Element namens ?vidWin?
make: *** [/tmp/softdevice-conf-18340-3314-12704] Fehler 1
Checking for DirectFB and DFB++.------------------
Package dfb++ was not found in the pkg-config search path.
Perhaps you should add the directory containing `dfb++.pc'
to the PKG_CONFIG_PATH environment variable
No package 'dfb++' found
Checking for vidix.------------------------
Checking for Xv.-----------------------------
Checking for Xinerama.-----------------------------
-------------

Obviously avcodec.h is not found, but it exists in /usr/local/include/libavcodec
(but then why does it compile at all?)

I eliminated all existing avcodec.h on my system and reinstalled ffmpeg yesterday (from cvs)

???

Thanks!



-------------------------------------------------------

Date: 2008-Dec-19 11:14
By: lucke

Comment:
I was not concerned about the directory of running your 'make plugins'. Our configure script checks for precence of member 'error_recognition' in struct 'AVCodecContext' which is declared in file (guess which): 'avcodec.h' .
Concluding backward: If this member is not detected, there is an old version of avcodec.h on your system which doesn't provide it (or and unexpected error happens) and 'error_resilience' will be used instead. Checking for this is logged via stdout and in config.log. Please attach/show both information.
-------------------------------------------------------

Date: 2008-Dec-19 08:51
By: erbse

Comment:
Yes I reran configure. 

I was not quite precise, the error occurs on starting "make all plugins" or "make install" in $SOURCEDIR (not when I start "make" in $SOURCEDIR/PLUGINS/src/softdevice)
-------------------------------------------------------

Date: 2008-Dec-19 00:42
By: lucke

Comment:
Did you rerun configure ?
error_recognition vs. error_resilience should be detected by configure since the last change on sept. 21 2008.
-------------------------------------------------------

Date: 2008-Dec-18 22:39
By: erbse

Comment:
Hi, thank you so much for replying so quickly. I eliminated all occurrencies of avcodec.h (I had thought I had deleted any former ffmpeg but indeed found one instance where I had not supected it) and eliminated an reincompiled ffmepg just to be sure.

I also recompiled softdevice but nos on starting "make" I get the following error:

-----------------

make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   utils.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   i18n.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   video.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   mpeg2decoder.c
mpeg2decoder.c: In constructor &#65533;cStreamDecoder::cStreamDecoder(AVCodecContext*, bool)&#65533;:
mpeg2decoder.c:146: Fehler: &#65533;struct AVCodecContext&#65533; hat kein Element namens &#65533;error_resilience&#65533;
make[1]: *** [mpeg2decoder.o] Fehler 1
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
Plugin status:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/status'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/status'
Plugin streamdev:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
Plugin svdrpdemo:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
Plugin vdrrip:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'

*** failed plugins: softdevice
--------

Hoping for further advice - good night
Erbse
-------------------------------------------------------

Date: 2008-Dec-18 18:23
By: lucke

Comment:
Sollte nicht passieren. Da gibt es bei Dir eine alte Version von avcodec.h in der LIBAVCODEC_VERSION_INT < ((52<<16)+(0<<8)+0) definiert ist. Entferne die alten Header-Files von FFmpeg und rekonfiguriere und ?bersetzte softdevice neu.
Should not happen. There is an old version of avcodec.h on your system which defines LIBAVCODEC_VERSION_INT less than ((52<<16)+(0<<8)+0). Remove old FFmpeg headers and reconfigure and recompile softdevice.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14940&group_id=2051


From admin at berlios.de  Sat Dec 20 20:12:39 2008
From: admin at berlios.de (admin at berlios.de)
Date: Sat, 20 Dec 2008 20:12:39 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14940] undefined symbol: avcodec_build
Message-ID: <200812201912.mBKJCduD021514@unicorn.berlios.de>

Bug #14940, was updated on 2008-Dec-18 15:28
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: None
Status: Open
Resolution: None
Bug Group: None
Priority: 5
Submitted by: erbse
Assigned to : lucke
Summary: undefined symbol: avcodec_build

Details: Hallo,

beim Start von vdr mit -psoftdevice -vo shm bekomme ich diese Fehlermeldung:

vdr starten: vdr: /usr/local/vdr/lib/libvdr-softdevice.so.1.6.0: undefined symbol: avcodec_build

FFmpeg und das Softdevice-Plugin habe ich jeweils aus der cvs gezogen (heute), bei ffmpeg bin ich nach der Anleitung aus dem VDR-Wiki (von der Softdevice-Seite) vorgegangen. Einziges Problem bei dieser Anleitung: bei ffmpeg geht "make install-lib" nicht, weil es anscheinend keine Regel daf?r im Makefile gibt. softdevice hat aber ohne Fehlermeldung kompiliert.

Gru? 
Erbse



Follow-Ups:

Date: 2008-Dec-20 20:12
By: lucke

Comment:
1. The first error message of your log from 2008-12-19 14:43 are NOT dangerous, as we are trying to find out locations of FFmpeg. Message:
Checking ffmpeg for member of AVCodecContext: error_recognition ---- 
is not followed by errors, so we will use this member.
2. Copying FFmpeg headers manually to other locations will lead to problems later when searching of old versions.
3. Your 'E: client..' messages .. , never seen that before. Googling for that, shows several hits (as mentioned in the 2nd line) related to pulseaudio.
4. Why do you use softdevice on a headless system ? In such an enviroment I would prefer a streamdev client/server setup, accessing server OSD via plugin remoteosd...
-------------------------------------------------------

Date: 2008-Dec-20 10:57
By: erbse

Comment:
I should have added that vdr runs on a headless server without X.
But that was never a Problem before and softdevice ran fine with vdr -Psoftdevice -vo shm. Problems began only when I updated ffmpeg (via yum) 
-------------------------------------------------------

Date: 2008-Dec-19 15:10
By: erbse

Comment:
Update:
I copied the files  from /usr/local/include/libavutil/, .../libavformat, .../libavcodec and .../postproc to /usr/local/include/

Config.log looks better now, at least the headers are being found:

-------
Parameters ''
PKG_CONFIG_PATH 'lib-dir/pkgconfig:datadir/pkgconfig:/home/local/lib/pkgconfig:/usr/local/lib/pkgconfig'
Testing system and cpu type.----------------------------
uname -a: Linux gondor.npg.net 2.6.25.9-40.fc8 #1 SMP Fri Jun 27 16:25:53 EDT 2008 i686 i686 i386 GNU/Linux
g++ -dumpmache: i386-redhat-linux
Checking for pkg-config.-------------------------------
0.22
Checking for ffmpeg.------------------------------------
try to use pkg-config.
-L/usr/local/lib -lpostproc  
Checking for ffmpeg/libswscale.------------------------------------
Checking for pp_postprocess 1st arg. -----
Checking ffmpeg for member of AVCodecContext: error_recognition ----
Checking for ALSA sound.------------------
Checking for OSS sound.------------------
Checking for linux framebuffer.------------------
Checking for yaepg patch.------------------
g++ -O2 -g -Wall  -D_GNU_SOURCE -I../../.. -c -o /tmp/softdevice-conf-24189-3967-19141 /tmp/softdevice-conf-12946-3967-4906.c >> config.log 2>&1
/tmp/softdevice-conf-12946-3967-4906.c: In function ?int test_func(cOsd*)?:
/tmp/softdevice-conf-12946-3967-4906.c:3: Fehler: ?class cOsd? hat kein Element namens ?vidWin?
make: *** [/tmp/softdevice-conf-24189-3967-19141] Fehler 1
Checking for DirectFB and DFB++.------------------
Package dfb++ was not found in the pkg-config search path.
Perhaps you should add the directory containing `dfb++.pc'
to the PKG_CONFIG_PATH environment variable
No package 'dfb++' found
Checking for vidix.------------------------
Checking for Xv.-----------------------------
Checking for Xinerama.-----------------------------
--------------------
output of ./configure :

Testing system and cpu type... found Linux on i386 cpu.
Checking for pkg-config... Found.
Checking for ffmpeg... Ok.
Checking for ffmpeg/libswscale... Using libswscale.
Checking for pp_postprocess 1st arg ... is: const uint8_t **
Checking ffmpeg for member of AVCodecContext: error_recognition ...  'error_recognition' found
Checking for ALSA sound... Enabled audio-alsa.
Checking for OSS sound... Enabled audio-oss.
Checking for linux frambuffer... Enabled video-fb.
Checking for yaepg patch... Not Found.
Checking for DirectFB and DFB++... Not Found.
Checking for vidix... Enabled video-out vidix.
Checking for Xv... Enabled video-xv.
Checking for Xinerama... Enabled Xinerama.
Creating temporary config.h and config.mak
config.h is unchanged
config.mak is unchanged
Configure is finished. Please check config.log in case of problems.
--------------
vdr startup output:
vdr starten: softdevice: Got ctl_shmid 32769 shm ctl!
softdevice: Error attatching existing setupStore shm!
setupStoreShmId -1 setupStore (nil)
softdevice: Created setupStoreId 1212420!
softdevice: Attatched to setupStoreId 1212420 at 0xb7d64000.
[softdevice] processing args
[softdevice]   argv [0] = softdevice
[softdevice]   argv [1] = -vo
[setup-softdevice] alsa ac3Mode set to: 0
[setup-softdevice] alsa AC3 device set to: 
[setup-softdevice] alsa device set to: 
[setup-softdevice] autodetectAspect 0
[setup-softdevice] A/V Offset set to (0)
[setup-softdevice] Cropping 0 lines from bottom
[setup-softdevice] Cropping 0 columns from left
[setup-softdevice] cropping mode set to 0 (none)
[setup-softdevice] cropping mode toggle key set to 0 (none)
[setup-softdevice] Cropping 0 columns from right
[setup-softdevice] Cropping 0 lines from top
[setup-softdevice] deinterlace method set to 0 none
[setup-softdevice] Expanding 0 columns at left and right
[setup-softdevice] Expanding 0 columns at top and bottom
[setup-softdevice] mainMenu: 1
[setup-softdevice] setting alpha blend mode to software
[softdevice] picture mirroring set to 0 (off)
[setup-softdevice] pixel format set to (I420)
[setup-softdevice] shouldSuspend to: 0
[setup-softdevice] syncTimerMode: sig
[softdevice] UseSetSourceRectangle to off
[softdevice] UseStretchBlitset to off
[setup-softdevice] vidBrightness: -1
[setup-softdevice] vidContrast: -1
[setup-softdevice] vidHue: -1
[setup-softdevice] vidSaturation: -1
[setup-softdevice] startup aspect set to (4:3 normal)
[softdevice] initializing Plugin
[softdevice] Initializing Video Out
[softdevice] ffmpeg build(3409664)
cShmVideoOut: Got ctl_shmid 32769 shm ctl!
[softdevice] Subplugin successfully opend
[softdevice] Video Out seems to be OK
[softdevice] Initializing Audio Out
E: client-conf-x11.c: XOpenDisplay() failed
*** PULSEAUDIO: Unable to connect: Connection refused
                                                           [FEHLGESCHLAGEN]




-------------------------------------------------------

Date: 2008-Dec-19 14:43
By: erbse

Comment:
Hi,

I installed some missing packages (e.g. alsa-devel) and the error disappeared. Unfortunately, on starting vdr I now get this:

vdr starten: softdevice: Got ctl_shmid 32769 shm ctl!
softdevice: Error attatching existing setupStore shm!
setupStoreShmId -1 setupStore (nil)
softdevice: Created setupStoreId 1146884!
softdevice: Attatched to setupStoreId 1146884 at 0xb7cc0000.
[softdevice] processing args
[softdevice]   argv [0] = softdevice
[softdevice]   argv [1] = -vo
[setup-softdevice] alsa ac3Mode set to: 0
[setup-softdevice] alsa AC3 device set to: 
[setup-softdevice] alsa device set to: 
[setup-softdevice] autodetectAspect 0
[setup-softdevice] A/V Offset set to (0)
[setup-softdevice] Cropping 0 lines from bottom
[setup-softdevice] Cropping 0 columns from left
[setup-softdevice] cropping mode set to 0 (none)
[setup-softdevice] cropping mode toggle key set to 0 (none)
[setup-softdevice] Cropping 0 columns from right
[setup-softdevice] Cropping 0 lines from top
[setup-softdevice] deinterlace method set to 0 none
[setup-softdevice] Expanding 0 columns at left and right
[setup-softdevice] Expanding 0 columns at top and bottom
[setup-softdevice] mainMenu: 1
[setup-softdevice] setting alpha blend mode to software
[softdevice] picture mirroring set to 0 (off)
[setup-softdevice] pixel format set to (I420)
[setup-softdevice] shouldSuspend to: 0
[setup-softdevice] syncTimerMode: sig
[softdevice] UseSetSourceRectangle to off
[softdevice] UseStretchBlitset to off
[setup-softdevice] vidBrightness: -1
[setup-softdevice] vidContrast: -1
[setup-softdevice] vidHue: -1
[setup-softdevice] vidSaturation: -1
[setup-softdevice] startup aspect set to (4:3 normal)
[softdevice] initializing Plugin
[softdevice] Initializing Video Out
[softdevice] ffmpeg build(3409664)
cShmVideoOut: Got ctl_shmid 32769 shm ctl!
[softdevice] Subplugin successfully opend
[softdevice] Video Out seems to be OK
[softdevice] Initializing Audio Out
E: client-conf-x11.c: XOpenDisplay() failed
*** PULSEAUDIO: Unable to connect: Connection refused

-------
Running ./configure produces this output:
---------
Testing system and cpu type... found Linux on i386 cpu.
Checking for pkg-config... Found.
Checking for ffmpeg... Ok.
Checking for ffmpeg/libswscale... Using libswscale.
Checking for pp_postprocess 1st arg ... is: const uint8_t **
Checking ffmpeg for member of AVCodecContext: error_recognition ...  'error_recognition' found
Checking for ALSA sound... Enabled audio-alsa.
Checking for OSS sound... Enabled audio-oss.
Checking for linux frambuffer... Enabled video-fb.
Checking for yaepg patch... Not Found.
Checking for DirectFB and DFB++... Not Found.
Checking for vidix... Enabled video-out vidix.
Checking for Xv... Enabled video-xv.
Checking for Xinerama... Enabled Xinerama.
Creating temporary config.h and config.mak
config.h is unchanged
config.mak is unchanged
Configure is finished. Please check config.log in case of problems.
-----------
latest config.log:
-----------
Parameters ''
PKG_CONFIG_PATH 'lib-dir/pkgconfig:datadir/pkgconfig:/home/local/lib/pkgconfig:/usr/local/lib/pkgconfig'
Testing system and cpu type.----------------------------
uname -a: Linux gondor.npg.net 2.6.25.9-40.fc8 #1 SMP Fri Jun 27 16:25:53 EDT 2008 i686 i686 i386 GNU/Linux
g++ -dumpmache: i386-redhat-linux
Checking for pkg-config.-------------------------------
0.22
Checking for ffmpeg.------------------------------------
try to use pkg-config.
-L/usr/local/lib -lpostproc  
/tmp/softdevice-conf-16396-3314-21938.c:4:21: Fehler: avcodec.h: Datei oder Verzeichnis nicht gefunden
/usr/local/include/avio.h:114: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:115: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:125: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/avio.h:134: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:135: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:140: Fehler: ?uint64_t? wurde nicht deklariert
/usr/local/include/avio.h:141: Fehler: ?uint64_t? wurde nicht deklariert
/usr/local/include/avio.h:184: Fehler: ?uint64_t? bezeichnet keinen Typ
/usr/local/include/avio.h:191: Fehler: ?uint64_t? bezeichnet keinen Typ
/usr/local/include/avio.h:219: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:250: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:253: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/avformat.h:41: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h: In function ?void av_init_packet(AVPacket*)?:
/usr/local/include/avformat.h:62: Fehler: ?AV_NOPTS_VALUE? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/avformat.h: At global scope:
/usr/local/include/avformat.h:117: Fehler: expected initializer before ?attribute_deprecated?
/usr/local/include/avformat.h:137: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:142: Fehler: Verwendung des enum ?PixelFormat? ohne vorherige Deklaration
/usr/local/include/avformat.h:155: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:156: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:177: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:178: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:274: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:283: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:299: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:303: Fehler: Verwendung des enum ?AVDiscard? ohne vorherige Deklaration
/usr/local/include/avformat.h:341: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:385: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:416: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:428: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:428: Fehler: invalid type in declaration before ?;? token
/usr/local/include/rtp.h:28: Fehler: ?AVCodecContext? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:28: Fehler: ?codec? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:28: Fehler: expected primary-expression before ?int?
/usr/local/include/rtp.h:28: Fehler: initializer Ausdrucksliste als zusammengesetzten Ausdruck behandelt
/usr/local/include/rtp.h:31: Fehler: ?AVCodecContext? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:31: Fehler: ?codec? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:37: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/rtp.h:95: Fehler: Verwendung des enum ?CodecType? ohne vorherige Deklaration
/usr/local/include/rtp.h:96: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/rtsp.h:46: Fehler: ?uint32_t? bezeichnet keinen Typ
/usr/local/include/rtsp.h:70: Fehler: ?uint32_t? bezeichnet keinen Typ
/usr/local/include/avformat.h:448: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:449: Fehler: Verwendung des enum ?CodecType? ohne vorherige Deklaration
/usr/local/include/avformat.h:449: Fehler: invalid type in declaration before ?;? token
/usr/local/include/avformat.h:460: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avformat.h:474: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avformat.h:500: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:500: Fehler: invalid type in declaration before ?;? token
/usr/local/include/avformat.h:501: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/tmp/softdevice-conf-16396-3314-21938.c: In function ?int main()?:
/tmp/softdevice-conf-16396-3314-21938.c:8: Fehler: ?avcodec_init? wurde in diesem G?ltigkeitsbereich nicht definiert
/tmp/softdevice-conf-16396-3314-21938.c:9: Fehler: ?avcodec_register_all? wurde in diesem G?ltigkeitsbereich nicht definiert
Checking for ffmpeg/libswscale.------------------------------------
Checking for pp_postprocess 1st arg. -----
Checking ffmpeg for member of AVCodecContext: error_recognition ----
Checking for ALSA sound.------------------
Checking for OSS sound.------------------
Checking for linux framebuffer.------------------
Checking for yaepg patch.------------------
g++ -O2 -g -Wall  -D_GNU_SOURCE -I../../.. -c -o /tmp/softdevice-conf-18340-3314-12704 /tmp/softdevice-conf-16396-3314-21938.c >> config.log 2>&1
/tmp/softdevice-conf-16396-3314-21938.c: In function ?int test_func(cOsd*)?:
/tmp/softdevice-conf-16396-3314-21938.c:3: Fehler: ?class cOsd? hat kein Element namens ?vidWin?
make: *** [/tmp/softdevice-conf-18340-3314-12704] Fehler 1
Checking for DirectFB and DFB++.------------------
Package dfb++ was not found in the pkg-config search path.
Perhaps you should add the directory containing `dfb++.pc'
to the PKG_CONFIG_PATH environment variable
No package 'dfb++' found
Checking for vidix.------------------------
Checking for Xv.-----------------------------
Checking for Xinerama.-----------------------------
-------------

Obviously avcodec.h is not found, but it exists in /usr/local/include/libavcodec
(but then why does it compile at all?)

I eliminated all existing avcodec.h on my system and reinstalled ffmpeg yesterday (from cvs)

???

Thanks!



-------------------------------------------------------

Date: 2008-Dec-19 11:14
By: lucke

Comment:
I was not concerned about the directory of running your 'make plugins'. Our configure script checks for precence of member 'error_recognition' in struct 'AVCodecContext' which is declared in file (guess which): 'avcodec.h' .
Concluding backward: If this member is not detected, there is an old version of avcodec.h on your system which doesn't provide it (or and unexpected error happens) and 'error_resilience' will be used instead. Checking for this is logged via stdout and in config.log. Please attach/show both information.
-------------------------------------------------------

Date: 2008-Dec-19 08:51
By: erbse

Comment:
Yes I reran configure. 

I was not quite precise, the error occurs on starting "make all plugins" or "make install" in $SOURCEDIR (not when I start "make" in $SOURCEDIR/PLUGINS/src/softdevice)
-------------------------------------------------------

Date: 2008-Dec-19 00:42
By: lucke

Comment:
Did you rerun configure ?
error_recognition vs. error_resilience should be detected by configure since the last change on sept. 21 2008.
-------------------------------------------------------

Date: 2008-Dec-18 22:39
By: erbse

Comment:
Hi, thank you so much for replying so quickly. I eliminated all occurrencies of avcodec.h (I had thought I had deleted any former ffmpeg but indeed found one instance where I had not supected it) and eliminated an reincompiled ffmepg just to be sure.

I also recompiled softdevice but nos on starting "make" I get the following error:

-----------------

make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   utils.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   i18n.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   video.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   mpeg2decoder.c
mpeg2decoder.c: In constructor &#65533;cStreamDecoder::cStreamDecoder(AVCodecContext*, bool)&#65533;:
mpeg2decoder.c:146: Fehler: &#65533;struct AVCodecContext&#65533; hat kein Element namens &#65533;error_resilience&#65533;
make[1]: *** [mpeg2decoder.o] Fehler 1
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
Plugin status:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/status'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/status'
Plugin streamdev:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
Plugin svdrpdemo:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
Plugin vdrrip:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'

*** failed plugins: softdevice
--------

Hoping for further advice - good night
Erbse
-------------------------------------------------------

Date: 2008-Dec-18 18:23
By: lucke

Comment:
Sollte nicht passieren. Da gibt es bei Dir eine alte Version von avcodec.h in der LIBAVCODEC_VERSION_INT < ((52<<16)+(0<<8)+0) definiert ist. Entferne die alten Header-Files von FFmpeg und rekonfiguriere und ?bersetzte softdevice neu.
Should not happen. There is an old version of avcodec.h on your system which defines LIBAVCODEC_VERSION_INT less than ((52<<16)+(0<<8)+0). Remove old FFmpeg headers and reconfigure and recompile softdevice.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14940&group_id=2051


From admin at berlios.de  Wed Dec 24 11:55:10 2008
From: admin at berlios.de (admin at berlios.de)
Date: Wed, 24 Dec 2008 11:55:10 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14931] compilation fails with last ffmpeg
Message-ID: <200812241055.mBOAtABj003025@unicorn.berlios.de>

Bug #14931, was updated on 2008-Dec-14 17:57
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: general
Status: Open
Resolution: None
Bug Group: None
Priority: 5
Submitted by: davide125
Assigned to : lucke
Summary: compilation fails with last ffmpeg

Details: Softdevice needs to be updated for libavcodec v52 API

Follow-Ups:

Date: 2008-Dec-24 11:55
By: davide125

Comment:
Here's the log using today's ffmpeg r16304 and softdevice cvs from 25/10/2008.

/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/bin/i586-geexbox-linux-gnu-g++ -Os -Wall -pipe -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -mtune=c3 -s -fomit-frame-pointer  -c -DHAVE_CONFIG -DUSE_LIEMIKUUTIO -DUSE_CHANNELSCAN -DUSE_DOLBYINREC -DUSE_MAINMENUHOOKS -DUSE_IPTV -DUSE_MENUORG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"/usr/lib/vdr"' -DSHM_SUPPORT -I../freetype-2.3.7/include -I../vdr-1.6.0/include -I../../../../DVB/include -I../vdr-1.6.0 -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libavcodec -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libavformat -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libswscale mpeg2decoder.c
In file included from video.h:26,
                 from video.c:17:
PicBuffer.h:60: warning: 'typedef' was ignored in this declaration
video.c: In member function 'virtual void cVideoOut::EvaluateDelay(uint64_t, uint64_t, int)':
video.c:558: warning: deprecated conversion from string constant to 'char*'
video.c:586: warning: deprecated conversion from string constant to 'char*'
video.c:595: warning: deprecated conversion from string constant to 'char*'
video.c:602: warning: deprecated conversion from string constant to 'char*'
video.c: In member function 'virtual void cVideoOut::ResetDelay()':
video.c:619: warning: deprecated conversion from string constant to 'char*'
/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/bin/i586-geexbox-linux-gnu-g++ -Os -Wall -pipe -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -mtune=c3 -s -fomit-frame-pointer  -c -DHAVE_CONFIG -DUSE_LIEMIKUUTIO -DUSE_CHANNELSCAN -DUSE_DOLBYINREC -DUSE_MAINMENUHOOKS -DUSE_IPTV -DUSE_MENUORG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"/usr/lib/vdr"' -DSHM_SUPPORT -I../freetype-2.3.7/include -I../vdr-1.6.0/include -I../../../../DVB/include -I../vdr-1.6.0 -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libavcodec -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libavformat -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libswscale audio.c
In file included from video.h:26,
                 from mpeg2decoder.h:31,
                 from mpeg2decoder.c:15:
PicBuffer.h:60: warning: 'typedef' was ignored in this declaration
mpeg2decoder.c: In constructor 'cStreamDecoder::cStreamDecoder(AVCodecContext*, bool)':
mpeg2decoder.c:146: error: 'struct AVCodecContext' has no member named 'error_resilience'
mpeg2decoder.c: In member function 'void cMpeg2Decoder::Freeze(int, bool)':
mpeg2decoder.c:1472: warning: suggest parentheses around comparison in operand of &
make: *** [mpeg2decoder.o] Error 1
make: *** Waiting for unfinished jobs....
In file included from video.h:26,
                 from mpeg2decoder.h:31,
                 from softdevice.h:18,
                 from softdevice.c:9:
PicBuffer.h:60: warning: 'typedef' was ignored in this declaration
softdevice.c: In constructor 'cPluginSoftDevice::cPluginSoftDevice()':
softdevice.c:819: warning: deprecated conversion from string constant to 'char*'

-------------------------------------------------------

Date: 2008-Dec-15 20:50
By: lucke

Comment:
Which version of softdevice do you use ? In case of current cvs, please post exact ffmpeg version which fails and the error message of compilation.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14931&group_id=2051


From admin at berlios.de  Sun Dec 28 17:19:33 2008
From: admin at berlios.de (admin at berlios.de)
Date: Sun, 28 Dec 2008 17:19:33 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14931] compilation fails with last ffmpeg
Message-ID: <200812281619.mBSGJXfJ024589@unicorn.berlios.de>

Bug #14931, was updated on 2008-Dec-14 17:57
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: general
Status: Open
Resolution: None
Bug Group: None
Priority: 5
Submitted by: davide125
Assigned to : lucke
Summary: compilation fails with last ffmpeg

Details: Softdevice needs to be updated for libavcodec v52 API

Follow-Ups:

Date: 2008-Dec-28 17:19
By: davide125

Comment:
I finally found out it was a problem on my system, HAS_ERROR_RECOGNITION wasn't being properly defined. Sorry for the noise, please close the bug.
-------------------------------------------------------

Date: 2008-Dec-24 11:55
By: davide125

Comment:
Here's the log using today's ffmpeg r16304 and softdevice cvs from 25/10/2008.

/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/bin/i586-geexbox-linux-gnu-g++ -Os -Wall -pipe -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -mtune=c3 -s -fomit-frame-pointer  -c -DHAVE_CONFIG -DUSE_LIEMIKUUTIO -DUSE_CHANNELSCAN -DUSE_DOLBYINREC -DUSE_MAINMENUHOOKS -DUSE_IPTV -DUSE_MENUORG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"/usr/lib/vdr"' -DSHM_SUPPORT -I../freetype-2.3.7/include -I../vdr-1.6.0/include -I../../../../DVB/include -I../vdr-1.6.0 -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libavcodec -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libavformat -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libswscale mpeg2decoder.c
In file included from video.h:26,
                 from video.c:17:
PicBuffer.h:60: warning: 'typedef' was ignored in this declaration
video.c: In member function 'virtual void cVideoOut::EvaluateDelay(uint64_t, uint64_t, int)':
video.c:558: warning: deprecated conversion from string constant to 'char*'
video.c:586: warning: deprecated conversion from string constant to 'char*'
video.c:595: warning: deprecated conversion from string constant to 'char*'
video.c:602: warning: deprecated conversion from string constant to 'char*'
video.c: In member function 'virtual void cVideoOut::ResetDelay()':
video.c:619: warning: deprecated conversion from string constant to 'char*'
/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/bin/i586-geexbox-linux-gnu-g++ -Os -Wall -pipe -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -mtune=c3 -s -fomit-frame-pointer  -c -DHAVE_CONFIG -DUSE_LIEMIKUUTIO -DUSE_CHANNELSCAN -DUSE_DOLBYINREC -DUSE_MAINMENUHOOKS -DUSE_IPTV -DUSE_MENUORG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"/usr/lib/vdr"' -DSHM_SUPPORT -I../freetype-2.3.7/include -I../vdr-1.6.0/include -I../../../../DVB/include -I../vdr-1.6.0 -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libavcodec -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libavformat -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libswscale audio.c
In file included from video.h:26,
                 from mpeg2decoder.h:31,
                 from mpeg2decoder.c:15:
PicBuffer.h:60: warning: 'typedef' was ignored in this declaration
mpeg2decoder.c: In constructor 'cStreamDecoder::cStreamDecoder(AVCodecContext*, bool)':
mpeg2decoder.c:146: error: 'struct AVCodecContext' has no member named 'error_resilience'
mpeg2decoder.c: In member function 'void cMpeg2Decoder::Freeze(int, bool)':
mpeg2decoder.c:1472: warning: suggest parentheses around comparison in operand of &
make: *** [mpeg2decoder.o] Error 1
make: *** Waiting for unfinished jobs....
In file included from video.h:26,
                 from mpeg2decoder.h:31,
                 from softdevice.h:18,
                 from softdevice.c:9:
PicBuffer.h:60: warning: 'typedef' was ignored in this declaration
softdevice.c: In constructor 'cPluginSoftDevice::cPluginSoftDevice()':
softdevice.c:819: warning: deprecated conversion from string constant to 'char*'

-------------------------------------------------------

Date: 2008-Dec-15 20:50
By: lucke

Comment:
Which version of softdevice do you use ? In case of current cvs, please post exact ffmpeg version which fails and the error message of compilation.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14931&group_id=2051


From admin at berlios.de  Tue Dec 30 12:47:18 2008
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 30 Dec 2008 12:47:18 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14931] compilation fails with last ffmpeg
Message-ID: <200812301147.mBUBlIEF027633@unicorn.berlios.de>

Bug #14931, was updated on 2008-Dec-14 17:57
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: general
Status: Closed
Resolution: Works For Me
Bug Group: None
Priority: 5
Submitted by: davide125
Assigned to : lucke
Summary: compilation fails with last ffmpeg

Details: Softdevice needs to be updated for libavcodec v52 API

Follow-Ups:

Date: 2008-Dec-30 12:47
By: lucke

Comment:
Problem reporter found the reason on his system.
-------------------------------------------------------

Date: 2008-Dec-28 17:19
By: davide125

Comment:
I finally found out it was a problem on my system, HAS_ERROR_RECOGNITION wasn't being properly defined. Sorry for the noise, please close the bug.
-------------------------------------------------------

Date: 2008-Dec-24 11:55
By: davide125

Comment:
Here's the log using today's ffmpeg r16304 and softdevice cvs from 25/10/2008.

/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/bin/i586-geexbox-linux-gnu-g++ -Os -Wall -pipe -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -mtune=c3 -s -fomit-frame-pointer  -c -DHAVE_CONFIG -DUSE_LIEMIKUUTIO -DUSE_CHANNELSCAN -DUSE_DOLBYINREC -DUSE_MAINMENUHOOKS -DUSE_IPTV -DUSE_MENUORG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"/usr/lib/vdr"' -DSHM_SUPPORT -I../freetype-2.3.7/include -I../vdr-1.6.0/include -I../../../../DVB/include -I../vdr-1.6.0 -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libavcodec -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libavformat -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libswscale mpeg2decoder.c
In file included from video.h:26,
                 from video.c:17:
PicBuffer.h:60: warning: 'typedef' was ignored in this declaration
video.c: In member function 'virtual void cVideoOut::EvaluateDelay(uint64_t, uint64_t, int)':
video.c:558: warning: deprecated conversion from string constant to 'char*'
video.c:586: warning: deprecated conversion from string constant to 'char*'
video.c:595: warning: deprecated conversion from string constant to 'char*'
video.c:602: warning: deprecated conversion from string constant to 'char*'
video.c: In member function 'virtual void cVideoOut::ResetDelay()':
video.c:619: warning: deprecated conversion from string constant to 'char*'
/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/bin/i586-geexbox-linux-gnu-g++ -Os -Wall -pipe -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -mtune=c3 -s -fomit-frame-pointer  -c -DHAVE_CONFIG -DUSE_LIEMIKUUTIO -DUSE_CHANNELSCAN -DUSE_DOLBYINREC -DUSE_MAINMENUHOOKS -DUSE_IPTV -DUSE_MENUORG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"/usr/lib/vdr"' -DSHM_SUPPORT -I../freetype-2.3.7/include -I../vdr-1.6.0/include -I../../../../DVB/include -I../vdr-1.6.0 -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libavcodec -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libavformat -I/home/davide/geexbox/dev/geexbox-davide/build.i386.glibc/toolchain/i586-geexbox-linux-gnu/sysroot/usr/local/include/libswscale audio.c
In file included from video.h:26,
                 from mpeg2decoder.h:31,
                 from mpeg2decoder.c:15:
PicBuffer.h:60: warning: 'typedef' was ignored in this declaration
mpeg2decoder.c: In constructor 'cStreamDecoder::cStreamDecoder(AVCodecContext*, bool)':
mpeg2decoder.c:146: error: 'struct AVCodecContext' has no member named 'error_resilience'
mpeg2decoder.c: In member function 'void cMpeg2Decoder::Freeze(int, bool)':
mpeg2decoder.c:1472: warning: suggest parentheses around comparison in operand of &
make: *** [mpeg2decoder.o] Error 1
make: *** Waiting for unfinished jobs....
In file included from video.h:26,
                 from mpeg2decoder.h:31,
                 from softdevice.h:18,
                 from softdevice.c:9:
PicBuffer.h:60: warning: 'typedef' was ignored in this declaration
softdevice.c: In constructor 'cPluginSoftDevice::cPluginSoftDevice()':
softdevice.c:819: warning: deprecated conversion from string constant to 'char*'

-------------------------------------------------------

Date: 2008-Dec-15 20:50
By: lucke

Comment:
Which version of softdevice do you use ? In case of current cvs, please post exact ffmpeg version which fails and the error message of compilation.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14931&group_id=2051


From admin at berlios.de  Tue Dec 30 12:51:28 2008
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 30 Dec 2008 12:51:28 +0100 (CET)
Subject: [Softdevice-devel] [Bug #14940] undefined symbol: avcodec_build
Message-ID: <200812301151.mBUBpS60000862@unicorn.berlios.de>

Bug #14940, was updated on 2008-Dec-18 15:28
Here is a current snapshot of the bug.

Project: Vdr Softdevice
Category: None
Status: Closed
Resolution: Works For Me
Bug Group: None
Priority: 5
Submitted by: erbse
Assigned to : lucke
Summary: undefined symbol: avcodec_build

Details: Hallo,

beim Start von vdr mit -psoftdevice -vo shm bekomme ich diese Fehlermeldung:

vdr starten: vdr: /usr/local/vdr/lib/libvdr-softdevice.so.1.6.0: undefined symbol: avcodec_build

FFmpeg und das Softdevice-Plugin habe ich jeweils aus der cvs gezogen (heute), bei ffmpeg bin ich nach der Anleitung aus dem VDR-Wiki (von der Softdevice-Seite) vorgegangen. Einziges Problem bei dieser Anleitung: bei ffmpeg geht "make install-lib" nicht, weil es anscheinend keine Regel daf?r im Makefile gibt. softdevice hat aber ohne Fehlermeldung kompiliert.

Gru? 
Erbse



Follow-Ups:

Date: 2008-Dec-30 12:51
By: lucke

Comment:
Problem reporter found the reason of original error on his/her system. The PULSEAUDIO error message is not related to softdevice or a total different bug.
-------------------------------------------------------

Date: 2008-Dec-20 20:12
By: lucke

Comment:
1. The first error message of your log from 2008-12-19 14:43 are NOT dangerous, as we are trying to find out locations of FFmpeg. Message:
Checking ffmpeg for member of AVCodecContext: error_recognition ---- 
is not followed by errors, so we will use this member.
2. Copying FFmpeg headers manually to other locations will lead to problems later when searching of old versions.
3. Your 'E: client..' messages .. , never seen that before. Googling for that, shows several hits (as mentioned in the 2nd line) related to pulseaudio.
4. Why do you use softdevice on a headless system ? In such an enviroment I would prefer a streamdev client/server setup, accessing server OSD via plugin remoteosd...
-------------------------------------------------------

Date: 2008-Dec-20 10:57
By: erbse

Comment:
I should have added that vdr runs on a headless server without X.
But that was never a Problem before and softdevice ran fine with vdr -Psoftdevice -vo shm. Problems began only when I updated ffmpeg (via yum) 
-------------------------------------------------------

Date: 2008-Dec-19 15:10
By: erbse

Comment:
Update:
I copied the files  from /usr/local/include/libavutil/, .../libavformat, .../libavcodec and .../postproc to /usr/local/include/

Config.log looks better now, at least the headers are being found:

-------
Parameters ''
PKG_CONFIG_PATH 'lib-dir/pkgconfig:datadir/pkgconfig:/home/local/lib/pkgconfig:/usr/local/lib/pkgconfig'
Testing system and cpu type.----------------------------
uname -a: Linux gondor.npg.net 2.6.25.9-40.fc8 #1 SMP Fri Jun 27 16:25:53 EDT 2008 i686 i686 i386 GNU/Linux
g++ -dumpmache: i386-redhat-linux
Checking for pkg-config.-------------------------------
0.22
Checking for ffmpeg.------------------------------------
try to use pkg-config.
-L/usr/local/lib -lpostproc  
Checking for ffmpeg/libswscale.------------------------------------
Checking for pp_postprocess 1st arg. -----
Checking ffmpeg for member of AVCodecContext: error_recognition ----
Checking for ALSA sound.------------------
Checking for OSS sound.------------------
Checking for linux framebuffer.------------------
Checking for yaepg patch.------------------
g++ -O2 -g -Wall  -D_GNU_SOURCE -I../../.. -c -o /tmp/softdevice-conf-24189-3967-19141 /tmp/softdevice-conf-12946-3967-4906.c >> config.log 2>&1
/tmp/softdevice-conf-12946-3967-4906.c: In function ?int test_func(cOsd*)?:
/tmp/softdevice-conf-12946-3967-4906.c:3: Fehler: ?class cOsd? hat kein Element namens ?vidWin?
make: *** [/tmp/softdevice-conf-24189-3967-19141] Fehler 1
Checking for DirectFB and DFB++.------------------
Package dfb++ was not found in the pkg-config search path.
Perhaps you should add the directory containing `dfb++.pc'
to the PKG_CONFIG_PATH environment variable
No package 'dfb++' found
Checking for vidix.------------------------
Checking for Xv.-----------------------------
Checking for Xinerama.-----------------------------
--------------------
output of ./configure :

Testing system and cpu type... found Linux on i386 cpu.
Checking for pkg-config... Found.
Checking for ffmpeg... Ok.
Checking for ffmpeg/libswscale... Using libswscale.
Checking for pp_postprocess 1st arg ... is: const uint8_t **
Checking ffmpeg for member of AVCodecContext: error_recognition ...  'error_recognition' found
Checking for ALSA sound... Enabled audio-alsa.
Checking for OSS sound... Enabled audio-oss.
Checking for linux frambuffer... Enabled video-fb.
Checking for yaepg patch... Not Found.
Checking for DirectFB and DFB++... Not Found.
Checking for vidix... Enabled video-out vidix.
Checking for Xv... Enabled video-xv.
Checking for Xinerama... Enabled Xinerama.
Creating temporary config.h and config.mak
config.h is unchanged
config.mak is unchanged
Configure is finished. Please check config.log in case of problems.
--------------
vdr startup output:
vdr starten: softdevice: Got ctl_shmid 32769 shm ctl!
softdevice: Error attatching existing setupStore shm!
setupStoreShmId -1 setupStore (nil)
softdevice: Created setupStoreId 1212420!
softdevice: Attatched to setupStoreId 1212420 at 0xb7d64000.
[softdevice] processing args
[softdevice]   argv [0] = softdevice
[softdevice]   argv [1] = -vo
[setup-softdevice] alsa ac3Mode set to: 0
[setup-softdevice] alsa AC3 device set to: 
[setup-softdevice] alsa device set to: 
[setup-softdevice] autodetectAspect 0
[setup-softdevice] A/V Offset set to (0)
[setup-softdevice] Cropping 0 lines from bottom
[setup-softdevice] Cropping 0 columns from left
[setup-softdevice] cropping mode set to 0 (none)
[setup-softdevice] cropping mode toggle key set to 0 (none)
[setup-softdevice] Cropping 0 columns from right
[setup-softdevice] Cropping 0 lines from top
[setup-softdevice] deinterlace method set to 0 none
[setup-softdevice] Expanding 0 columns at left and right
[setup-softdevice] Expanding 0 columns at top and bottom
[setup-softdevice] mainMenu: 1
[setup-softdevice] setting alpha blend mode to software
[softdevice] picture mirroring set to 0 (off)
[setup-softdevice] pixel format set to (I420)
[setup-softdevice] shouldSuspend to: 0
[setup-softdevice] syncTimerMode: sig
[softdevice] UseSetSourceRectangle to off
[softdevice] UseStretchBlitset to off
[setup-softdevice] vidBrightness: -1
[setup-softdevice] vidContrast: -1
[setup-softdevice] vidHue: -1
[setup-softdevice] vidSaturation: -1
[setup-softdevice] startup aspect set to (4:3 normal)
[softdevice] initializing Plugin
[softdevice] Initializing Video Out
[softdevice] ffmpeg build(3409664)
cShmVideoOut: Got ctl_shmid 32769 shm ctl!
[softdevice] Subplugin successfully opend
[softdevice] Video Out seems to be OK
[softdevice] Initializing Audio Out
E: client-conf-x11.c: XOpenDisplay() failed
*** PULSEAUDIO: Unable to connect: Connection refused
                                                           [FEHLGESCHLAGEN]




-------------------------------------------------------

Date: 2008-Dec-19 14:43
By: erbse

Comment:
Hi,

I installed some missing packages (e.g. alsa-devel) and the error disappeared. Unfortunately, on starting vdr I now get this:

vdr starten: softdevice: Got ctl_shmid 32769 shm ctl!
softdevice: Error attatching existing setupStore shm!
setupStoreShmId -1 setupStore (nil)
softdevice: Created setupStoreId 1146884!
softdevice: Attatched to setupStoreId 1146884 at 0xb7cc0000.
[softdevice] processing args
[softdevice]   argv [0] = softdevice
[softdevice]   argv [1] = -vo
[setup-softdevice] alsa ac3Mode set to: 0
[setup-softdevice] alsa AC3 device set to: 
[setup-softdevice] alsa device set to: 
[setup-softdevice] autodetectAspect 0
[setup-softdevice] A/V Offset set to (0)
[setup-softdevice] Cropping 0 lines from bottom
[setup-softdevice] Cropping 0 columns from left
[setup-softdevice] cropping mode set to 0 (none)
[setup-softdevice] cropping mode toggle key set to 0 (none)
[setup-softdevice] Cropping 0 columns from right
[setup-softdevice] Cropping 0 lines from top
[setup-softdevice] deinterlace method set to 0 none
[setup-softdevice] Expanding 0 columns at left and right
[setup-softdevice] Expanding 0 columns at top and bottom
[setup-softdevice] mainMenu: 1
[setup-softdevice] setting alpha blend mode to software
[softdevice] picture mirroring set to 0 (off)
[setup-softdevice] pixel format set to (I420)
[setup-softdevice] shouldSuspend to: 0
[setup-softdevice] syncTimerMode: sig
[softdevice] UseSetSourceRectangle to off
[softdevice] UseStretchBlitset to off
[setup-softdevice] vidBrightness: -1
[setup-softdevice] vidContrast: -1
[setup-softdevice] vidHue: -1
[setup-softdevice] vidSaturation: -1
[setup-softdevice] startup aspect set to (4:3 normal)
[softdevice] initializing Plugin
[softdevice] Initializing Video Out
[softdevice] ffmpeg build(3409664)
cShmVideoOut: Got ctl_shmid 32769 shm ctl!
[softdevice] Subplugin successfully opend
[softdevice] Video Out seems to be OK
[softdevice] Initializing Audio Out
E: client-conf-x11.c: XOpenDisplay() failed
*** PULSEAUDIO: Unable to connect: Connection refused

-------
Running ./configure produces this output:
---------
Testing system and cpu type... found Linux on i386 cpu.
Checking for pkg-config... Found.
Checking for ffmpeg... Ok.
Checking for ffmpeg/libswscale... Using libswscale.
Checking for pp_postprocess 1st arg ... is: const uint8_t **
Checking ffmpeg for member of AVCodecContext: error_recognition ...  'error_recognition' found
Checking for ALSA sound... Enabled audio-alsa.
Checking for OSS sound... Enabled audio-oss.
Checking for linux frambuffer... Enabled video-fb.
Checking for yaepg patch... Not Found.
Checking for DirectFB and DFB++... Not Found.
Checking for vidix... Enabled video-out vidix.
Checking for Xv... Enabled video-xv.
Checking for Xinerama... Enabled Xinerama.
Creating temporary config.h and config.mak
config.h is unchanged
config.mak is unchanged
Configure is finished. Please check config.log in case of problems.
-----------
latest config.log:
-----------
Parameters ''
PKG_CONFIG_PATH 'lib-dir/pkgconfig:datadir/pkgconfig:/home/local/lib/pkgconfig:/usr/local/lib/pkgconfig'
Testing system and cpu type.----------------------------
uname -a: Linux gondor.npg.net 2.6.25.9-40.fc8 #1 SMP Fri Jun 27 16:25:53 EDT 2008 i686 i686 i386 GNU/Linux
g++ -dumpmache: i386-redhat-linux
Checking for pkg-config.-------------------------------
0.22
Checking for ffmpeg.------------------------------------
try to use pkg-config.
-L/usr/local/lib -lpostproc  
/tmp/softdevice-conf-16396-3314-21938.c:4:21: Fehler: avcodec.h: Datei oder Verzeichnis nicht gefunden
/usr/local/include/avio.h:114: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:115: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:125: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/avio.h:134: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:135: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:140: Fehler: ?uint64_t? wurde nicht deklariert
/usr/local/include/avio.h:141: Fehler: ?uint64_t? wurde nicht deklariert
/usr/local/include/avio.h:184: Fehler: ?uint64_t? bezeichnet keinen Typ
/usr/local/include/avio.h:191: Fehler: ?uint64_t? bezeichnet keinen Typ
/usr/local/include/avio.h:219: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:250: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avio.h:253: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/avformat.h:41: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h: In function ?void av_init_packet(AVPacket*)?:
/usr/local/include/avformat.h:62: Fehler: ?AV_NOPTS_VALUE? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/avformat.h: At global scope:
/usr/local/include/avformat.h:117: Fehler: expected initializer before ?attribute_deprecated?
/usr/local/include/avformat.h:137: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:142: Fehler: Verwendung des enum ?PixelFormat? ohne vorherige Deklaration
/usr/local/include/avformat.h:155: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:156: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:177: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:178: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:274: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:283: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:299: Fehler: ?AVRational? bezeichnet keinen Typ
/usr/local/include/avformat.h:303: Fehler: Verwendung des enum ?AVDiscard? ohne vorherige Deklaration
/usr/local/include/avformat.h:341: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:385: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:416: Fehler: expected ?;? before ?*? token
/usr/local/include/avformat.h:428: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:428: Fehler: invalid type in declaration before ?;? token
/usr/local/include/rtp.h:28: Fehler: ?AVCodecContext? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:28: Fehler: ?codec? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:28: Fehler: expected primary-expression before ?int?
/usr/local/include/rtp.h:28: Fehler: initializer Ausdrucksliste als zusammengesetzten Ausdruck behandelt
/usr/local/include/rtp.h:31: Fehler: ?AVCodecContext? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:31: Fehler: ?codec? wurde in diesem G?ltigkeitsbereich nicht definiert
/usr/local/include/rtp.h:37: Fehler: expected ?,? or ?...? before ?*? token
/usr/local/include/rtp.h:95: Fehler: Verwendung des enum ?CodecType? ohne vorherige Deklaration
/usr/local/include/rtp.h:96: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/rtsp.h:46: Fehler: ?uint32_t? bezeichnet keinen Typ
/usr/local/include/rtsp.h:70: Fehler: ?uint32_t? bezeichnet keinen Typ
/usr/local/include/avformat.h:448: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:449: Fehler: Verwendung des enum ?CodecType? ohne vorherige Deklaration
/usr/local/include/avformat.h:449: Fehler: invalid type in declaration before ?;? token
/usr/local/include/avformat.h:460: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avformat.h:474: Fehler: ?uint8_t? wurde nicht deklariert
/usr/local/include/avformat.h:500: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/usr/local/include/avformat.h:500: Fehler: invalid type in declaration before ?;? token
/usr/local/include/avformat.h:501: Fehler: Verwendung des enum ?CodecID? ohne vorherige Deklaration
/tmp/softdevice-conf-16396-3314-21938.c: In function ?int main()?:
/tmp/softdevice-conf-16396-3314-21938.c:8: Fehler: ?avcodec_init? wurde in diesem G?ltigkeitsbereich nicht definiert
/tmp/softdevice-conf-16396-3314-21938.c:9: Fehler: ?avcodec_register_all? wurde in diesem G?ltigkeitsbereich nicht definiert
Checking for ffmpeg/libswscale.------------------------------------
Checking for pp_postprocess 1st arg. -----
Checking ffmpeg for member of AVCodecContext: error_recognition ----
Checking for ALSA sound.------------------
Checking for OSS sound.------------------
Checking for linux framebuffer.------------------
Checking for yaepg patch.------------------
g++ -O2 -g -Wall  -D_GNU_SOURCE -I../../.. -c -o /tmp/softdevice-conf-18340-3314-12704 /tmp/softdevice-conf-16396-3314-21938.c >> config.log 2>&1
/tmp/softdevice-conf-16396-3314-21938.c: In function ?int test_func(cOsd*)?:
/tmp/softdevice-conf-16396-3314-21938.c:3: Fehler: ?class cOsd? hat kein Element namens ?vidWin?
make: *** [/tmp/softdevice-conf-18340-3314-12704] Fehler 1
Checking for DirectFB and DFB++.------------------
Package dfb++ was not found in the pkg-config search path.
Perhaps you should add the directory containing `dfb++.pc'
to the PKG_CONFIG_PATH environment variable
No package 'dfb++' found
Checking for vidix.------------------------
Checking for Xv.-----------------------------
Checking for Xinerama.-----------------------------
-------------

Obviously avcodec.h is not found, but it exists in /usr/local/include/libavcodec
(but then why does it compile at all?)

I eliminated all existing avcodec.h on my system and reinstalled ffmpeg yesterday (from cvs)

???

Thanks!



-------------------------------------------------------

Date: 2008-Dec-19 11:14
By: lucke

Comment:
I was not concerned about the directory of running your 'make plugins'. Our configure script checks for precence of member 'error_recognition' in struct 'AVCodecContext' which is declared in file (guess which): 'avcodec.h' .
Concluding backward: If this member is not detected, there is an old version of avcodec.h on your system which doesn't provide it (or and unexpected error happens) and 'error_resilience' will be used instead. Checking for this is logged via stdout and in config.log. Please attach/show both information.
-------------------------------------------------------

Date: 2008-Dec-19 08:51
By: erbse

Comment:
Yes I reran configure. 

I was not quite precise, the error occurs on starting "make all plugins" or "make install" in $SOURCEDIR (not when I start "make" in $SOURCEDIR/PLUGINS/src/softdevice)
-------------------------------------------------------

Date: 2008-Dec-19 00:42
By: lucke

Comment:
Did you rerun configure ?
error_recognition vs. error_resilience should be detected by configure since the last change on sept. 21 2008.
-------------------------------------------------------

Date: 2008-Dec-18 22:39
By: erbse

Comment:
Hi, thank you so much for replying so quickly. I eliminated all occurrencies of avcodec.h (I had thought I had deleted any former ffmpeg but indeed found one instance where I had not supected it) and eliminated an reincompiled ffmepg just to be sure.

I also recompiled softdevice but nos on starting "make" I get the following error:

-----------------

make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   utils.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   i18n.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   video.c
g++ -O2 -g -Wall -fPIC -Woverloaded-virtual   -c -DHAVE_CONFIG -D__STDC_CONSTANT_MACROS -DPLUGIN_NAME_I18N='"softdevice"' -D_GNU_SOURCE -DPLUGINLIBDIR='"./PLUGINS/lib"' -DSHM_SUPPORT -I../../../include -I../../../../DVB/include -I/usr/local/include   mpeg2decoder.c
mpeg2decoder.c: In constructor &#65533;cStreamDecoder::cStreamDecoder(AVCodecContext*, bool)&#65533;:
mpeg2decoder.c:146: Fehler: &#65533;struct AVCodecContext&#65533; hat kein Element namens &#65533;error_resilience&#65533;
make[1]: *** [mpeg2decoder.o] Fehler 1
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/softdevice'
Plugin status:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/status'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/status'
Plugin streamdev:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/streamdev'
Plugin svdrpdemo:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/svdrpdemo'
Plugin vdrrip:
make[1]: Entering directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'
make[1]: F&#65533;r das Ziel &#65533;all&#65533; ist nichts zu tun.
make[1]: Leaving directory `/root/vdr-1.6.0/PLUGINS/src/vdrrip-0.3.0'

*** failed plugins: softdevice
--------

Hoping for further advice - good night
Erbse
-------------------------------------------------------

Date: 2008-Dec-18 18:23
By: lucke

Comment:
Sollte nicht passieren. Da gibt es bei Dir eine alte Version von avcodec.h in der LIBAVCODEC_VERSION_INT < ((52<<16)+(0<<8)+0) definiert ist. Entferne die alten Header-Files von FFmpeg und rekonfiguriere und ?bersetzte softdevice neu.
Should not happen. There is an old version of avcodec.h on your system which defines LIBAVCODEC_VERSION_INT less than ((52<<16)+(0<<8)+0). Remove old FFmpeg headers and reconfigure and recompile softdevice.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=14940&group_id=2051


