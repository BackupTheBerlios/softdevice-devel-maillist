<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Softdevice-devel] viafb, TVout, field parity, DirectFB, cle266 HW decoding
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/softdevice-devel/2007q1/index.html" >
   <LINK REL="made" HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20viafb%2C%20TVout%2C%20field%20parity%2C%20DirectFB%2C%0A%20cle266%20HW%20decoding&In-Reply-To=%3C45BA0874.6040904%40huillard.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002699.html">
   <LINK REL="Next"  HREF="002703.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Softdevice-devel] viafb, TVout, field parity, DirectFB, cle266 HW decoding</H1>
    <B>Nicolas Huillard</B> 
    <A HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20viafb%2C%20TVout%2C%20field%20parity%2C%20DirectFB%2C%0A%20cle266%20HW%20decoding&In-Reply-To=%3C45BA0874.6040904%40huillard.net%3E"
       TITLE="[Softdevice-devel] viafb, TVout, field parity, DirectFB, cle266 HW decoding">nicolas at huillard.net
       </A><BR>
    <I>Fri Jan 26 14:56:04 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002699.html">[Softdevice-devel] viafb, TVout, field parity, DirectFB,	cle266 HW decoding
</A></li>
        <LI>Next message: <A HREF="002703.html">[Softdevice-devel] viafb, TVout, field parity, DirectFB,	cle266 HW decoding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2702">[ date ]</a>
              <a href="thread.html#2702">[ thread ]</a>
              <a href="subject.html#2702">[ subject ]</a>
              <a href="author.html#2702">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Laz a &#233;crit :
&gt;&gt;<i>Is there anything in DirectFB which has chagned drastically for the
</I>&gt;&gt;<i>Unichrome driver?
</I>&gt;<i> 
</I>&gt;<i> Sorted it: I had pixelformat=ARGB instead of AiRGB in /etc/directfbrc. 
</I>&gt;<i> Looks like a check for the pixel format has been added when setting 
</I>&gt;<i> DLOP_ALPHACHANNEL! Not sure quite when I added that, or whether I even 
</I>&gt;<i> need it now!
</I>
In my case, ARGB works and AiRGB leads to no video on the screen, except
when the OSD is openned (softdevice 0.3.1).
IIRC, this is softdevice change. Not DirectFB.

Here's my /etc/directfbrc :

mode=720x576
depth=32
pixelformat=ARGB
sync
unichrome-revision=3
no-vt

What is this &quot;sync&quot; option (setting or unsetting it doesn't change the
field parity artifacts on TV.

My full VDR output is (field parity is here and enabled) :

[softdevice] processing args
[softdevice]   argv [0] = softdevice
[softdevice]   argv [1] = -ao
[softdevice] using alsa device default
[softdevice]   argv [3] = -vo
[softdevice] enabling field parity
[softdevice] enabling CLE266 HW decoding
[setup-softdevice] alsa ac3Mode set to: 1
[setup-softdevice] alsa AC3 device set to: spdif
[setup-softdevice] A/V Offset set to (0)
[setup-softdevice] Cropping 0 lines from bottom
[setup-softdevice] Cropping 0 columns from left
[setup-softdevice] cropping mode set to 2 (16:9)
[setup-softdevice] cropping mode toggle key set to 2 (User2)
[setup-softdevice] Cropping 0 columns from right
[setup-softdevice] Cropping 0 lines from top
[setup-softdevice] deinterlace method set to 0 none
[setup-softdevice] mainMenu: 1
[setup-softdevice] setting alpha blend mode to pseudo
[softdevice] picture mirroring set to 0 (off)
[setup-softdevice] pixel format set to (I420)
[setup-softdevice] shouldSuspend to: 1
[setup-softdevice] syncTimerMode: sig
[softdevice] UseStretchBlitset to off
[setup-softdevice] vidBrightness: 50
[setup-softdevice] vidContrast: 50
[setup-softdevice] vidHue: 50
[setup-softdevice] vidSaturation: 50
[setup-softdevice] startup aspect set to (4:3 normal)
[softdevice] initializing Plugin
[softdevice] Initializing Video Out
[softdevice] ffmpeg build(3344384)
[dfb] init

     =======================|  DirectFB 1.0.0-rc2  |=======================
          (c) 2001-2006  United Cultures of Earth - go for outer space!
          (c) 2000-2004  Convergence (integrated media) GmbH
        ----------------------------------------------------------------

(*) DirectFB/Core: Single Application Core. (2007-01-24 20:18)
(*) Direct/Memcpy: Using SSE optimized memcpy()
(*) DirectFB/Core: doing sync()...
(*) Direct/Thread: Running 'LiRC Input' (INPUT, 879)...
(*) DirectFB/Input: LIRC Device 0.2 (directfb.org)
(*) DirectFB/Genefx: MMX detected and enabled
(*) DirectFB/Graphics: VIA/S3G CLE266/UniChrome 0.4 (-)
(*) DirectFB/Core/WM: Default 0.2 (directfb.org)
[dfb] RAM: 33288192 bytes
[dfb] Accellerated Functions: FillRectange DrawRectange DrawLine
FillTriangle Blit StretchBlit All
[dfb] Drawing Flags: Blend Xor
[dfb] Surface Blitting Flags: BlendAlpha BlendColorAlpha Colorize
SrcColorkey DstColorkey Deinterlace
[dfb] Supported video Modes are: <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">720x576 at 32</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A>
[dfb] Enumerating display Layers
[dfb] Configuring CooperativeLevel for OSD
Layer 0 VIA CLE266 Graphics  Type: graphics
  Caps: alphachannel brightness contrast opacity saturation src_colorkey
surface
Layer 1 VIA Unichrome Video  Type: graphics picture video
  Caps: deinterlacing dst_colorkey levels field_parity opacity
screen_location surface
Initialising CLE266 decoder (/dev/fb0): success!
CLE266: Creating buffers for decoder
CLE266: Creating buffer number 0
CLE266: Creating buffer number 1
CLE266: Creating buffer number 2
CLE266: Creating buffer number 3
CLE266: passing mpegfb_stride
CLE266: passing buffers to decoder
[dfb] (osdLayer): flags, options, pixelformat: 0000000f, 00000000 00418c04
[dfb] (osdLayer): width, height:               720 576
[dfb] osdLayer has alpha channel
[dfb] Set DLBM_TRIPLE for layer [VIA Unichrome Video]
[dfb] DLOP_FIELD_PARITY supported by layer [VIA Unichrome Video]
[surface capabilities] scrSurface: videoonly double-buffered flipping
PixelFormat = 0x00418c04
[dfb] width = 720, height = 576
[dfb] got fmt = 0x00418c04 bpp = 32
[dfb] Using this layer for OSD: (VIA CLE266 Graphics - [720x576])
[surface capabilities] osdSurface: videoonly double-buffered flipping
PixelFormat = 0x00418c04
[dfb] Configuring CooperativeLevel for Overlay
[surface capabilities] videoSurface: videoonly PixelFormat = 0x0810060a
[dfb] Using this layer for OSD:        VIA CLE266 Graphics
[dfb] Using this layer for Video out:  VIA Unichrome Video
[dfb] Display frame time is 19994 microseconds
[dfb] (re)configuring Videolayer to 720 x 576 (720x576)
[dfb] SetParams: Enabling DLOP_FIELD_PARITY
[surface capabilities] videoSurface: videoonly flipping triple-buffered
PixelFormat = 0x08100609
[dfb] (re)configured 0x08100609
[softdevice] Video Out seems to be OK
[softdevice] Initializing Audio Out
[softdevice] Audio out seems to be OK
[softdevice] A/V devices initialized, now initializing MPEG2 Decoder
[dfb] (re)configuring Videolayer to 736 x 576 (736x416)
[dfb] SetParams: Enabling DLOP_FIELD_PARITY
[surface capabilities] videoSurface: videoonly flipping triple-buffered
PixelFormat = 0x08100609
[dfb] (re)configured 0x08100609

-- 
NH

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002699.html">[Softdevice-devel] viafb, TVout, field parity, DirectFB,	cle266 HW decoding
</A></li>
	<LI>Next message: <A HREF="002703.html">[Softdevice-devel] viafb, TVout, field parity, DirectFB,	cle266 HW decoding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2702">[ date ]</a>
              <a href="thread.html#2702">[ thread ]</a>
              <a href="subject.html#2702">[ subject ]</a>
              <a href="author.html#2702">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/softdevice-devel">More information about the Softdevice-devel
mailing list</a><br>
</body></html>
