<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Softdevice-devel] error when starting vdr &amp; softdevice on g550
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/softdevice-devel/2006q3/index.html" >
   <LINK REL="made" HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20error%20when%20starting%20vdr%20%26%20softdevice%20on%20g550&In-Reply-To=%3C200607182304.35860.stefan%40lucke.in-berlin.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002278.html">
   <LINK REL="Next"  HREF="002281.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Softdevice-devel] error when starting vdr &amp; softdevice on g550</H1>
    <B>Stefan Lucke</B> 
    <A HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20error%20when%20starting%20vdr%20%26%20softdevice%20on%20g550&In-Reply-To=%3C200607182304.35860.stefan%40lucke.in-berlin.de%3E"
       TITLE="[Softdevice-devel] error when starting vdr &amp; softdevice on g550">stefan at lucke.in-berlin.de
       </A><BR>
    <I>Tue Jul 18 23:04:35 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002278.html">[Softdevice-devel] error when starting vdr &amp; softdevice on g550
</A></li>
        <LI>Next message: <A HREF="002281.html">[Softdevice-devel]  Blinking/flickering with dvb-subtitles
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2279">[ date ]</a>
              <a href="thread.html#2279">[ thread ]</a>
              <a href="subject.html#2279">[ subject ]</a>
              <a href="author.html#2279">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Dienstag 18 Juli 2006 20:02, Torgeir Veimo wrote:
&gt;<i> I haven't been using DirectFB lately, but tried today with DirectFB 
</I>&gt;<i> current cvs on a Matrox G550. Here's the log output. Does anyone know 
</I>&gt;<i> what might be the problem?
</I>&gt;<i> [<A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">root at htpc</A> VDR]# vdr -v /video/vdr -s &quot;killall vdr;/bin/false&quot; 
</I>&gt;<i> -P&quot;softdevice -vo dfb:mgatv&quot; -P&quot;remote -i /dev/input/event1&quot; -P&quot;softplay 
</I>
TV out at 1280x1024 ??

&gt;<i> (*) DirectFB/Graphics: Matrox G550 0.7 (directfb.org)
</I>&gt;<i> (*) DirectFB/Core/WM: Default 0.2 (Convergence GmbH)
</I>&gt;<i> [dfb] RAM: 16777216 bytes
</I>
For VGA out int 1280x1024 16M is not enough. If you've mor RAM
on your card, you'll need matrox full memory patch.

&gt;<i> [dfb] Accellerated Functions: FillRectange DrawRectange DrawLine 
</I>&gt;<i> FillTriangle Blit StretchBlit All
</I>&gt;<i> [dfb] Drawing Flags: Blend Src.premultiply
</I>&gt;<i> [dfb] Surface Blitting Flags: BlendAlpha BlendColorAlpha Colorize 
</I>&gt;<i> SrcColorkey SrcPremultiply Deinterlace
</I>&gt;<i> [dfb] Supported video Modes are: <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">640x480 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">640x480 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">640x480 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">640x480 at 8</A> 
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">640x480 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> 
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">800x600 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x768 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x768 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x768 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x768 at 8</A> 
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x768 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x768 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x768 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1152x864 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1152x864 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1152x864 at 8</A> 
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1152x864 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1152x864 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1152x864 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1024x1024 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1280x1024 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1280x1024 at 8</A> 
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1280x1024 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1280x1024 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1280x1024 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1600x1200 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1600x1200 at 8</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1600x1200 at 8</A> 
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1280x720 at 32</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">1280x720 at 16</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">720x576 at 32</A> <A HREF="https://lists.berlios.de/mailman/listinfo/softdevice-devel">768x576 at 32</A>
</I>&gt;<i> [dfb] Enumerating display Layers
</I>&gt;<i> Layer 0 FBDev Primary Layer  Type: graphics
</I>&gt;<i>    Caps: brightness contrast saturation surface
</I>&gt;<i> Layer 1 Matrox Backend Scaler  Type: graphics picture video
</I>&gt;<i>    Caps: brightness contrast deinterlacing dst_colorkey screen_location 
</I>&gt;<i> surface
</I>&gt;<i> [dfb] New layer name allocation failed. Trying old (dfb-0.9.20) layer name
</I>&gt;<i> Layer 0 FBDev Primary Layer  Type: graphics
</I>&gt;<i>    Caps: brightness contrast saturation surface
</I>&gt;<i> Layer 1 Matrox Backend Scaler  Type: graphics picture video
</I>&gt;<i>    Caps: brightness contrast deinterlacing dst_colorkey screen_location 
</I>&gt;<i> surface
</I>&gt;<i> [dfb]: could not find suitable videolayer
</I>&gt;<i>   (!!!)  *** WARNING [Application exited without deinitialization of 
</I>&gt;<i> DirectFB!] *** [core.c:741 in dfb_core_deinit_check()]
</I>
There is another bug when using BES layer insteadof stretch blitmode.
Some flags set in some combination is now not accepted.
DSCAPS_DOUBLE seems to confilct with DLCONF_BUFFERMODE on setting
videoLayer's configuration ;-) .
For me I just disable failed configuration flags in SetParams(), after code
for triple buffering:

        if (dlc.buffermode == DLBM_UNKNOWN)
        {
          dlc.buffermode = DLBM_BACKVIDEO;
fprintf(stderr, &quot;[dfb]: Testconfiguration (DBLM_BACKVIDEO) ??\n&quot;);
          try
          {
            videoLayer-&gt;TestConfiguration(dlc, &amp;failed);
            fprintf(stderr, &quot;[dfb]: Testconfiguration (DBLM_BACKVIDEO) OK\n&quot;);
          }
          catch (DFBException *ex)
          {
            if (failed &amp; DLCONF_BUFFERMODE)
            {
              fprintf(stderr, &quot;[dfb]: SetParams: failed to set buffermode &quot;
                      &quot;to back video, reverting to normal\n&quot;);
              dlc.buffermode = DLBM_FRONTONLY;
            } else {
fprintf(stderr, &quot;[dfb]: Testconfiguration failed %08x\n&quot;, failed);
dlc.flags = (DFBDisplayLayerConfigFlags) (dlc.flags &amp; ~failed);
            }
            delete ex;
          }
        }

&gt;<i> 
</I>&gt;<i> My /etc/directfbrc:
</I>&gt;<i> 
</I>&gt;<i> mode=1280x1024
</I>&gt;<i> depth=32
</I>&gt;<i> pixelformat=ARGB
</I>&gt;<i> 
</I>
For mgatv, you need a directfbrc like this:
mode=720x576
depth = 32
matrox-crtc2
matrox-tv-standard=pal
primary-layer=2
pixelformat=ARGB
matrox-cable-type=composite


-- 
Stefan Lucke

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002278.html">[Softdevice-devel] error when starting vdr &amp; softdevice on g550
</A></li>
	<LI>Next message: <A HREF="002281.html">[Softdevice-devel]  Blinking/flickering with dvb-subtitles
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2279">[ date ]</a>
              <a href="thread.html#2279">[ thread ]</a>
              <a href="subject.html#2279">[ subject ]</a>
              <a href="author.html#2279">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/softdevice-devel">More information about the Softdevice-devel
mailing list</a><br>
</body></html>
