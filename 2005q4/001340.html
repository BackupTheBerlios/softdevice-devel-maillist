<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Softdevice-devel] [PATCH] Gentoo packaging
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/softdevice-devel/2005q4/index.html" >
   <LINK REL="made" HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20%5BPATCH%5D%20Gentoo%20packaging&In-Reply-To=%3C434B971A.1060804%40users.sourceforge.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001339.html">
   <LINK REL="Next"  HREF="001341.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Softdevice-devel] [PATCH] Gentoo packaging</H1>
    <B>Lucian Muresan</B> 
    <A HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20%5BPATCH%5D%20Gentoo%20packaging&In-Reply-To=%3C434B971A.1060804%40users.sourceforge.net%3E"
       TITLE="[Softdevice-devel] [PATCH] Gentoo packaging">lucianm at users.sourceforge.net
       </A><BR>
    <I>Tue Oct 11 12:42:34 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001339.html">[Softdevice-devel] [PATCH] Gentoo packaging
</A></li>
        <LI>Next message: <A HREF="001341.html">[Softdevice-devel] [PATCH] Gentoo packaging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1340">[ date ]</a>
              <a href="thread.html#1340">[ thread ]</a>
              <a href="subject.html#1340">[ subject ]</a>
              <a href="author.html#1340">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Nicolas Huillard wrote:
&gt;<i> Nicolas Huillard a &#233;crit :
</I>&gt;<i> 
</I>&gt;&gt;<i>Lucian Muresan a &#233;crit :
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Stefan Lucke wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>It would be nice to have better support for some distributions. But I'd
</I>&gt;&gt;&gt;&gt;<i>like to delay that to the following series, so I can do some test
</I>&gt;&gt;&gt;&gt;<i>myself on my epia gentoo box.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Ok, please do so, maybe Nicolas Huillard will also provide some Debian
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I'll update the Debian package for the configure stuff, based on you
</I>&gt;&gt;<i>patch. I'll also package softplay, sooner or later...
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Well, I didn't check your diff before packaging myself. It appears to
</I>&gt;<i> add Gentoo-specific things in the Makefile : will it run cleanly on
</I>&gt;<i> other distros ?
</I>
That would run, it only renames files reaey to use as ebuilds (&quot;packages&quot;).

&gt;<i> When packaging for Debian, we usually do not modify upstream for the
</I>&gt;<i> packaging needs, because packaging has really different problems than
</I>&gt;<i> coding.
</I>
Your're right, I'd better provide a script in that gentoo subfolder (it
would then only rely on the directory structure, to be able to get the
current plugin version from softdevice.c.

However, even if modifying upstream for packaging needs isn't nice,
sometimes it's useful if configure scripts and makefiles follow certain
rules that won't harm, like for example, using a lot variables that they
only set if found unset (example: gentoo likes to control the prefix
where a package is installed by setting the variable DESTDIR, which
could have a default value that the software author likes for example,
in the upstream configure script or makefile, but actually only uses
that value if DESTDIR is not aleready set from the outside...)
I guess Stefan does exactly this with the PKG_CONFIG_PATH variable, and
fortunately the rest of the build also runs cleanly on gentoo (if
dependencies are satisfied), I only have some doubts in the results of
those more specific tests made in the configure script, if they fail,
the makefile is generated too and the gentoo ebuild continues as if
everything would be ok and then only later compilation fails, and one
has to figure out why, which might be difficult for non-programmers. I
think the configure script lacks exit (0 for success, 1 for failure)
values to signalize the status  at some points in the script, which
Stefan knows better. That way, the gentoo script would be able to fail
with a proper message (using the &quot;die&quot; command if configure failed, the
&quot;gentoo way&quot;).

That being said, I was about to update the gfentoo packaging stuff
anyway (will take out those gentoo specifics from the Makefile, and
maybe try to pus some 'exit' statements in the configure script), so
stay tuned.

Lucian


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001339.html">[Softdevice-devel] [PATCH] Gentoo packaging
</A></li>
	<LI>Next message: <A HREF="001341.html">[Softdevice-devel] [PATCH] Gentoo packaging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1340">[ date ]</a>
              <a href="thread.html#1340">[ thread ]</a>
              <a href="subject.html#1340">[ subject ]</a>
              <a href="author.html#1340">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/softdevice-devel">More information about the Softdevice-devel
mailing list</a><br>
</body></html>
