<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Softdevice-devel] Save 10% CPU by sleeping before IDirectFBSurface::Flip()
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/softdevice-devel/2006q1/index.html" >
   <LINK REL="made" HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20Save%2010%25%20CPU%20by%20sleeping%20before%20IDirectFBSurface%3A%3AFlip%28%29&In-Reply-To=%3C20060120104832.GB3805%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001697.html">
   <LINK REL="Next"  HREF="001699.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Softdevice-devel] Save 10% CPU by sleeping before IDirectFBSurface::Flip()</H1>
    <B>Marko M&#228;kel&#228;</B> 
    <A HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20Save%2010%25%20CPU%20by%20sleeping%20before%20IDirectFBSurface%3A%3AFlip%28%29&In-Reply-To=%3C20060120104832.GB3805%40localhost.localdomain%3E"
       TITLE="[Softdevice-devel] Save 10% CPU by sleeping before IDirectFBSurface::Flip()">marko.makela at hut.fi
       </A><BR>
    <I>Fri Jan 20 11:48:32 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="001697.html">[Softdevice-devel] Save 10% CPU by sleeping before IDirectFBSurface::Flip()
</A></li>
        <LI>Next message: <A HREF="001699.html">[Softdevice-devel] Save 10% CPU by sleeping before IDirectFBSurface::Flip()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1698">[ date ]</a>
              <a href="thread.html#1698">[ thread ]</a>
              <a href="subject.html#1698">[ subject ]</a>
              <a href="author.html#1698">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Jan 20, 2006 at 08:54:41AM +0100, Stefan Lucke wrote:
&gt;<i> There was a change posted by Ville on directfb-dev list in october.
</I>&gt;<i> Thread title:
</I>&gt;<i> 
</I>&gt;<i> Experimental matrox field parity/triple buffering improvement
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://mail.directfb.org/pipermail/directfb-dev/2005-October/000851.html">http://mail.directfb.org/pipermail/directfb-dev/2005-October/000851.html</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> But I didn't tested this myself. Even feedback from others was low.
</I>
I vaguely remember that patch.  However, looking at the patch (and having
limited understanding of how the things work), I can't see how this would
eliminate the busy-waiting.  As far as I understood, the Flip() call is not
waiting for vblank, but for device idle (DMA and StretchBlit completed).

I didn't notice any tearing with the usleep() added, but I didn't test or
look very hard.

I'd like to know if YUV() is executed in the same thread as the MPEG decoder.
Well, I guess there is some VDR thread that can make use of the usleep()
scheduling slot, but can it really use up one whole slot per video frame?
The MPEG decoder most certainly could make use of all that CPU time.

What about the OSD methods, are they executed in the same thread as YUV()?

&gt;<i> Perhaps I should do some tests.
</I>
I would really appreciate it, as I don't really know how DMA and interrupts
work on modern PC hardware or how these things are handled in the Linux
kernel and userspace.

	Marko

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001697.html">[Softdevice-devel] Save 10% CPU by sleeping before IDirectFBSurface::Flip()
</A></li>
	<LI>Next message: <A HREF="001699.html">[Softdevice-devel] Save 10% CPU by sleeping before IDirectFBSurface::Flip()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1698">[ date ]</a>
              <a href="thread.html#1698">[ thread ]</a>
              <a href="subject.html#1698">[ subject ]</a>
              <a href="author.html#1698">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/softdevice-devel">More information about the Softdevice-devel
mailing list</a><br>
</body></html>
