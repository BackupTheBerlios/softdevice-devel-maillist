<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Softdevice-devel] Suspend patch for vdr
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/softdevice-devel/2005q3/index.html" >
   <LINK REL="made" HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20Suspend%20patch%20for%20vdr&In-Reply-To=%3C20050826223132.GA235005%40kosh.hut.fi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001150.html">
   <LINK REL="Next"  HREF="001153.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Softdevice-devel] Suspend patch for vdr</H1>
    <B>Marko M&#228;kel&#228;</B> 
    <A HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20Suspend%20patch%20for%20vdr&In-Reply-To=%3C20050826223132.GA235005%40kosh.hut.fi%3E"
       TITLE="[Softdevice-devel] Suspend patch for vdr">marko.makela at hut.fi
       </A><BR>
    <I>Sat Aug 27 00:31:32 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001150.html">[Softdevice-devel] Suspend patch for vdr
</A></li>
        <LI>Next message: <A HREF="001153.html">[Softdevice-devel] Suspend patch for vdr
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1151">[ date ]</a>
              <a href="thread.html#1151">[ thread ]</a>
              <a href="subject.html#1151">[ subject ]</a>
              <a href="author.html#1151">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Aug 26, 2005 at 07:06:28PM +0300, Marko M&#228;kel&#228; wrote:
&gt;<i> On Wed, Aug 24, 2005 at 05:54:58PM +0200, Martin Wache wrote:
</I>&gt;<i> &gt; But feel free to send a patch when you are ready, I will surely give it
</I>&gt;<i> &gt; a try.
</I>&gt;<i> 
</I>&gt;<i> Here's my initial patch against vdr-1.3.30.  This patch also contains my fix
</I>&gt;<i> to the bug that the Power key is ignored during playback.
</I>
Please get the improved patch
<A HREF="http://www.funet.fi/~msmakela/electronics/relay/suspend-relay.patch">http://www.funet.fi/~msmakela/electronics/relay/suspend-relay.patch</A>
instead.  For clarity, I removed the Power key patch and ran diff
on vanilla vdr-1.3.30 sources (before applying any other patches).

The improved patch fixes a few things:

* In suspend mode, if you started playing a recording, it would keep
  reading data from the disk.  The improved patch will start playing
  recordings in Pause mode if playback is suspended.

* There is a commented-out assignment &quot;LastActivity = 1&quot; in the kSuspend
  handler of vdr.c.  If you enable it, the Suspend key will initiate a
  timeout mechanism (default 60+300 seconds after the key has been pressed,
  or 300 seconds after all timers have completed).  The timeout will be
  canceled if any other button is pressed.  In other words, you will be
  able to use the Suspend key as an intelligent power button.  Usage
  scenario: You're interrupted while watching a recording, and you hit
  Suspend.  If you get back in less than 6 minutes, you will be able to
  continue watching.  Otherwise, the system will power off and wait for
  the next nvram-wakeup event or power-on request by user.

I would appreciate prompt feedback, because I would like to announce
this patch on the vdr mailing list in a few days.

	Marko

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001150.html">[Softdevice-devel] Suspend patch for vdr
</A></li>
	<LI>Next message: <A HREF="001153.html">[Softdevice-devel] Suspend patch for vdr
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1151">[ date ]</a>
              <a href="thread.html#1151">[ thread ]</a>
              <a href="subject.html#1151">[ subject ]</a>
              <a href="author.html#1151">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/softdevice-devel">More information about the Softdevice-devel
mailing list</a><br>
</body></html>
