<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Softdevice-devel] A-V sync problems with directfb
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/softdevice-devel/2005q3/index.html" >
   <LINK REL="made" HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20A-V%20sync%20problems%20with%20directfb&In-Reply-To=%3C1066.144.32.52.69.1127809754.squirrel%40webmail.projectmeerkat.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001267.html">
   <LINK REL="Next"  HREF="001269.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Softdevice-devel] A-V sync problems with directfb</H1>
    <B>Laz</B> 
    <A HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20A-V%20sync%20problems%20with%20directfb&In-Reply-To=%3C1066.144.32.52.69.1127809754.squirrel%40webmail.projectmeerkat.co.uk%3E"
       TITLE="[Softdevice-devel] A-V sync problems with directfb">laz at club-burniston.co.uk
       </A><BR>
    <I>Tue Sep 27 10:29:14 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001267.html">[Softdevice-devel] A-V sync problems with directfb on	unichrome...
</A></li>
        <LI>Next message: <A HREF="001269.html">[Softdevice-devel] A-V sync problems with directfb on	unichrome...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1268">[ date ]</a>
              <a href="thread.html#1268">[ thread ]</a>
              <a href="subject.html#1268">[ subject ]</a>
              <a href="author.html#1268">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hmmmm...I've rebuilt vdr and all plugins from scratch and not it seems to
behave itself more. If I set A-V Delay to -1 I get almost perfect A-V sync
 (this didn't seem to have any effect before!). Unfortunately, I'm getting
lots of clicks and dropouts in the sound (before, the sounds was fine...).
The video is relatively smooth but dropps the odd frame every few seconds.
Sometimes it seems to skip forward about a second or so! Similar effects
with both live TV and replaying recordings.

I've no idea what I've done to make it get to this stage but it is quite
watchable, once you get used to the sound dropouts!

&gt;&gt;<i> I've just tried both of them and I don't see any real differences
</I>&gt;&gt;<i> between
</I>&gt;&gt;<i> them!
</I>
Tried again, and changing the Flip to WAITFORSYNC made it replay stuff in
slow motion, somehow.

&gt;&gt;<i> Does StretchBlit work on Unichrome? Should I try enabling that? I think
</I>&gt;&gt;<i> it
</I>&gt;&gt;<i> bailed out when I tried it before.
</I>&gt;<i>
</I>&gt;<i> Stretchblit doesn't work accelerated I think.
</I>
I'm now in the process of comparing the source of df_xine and video-dfb.c.
I get perfect playback from df_xine which, as far as I can tell, is using
StretchBlit (although I've only tested with 720x576 video on a 720x576
framebuffer so far). It also uses the WAITFORSYNC flag for the Flip.

If df_xine can do it, I'm sure softdevice can be convinced to give me
smooth video and audio!

:<i>-)
</I>
&gt;<i> So for now I did a short test on my gentoo epia system. My old gentoo
</I>&gt;<i> does not like my new kernel. No sound device available. With the old
</I>&gt;<i> kernel
</I>&gt;<i> 2.6.7, there is a strange A/V sync behavior vieable. Recordings started at
</I>&gt;<i> full speed, ways too fast. Video is not throttled to audio. Could it be
</I>&gt;<i> that rtc timer does not work ? My main systems cannot use /dev/rtc
</I>&gt;<i> for syncing as chrony has this device. But on my epia box, there is no
</I>&gt;<i> chrony.
</I>&gt;<i>
</I>&gt;<i> Can you try to choose another sync timer ? mpeg2decoder line 463:
</I>&gt;<i> syncTimer = new cSyncTimer (emRtcTimer);
</I>&gt;<i>
</I>&gt;<i> change emRtcTimer to emSigTimer or emUsleepTimer .
</I>&gt;<i> Shouldn't that be emSigTimer always ?
</I>
I'll look into rtc and timer issues this evening.

&gt;<i> Let's see when emerge -e world finishs .
</I>
I gave up on gentoo because it always used to drag in packages which
required a rebuild of loads of stuff!

Cheers,

Laz

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001267.html">[Softdevice-devel] A-V sync problems with directfb on	unichrome...
</A></li>
	<LI>Next message: <A HREF="001269.html">[Softdevice-devel] A-V sync problems with directfb on	unichrome...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1268">[ date ]</a>
              <a href="thread.html#1268">[ thread ]</a>
              <a href="subject.html#1268">[ subject ]</a>
              <a href="author.html#1268">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/softdevice-devel">More information about the Softdevice-devel
mailing list</a><br>
</body></html>
