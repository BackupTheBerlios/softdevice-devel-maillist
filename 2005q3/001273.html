<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Softdevice-devel] A-V sync problems with directfb on
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/softdevice-devel/2005q3/index.html" >
   <LINK REL="made" HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20A-V%20sync%20problems%20with%20directfb%20on&In-Reply-To=%3C200509290038.27585.stefan%40lucke.in-berlin.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001271.html">
   <LINK REL="Next"  HREF="001276.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Softdevice-devel] A-V sync problems with directfb on</H1>
    <B>Stefan Lucke</B> 
    <A HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20A-V%20sync%20problems%20with%20directfb%20on&In-Reply-To=%3C200509290038.27585.stefan%40lucke.in-berlin.de%3E"
       TITLE="[Softdevice-devel] A-V sync problems with directfb on">stefan at lucke.in-berlin.de
       </A><BR>
    <I>Thu Sep 29 00:38:27 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001271.html">[Softdevice-devel] A-V sync problems with directfb on
</A></li>
        <LI>Next message: <A HREF="001276.html">[Softdevice-devel] A-V sync problems with directfb on
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1273">[ date ]</a>
              <a href="thread.html#1273">[ thread ]</a>
              <a href="subject.html#1273">[ subject ]</a>
              <a href="author.html#1273">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mittwoch, 28. September 2005 10:52, Laz wrote:
&gt;<i> &gt; On Dienstag, 27. September 2005 01:28, Stefan Lucke wrote:
</I>
&gt;<i> &gt; As a hack I set that to 16667. There should be some bounds check or some
</I>&gt;<i> &gt; more measurement points.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This strange display time is reproducable after each reconfigure.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; [dfb] (re)configured 0x08100609
</I>&gt;<i> &gt; [dfb] Display frame time is 99949 microseconds
</I>&gt;<i> &gt; [dfb] Display frame time is 99950 microseconds
</I>&gt;<i> 
</I>&gt;<i> Hmmmmm...I saw this and thought it might be my problem too. Just checked,
</I>&gt;<i> and I see: [dfb] Display frame time is 19997 microseconds, which works out
</I>&gt;<i> as about 50 Hz (PAL). Did you mean this value or are you using NTSC?
</I>
I'm using the VGA out, and the LCD monitor needs 60Hz (16667 us).

&gt;<i> 
</I>&gt;<i> &gt; I cannot say very much about sync as audio out seems to broken.
</I>&gt;<i> &gt; Both active speaker sets are nearly and almost silent. But there
</I>&gt;<i> &gt; are no '+' chars written for skipping frames.
</I>&gt;<i> 
</I>&gt;<i> I'm not currently seeing any '+' in the output. I think there must be a
</I>&gt;<i> race condition or something because I sometimes get loads of them under
</I>&gt;<i> the same conditions!
</I>&gt;<i> 
</I>
&gt;<i> 
</I>&gt;<i> Tried both last night:
</I>&gt;<i> emSigTimer: one frame about every 3 seconds! CPU usage ca. 3%! ;-)
</I>&gt;<i> emUsleepTimer: played about half speed.
</I>
When I set the Flip parameter to DSFLIP_WAITFORSYNC I see many '+'
chars -&gt; frame dropping.

But I'm in a way lost in all those patches floating around.  And searching
information from several list is a real pain. Perhaps we should use our wiki
to collect some facts about each system and symptoms.

I guess the source of your problem is in the unichrome-directfb.diff from
Mark Adams 2005-09-07 on directfb-user list (if you are using that).
Won't say that it is faulty or wrong, but from reading I guess it does
wait always for frame change to happen.

Other applications have a separate thread, which does only the flip.
So they are not affected by that change. 

If someone has the spec sheet for the epia video chip, he should sent
me that via private mail.
I can't believe that this chip has no possibility to report current field.

A real problem for me is that, I don't get any sound out of my epia board.
Would be nice if some could help with a working asound.state for such a
board or required module parms for via82xx. I tried ac97_quirk=[0,1]
but that made no difference.


-- 
Stefan Lucke


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001271.html">[Softdevice-devel] A-V sync problems with directfb on
</A></li>
	<LI>Next message: <A HREF="001276.html">[Softdevice-devel] A-V sync problems with directfb on
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1273">[ date ]</a>
              <a href="thread.html#1273">[ thread ]</a>
              <a href="subject.html#1273">[ subject ]</a>
              <a href="author.html#1273">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/softdevice-devel">More information about the Softdevice-devel
mailing list</a><br>
</body></html>
