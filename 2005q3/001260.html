<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Softdevice-devel] A-V sync problems with directfb on	unichrome...
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/softdevice-devel/2005q3/index.html" >
   <LINK REL="made" HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20A-V%20sync%20problems%20with%20directfb%20on%0A%09unichrome...&In-Reply-To=%3C1127467072.2670.20.camel%40laser2.york.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001262.html">
   <LINK REL="Next"  HREF="001263.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Softdevice-devel] A-V sync problems with directfb on	unichrome...</H1>
    <B>Laurence Abbott</B> 
    <A HREF="mailto:softdevice-devel%40lists.berlios.de?Subject=Re%3A%20%5BSoftdevice-devel%5D%20A-V%20sync%20problems%20with%20directfb%20on%0A%09unichrome...&In-Reply-To=%3C1127467072.2670.20.camel%40laser2.york.ac.uk%3E"
       TITLE="[Softdevice-devel] A-V sync problems with directfb on	unichrome...">laz at club-burniston.co.uk
       </A><BR>
    <I>Fri Sep 23 11:17:52 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001262.html">[Softdevice-devel] A-V sync problems with directfb on	unichrome...
</A></li>
        <LI>Next message: <A HREF="001263.html">[Softdevice-devel] A-V sync problems with directfb on	unichrome...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1260">[ date ]</a>
              <a href="thread.html#1260">[ thread ]</a>
              <a href="subject.html#1260">[ subject ]</a>
              <a href="author.html#1260">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2005-09-22 at 19:03 +0200, Martin Wache wrote:
&gt;<i> However I think that the nans you see are just because I was a bit lazy
</I>&gt;<i> with the conversions: (float)dispTime/1000  is not necessarly of type
</I>&gt;<i> float again. Probably an additional conversion or replacing 1000 by
</I>&gt;<i> 1000.0 helps, I think I remember that some compilers didn't like these
</I>&gt;<i> constructs.
</I>
Here are is some output from added '.0' with both BPGDEb and AV_STATS
defined:

(short section posted here: full log from ca. 20 s run at
<A HREF="http://vdr.club-burniston.co.uk/vdr_MPGDEB.log.gz">http://vdr.club-burniston.co.uk/vdr_MPGDEB.log.gz</A>):

mpegdec[6592]:Frame# 469   A-V(ms) 2243  delay -86981 FrameT: B_t, dispTime(ms):
56.21
A-V: 232.45+-44.66 ms DispTime: 33.64 ms hurry_up: 1
mpegdec[6602]:audio: count: 815  Length: 576 len: 576 a_size: 4608 a_delay: 1045
mpegdec[6602]:audio pts offset -149357278
mpegdec[6602]:a_delay 1285 at end of decode
mpegdec[6603]:audio: count: 816  Length: 576 len: 576 a_size: 4608 a_delay: 1273
mpegdec[6603]:audio pts offset -149357278
mpegdec[6603]:a_delay 1513 at end of decode
mpegdec[6604]:audio: count: 817  Length: 576 len: 576 a_size: 4608 a_delay: 1501
mpegdec[6604]:audio pts offset -149357279
mpegdec[6604]:a_delay 1741 at end of decode
mpegdec[6607]:Got pts: pictno 471  pts: 518268682 lastIdx 2
mpegdec[6607]:video pts: 518268682, values.pkt : 518268682 pts - valid PTS: 0 pic
tno: 471 idx: 1
mpegdec[6607]:Frame# 470   A-V(ms) 2243  delay -54891 FrameT: B_t, dispTime(ms):
14.89
mpegdec[6620]:Got pts: pictno 472  pts: 518270282 lastIdx 3
mpegdec[6620]:video pts: 518269082, values.pkt : 518269082 pts - valid PTS: 0 pic
tno: 469 idx: 9
mpegdec[6672]:Frame# 471   A-V(ms) 1843  delay -87974 FrameT: P_t, dispTime(ms):
52.05
mpegdec[6685]:Got pts: pictno 473  pts: 518269482 lastIdx 4
mpegdec[6685]:video pts: 518269482, values.pkt : 518269482 pts - valid PTS: 0 pic

tno: 473 idx: 3
mpegdec[6685]:Frame# 472   A-V(ms) 1443  delay -52707 FrameT: B_t, dispTime(ms):
12.71
mpegdec[6701]:Got pts: pictno 474  pts: 518269882 lastIdx 5
mpegdec[6701]:video pts: 518269882, values.pkt : 518269882 pts - valid PTS: 0 pic
tno: 474 idx: 4
mpegdec[6708]:audio: count: 818  Length: 576 len: 576 a_size: 4608 a_delay: 705
mpegdec[6708]:audio pts 518273306 pkt-&gt;PTS : 518273306 pts - valid PTS: 0
mpegdec[6708]:audio pts offset -149357277
mpegdec[6708]:a_delay 943 at end of decode
mpegdec[6709]:audio: count: 819  Length: 576 len: 576 a_size: 4608 a_delay: 933
mpegdec[6709]:audio pts offset -149357279
mpegdec[6709]:a_delay 1171 at e+++nd of decode
mpegdec[6710]:audio: count: 820  Length: 576 len: 576 a_size: 4608 a_delay: 1160
mpegdec[6710]:audio pts offset -149357277
mpegdec[6710]:a_delay 1400 at end of decode
mpegdec[6712]:audio: count: 821  Length: 576 len: 576 a_size: 4608 a_delay: 1388
mpegdec[6712]:audio pts offset -149357278
mpegdec[6712]:a_delay 1628 at end of decode
mpegdec[6721]:audio: count: 822  Length: 576 len: 576 a_size: 4608 a_delay: 1533
mpegdec[6721]:audio pts offset -149357279
mpegdec[6721]:a_delay 1771 at end of decode
mpegdec[6722]:audio: count: 823  Length: 576 len: 576 a_size: 4608 a_delay: 1760
mpegdec[6731]:audio pts offset -149357278
mpegdec[6731]:a_delay 1918 at end of decode
mpegdec[6752]:Frame# 473   A-V(ms) 2306  delay -87989 FrameT: B_t, dispTime(ms):
51.19
mpegdec[6764]:Got pts: pictno 475  pts: 518271482 lastIdx 6
mpegdec[6765]:video pts: 518270282, values.pkt : 518270282 pts - valid PTS: 0 pic
tno: 472 idx: 2
mpegdec[6765]:Frame# 474   A-V(ms) 1906  delay -52279 FrameT: P_t, dispTime(ms):
12.28
mpegdec[6776]:Got pts: pictno 476  pts: 518270682 lastIdx 7
mpegdec[6776]:video pts: 518270682, values.pkt : 518270682 pts - valid PTS: 0 pic
tno: 476 idx: 6
mpegdec[6802]:audio: count: 824  Length: 576 len: 576 a_size: 4608 a_delay: 1201
mpegdec[6802]:audio pts 518274746 pkt-&gt;PTS : 518274746 pts - valid PTS: 0
mpegdec[6802]:audio pts offset -149357279
mpegdec[6802]:a_delay 1438 at end of decode
mpegdec[6804]:audio: count: 825  Length: 576 len: 576 a_size: 4608 a_delay: 1426
mpegdec[6804]:audio pts offset -149357279
mpegdec[6804]:a_delay 1666 at end of decode
mpegdec[6805]:audio: count: 826  Length: 576 len: 576 a_size: 4608 a_delay: 1656
mpegdec[6805]:audio pts offset -149357279
mpegdec[6805]:a_delay 1895 at end of decode
mpegdec[6832]:Frame# 475   A-V(ms) 2249  delay -87990 FrameT: B_t, dispTime(ms):
56.33
mpegdec[6843]:Got pts: pictno 477  pts: 518271082 lastIdx 8

Here's how the A-V stats vary during this run:

A-V: -363.95+-126.88 ms DispTime: 46.92 ms hurry_up: 0
A-V: -320.03+-5.31 ms DispTime: 25.35 ms hurry_up: 0
A-V: -265.41+-29.26 ms DispTime: 30.98 ms hurry_up: 0
A-V: -215.44+-21.94 ms DispTime: 29.21 ms hurry_up: 0
A-V: -146.47+-41.71 ms DispTime: 32.29 ms hurry_up: 0
A-V: -57.05+-20.41 ms DispTime: 31.66 ms hurry_up: 0
A-V: -10.97+-35.52 ms DispTime: 32.56 ms hurry_up: 0
A-V: 36.95+-17.40 ms DispTime: 28.26 ms hurry_up: 0
A-V: 69.53+-24.34 ms DispTime: 31.95 ms hurry_up: 0
A-V: 97.60+-20.05 ms DispTime: 32.36 ms hurry_up: 0
A-V: 132.35+-26.70 ms DispTime: 31.38 ms hurry_up: 0
A-V: 154.51+-17.61 ms DispTime: 27.99 ms hurry_up: 0
A-V: 184.90+-21.34 ms DispTime: 33.56 ms hurry_up: 0
A-V: 257.59+-29.15 ms DispTime: 31.72 ms hurry_up: 0
A-V: 276.72+-30.43 ms DispTime: 31.34 ms hurry_up: 1
A-V: 289.41+-30.70 ms DispTime: 33.70 ms hurry_up: 1
A-V: 285.66+-44.36 ms DispTime: 33.11 ms hurry_up: 1
A-V: 254.77+-38.49 ms DispTime: 28.44 ms hurry_up: 1
A-V: 228.08+-42.72 ms DispTime: 29.19 ms hurry_up: 1
A-V: 204.85+-26.24 ms DispTime: 33.07 ms hurry_up: 1
A-V: 220.18+-25.49 ms DispTime: 33.59 ms hurry_up: 1
A-V: 203.31+-35.22 ms DispTime: 33.13 ms hurry_up: 1
A-V: 206.08+-24.27 ms DispTime: 32.99 ms hurry_up: 1
A-V: 256.04+-28.92 ms DispTime: 36.72 ms hurry_up: 1
A-V: 259.60+-18.55 ms DispTime: 31.84 ms hurry_up: 1
A-V: 255.12+-26.27 ms DispTime: 34.00 ms hurry_up: 1
A-V: 247.73+-26.92 ms DispTime: 33.57 ms hurry_up: 1
A-V: 275.72+-36.65 ms DispTime: 34.50 ms hurry_up: 1
A-V: 285.67+-33.00 ms DispTime: 33.62 ms hurry_up: 1
A-V: 288.99+-34.04 ms DispTime: 33.19 ms hurry_up: 1
A-V: 307.00+-9.51 ms DispTime: 33.02 ms hurry_up: 1
A-V: 281.63+-29.35 ms DispTime: 29.73 ms hurry_up: 1
A-V: 270.43+-21.91 ms DispTime: 33.20 ms hurry_up: 1
A-V: 221.02+-31.85 ms DispTime: 29.36 ms hurry_up: 1
A-V: 208.27+-35.88 ms DispTime: 32.31 ms hurry_up: 1
A-V: 214.67+-29.64 ms DispTime: 37.29 ms hurry_up: 1
A-V: 251.75+-30.69 ms DispTime: 34.73 ms hurry_up: 1
A-V: 258.38+-28.08 ms DispTime: 32.32 ms hurry_up: 1
A-V: 254.00+-21.50 ms DispTime: 32.42 ms hurry_up: 1
A-V: 267.78+-17.05 ms DispTime: 32.77 ms hurry_up: 1
A-V: 263.08+-18.45 ms DispTime: 32.35 ms hurry_up: 1
A-V: 249.49+-34.94 ms DispTime: 32.39 ms hurry_up: 1
A-V: 257.46+-21.21 ms DispTime: 33.45 ms hurry_up: 1
A-V: 223.41+-52.65 ms DispTime: 33.30 ms hurry_up: 1
A-V: 260.07+-22.31 ms DispTime: 32.97 ms hurry_up: 1
A-V: 259.14+-17.84 ms DispTime: 32.69 ms hurry_up: 1
A-V: 232.45+-44.66 ms DispTime: 33.64 ms hurry_up: 1
A-V: 246.41+-28.99 ms DispTime: 32.78 ms hurry_up: 1

Cheers,

Laz


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001262.html">[Softdevice-devel] A-V sync problems with directfb on	unichrome...
</A></li>
	<LI>Next message: <A HREF="001263.html">[Softdevice-devel] A-V sync problems with directfb on	unichrome...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1260">[ date ]</a>
              <a href="thread.html#1260">[ thread ]</a>
              <a href="subject.html#1260">[ subject ]</a>
              <a href="author.html#1260">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/softdevice-devel">More information about the Softdevice-devel
mailing list</a><br>
</body></html>
